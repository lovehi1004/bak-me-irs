/*!
 * 
 * Product name/Version: SynapDocumentViewer 22.11.0
 * 
 */!function(e){function t(t){for(var o,a,s=t[0],l=t[1],c=t[2],u=0,h=[];u<s.length;u++)a=s[u],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&h.push(i[a][0]),i[a]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);for(d&&d(t);h.length;)h.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,s=1;s<n.length;s++){var l=n[s];0!==i[l]&&(o=!1)}o&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},i={1:0},r=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var d=l;r.push([162,0]),n()}([function(e,t,n){"use strict";(function(e,o){var i=this&&this.__awaiter||function(t,n,o,i){return new(o||(o=e))((function(e,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}l((i=i.apply(t,n||[])).next())}))},r=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.ORIENTATION=t.SERVICE_VERSION=void 0;var a,s,l=n(3),c=n(1),d=n(35),u=n(57),h=n(101),f=n(50),m=n(19);!function(e){e[e.v2019=0]="v2019",e[e.v2022=1]="v2022"}(a=t.SERVICE_VERSION||(t.SERVICE_VERSION={})),function(e){e[e.PORTRAIT=0]="PORTRAIT",e[e.LANDSCAPE=1]="LANDSCAPE"}(s=t.ORIENTATION||(t.ORIENTATION={}));var p=function(){function t(){}var n;return t.ajaxCall=function(n,o,i,r){return void 0===o&&(o="GET"),void 0===i&&(i=null),void 0===r&&(r=null),new e((function(e,a){var s="";if(i&&"object"==typeof i.param)for(var l in s.length>0&&(s+="&"),i.param)s+=l+"="+encodeURIComponent(i.param[l])+"&";s=t.setExtraParam(s);var c=new XMLHttpRequest;if("POST"===o)if("json"===r){var d=t.setQueryString(n,s);c.open("POST",d,!0),c.setRequestHeader("Content-Type","application/json")}else c.open("POST",n,!0),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");else{d=t.setQueryString(n,s);c.open("GET",d,!0),"js"===r&&c.setRequestHeader("Content-Type","application/javascript; charset=UTF-8")}if(window.localSynap&&window.localSynap.config&&"object"==typeof window.localSynap.config.extraHeader)for(var l in window.localSynap.config.extraHeader)c.setRequestHeader(l,window.localSynap.config.extraHeader[l]);c.onreadystatechange=function(){4===c.readyState&&(c.status>=200&&c.status<400?e(null!==r&&"xml"===r?c.responseXML:c.responseText):null!==r&&"xml"===r&&500===c.status?e(null):a(new Error(c.status.toString())))},"POST"===o&&"json"===r?c.send(i):c.send(s)}))},t.setQueryString=function(e,t){var n=c.Browser.instance.isIE9Lower()?encodeURI(e):e;return n.indexOf("?")>-1?n+="&"+t:n+="?"+t,n},t.setExtraParam=function(e){var t=e;if(window.localSynap&&window.localSynap.config&&"object"==typeof window.localSynap.config.extraParam)for(var n in t.length>0&&(t+="&"),window.localSynap.config.extraParam)t+=n+"="+encodeURIComponent(window.localSynap.config.extraParam[n])+"&";return t},t.getJson=function(e,t,n){return void 0===t&&(t=null),void 0===n&&(n=null),i(this,void 0,void 0,(function(){var o;return r(this,(function(i){switch(i.label){case 0:return[4,this.ajaxCall(e,"GET",t,n)];case 1:return o=i.sent(),[2,JSON.parse(o)]}}))}))},t.postJsonAjax=function(e,n){void 0===n&&(n=null);var o=null,i=t.getUrlWithExtraParam(e);return l.ajax({type:"POST",url:i,data:n,contentType:"application/json",async:!1,success:function(e){o=e},error:function(e){throw new Error(e.status+" "+e.statusText)}}),o},t.postJson=function(e,t){return void 0===t&&(t=null),i(this,void 0,void 0,(function(){var n;return r(this,(function(o){switch(o.label){case 0:return[4,this.ajaxCall(e,"POST",t)];case 1:return n=o.sent(),[2,JSON.parse(n)]}}))}))},t.getXml=function(e,t){return void 0===t&&(t=null),i(this,void 0,void 0,(function(){var n;return r(this,(function(o){switch(o.label){case 0:return[4,this.ajaxCall(e,"GET",t,"xml")];case 1:return n=o.sent(),[2,this.xmlToJson(n)]}}))}))},t.getThumbnailXml=function(e,t){return void 0===t&&(t=null),i(this,void 0,void 0,(function(){var n,o;return r(this,(function(i){switch(i.label){case 0:return[4,this.ajaxCall(e,"GET",t,"xml")];case 1:return(n=i.sent())?[3,4]:(o=e.replace("thumbnailxml","thumbnail"),[4,this.ajaxCall(o,"GET",t)]);case 2:return i.sent(),[4,this.ajaxCall(e,"GET",t,"xml")];case 3:n=i.sent(),i.label=4;case 4:return[2,this.xmlParse(n)]}}))}))},t.xmlParse=function(e){var t={};if(e.hasChildNodes()){var n=e.getElementsByTagName("page")[0];if("page"!=n.tagName)return;if(n.attributes.length>0){t.page={};for(var o=0;o<n.attributes.length;o++){var i=n.attributes.item(o);t.page[i.nodeName]=i.nodeValue}}for(var r=c.Browser.instance.isIE9Lower(),a="",s=[],l=0,d=0,u=e.getElementsByTagName("text");d<u.length;d++){var h=u[d];if(r||0!==h.textContent.length){var f={};for(o=0;o<h.attributes.length;o++){f[(i=h.attributes.item(o)).nodeName]=Number(i.nodeValue).toFixed(2)}var m="";m=r?0===h.text.length?" ":h.text:h.textContent,s[l]={"@attributes":f,text:m},r&&(a+=m),l++}}t.text=s;var p=[];l=0;for(var g=0,v=e.getElementsByTagName("link");g<v.length;g++){for(var b=v[g],E={},y=(f={},0);y<b.attributes.length;y++){var I=b.attributes.item(y);"l"==I.nodeName||"t"==I.nodeName||"w"==I.nodeName||"h"==I.nodeName?f[I.nodeName]=Number(I.nodeValue).toFixed(2):E[I.nodeName]=I.nodeValue}E["@attributes"]=f,p[l]=E,l++}t.link=p,t.result=r?a:n.textContent.replace(/\n/gi,"")}return t},t.xmlToJson=function(e){var t={};if(1===e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var n=0;n<e.attributes.length;n++){var o=e.attributes.item(n);t["@attributes"][o.nodeName]=o.nodeValue}}}else if(3===e.nodeType){var i=e.nodeValue.trim();if(i.length)return i}else if(4===e.nodeType)return e.data;if(e.hasChildNodes())for(var r=0,a=e.childNodes.length;r<a;r++){var s=e.childNodes.item(r),l=s.nodeName;if(void 0===t[l]){var c=this.xmlToJson(s);Object.keys(new Object(c)).length&&(l[0]&&"#"===l[0]?t=c:t[l]=c)}else{var d=this.xmlToJson(s);if(0===Object.keys(new Object(d)).length)continue;void 0===t[l].push?t[l]=[t[l],d]:t[l].push(d)}}return t},t.isMobileMode=function(){if(c.Browser.instance.isMobile)return!0;if(document.documentElement.clientWidth<=t.MaxMobileModeWidth)return!0;var e=screen.width/screen.height;return screen.width>=1024&&screen.height<=1024&&e<=1.7||(c.Browser.instance.isIE?screen.width*d.DetectZoom.getRatio():screen.width)<=1024},t.isSmallScreen=function(){return document.documentElement.clientWidth<=500},t.isFullScreen=function(){return l("#container").hasClass("wrap__container--presentation")},t.isBrowserFullScreen=function(){return t.isFullScreen()&&!l(".wrap__header").hasClass("wrap__header--presentation")},t.isSupportFullScreen=function(){var e=top.document;return top.document.fullscreenEnabled||e.mozFullScreenEnabled||e.webkitFullscreenEnabled||e.msFullscreenEnabled},t.getThumbPath=function(e,n,o,i){void 0===i&&(i=null);var r=o||u.DPI.thumbDPI,a="";if(i)for(var s in i)a+="&"+s+"="+encodeURIComponent(i[s]);if(t.isUseAnnotation(e)&&(a+="&dispAnnot=2"),""!=(a=t.setExtraParam(a))&&"&"!=a.charAt(0)&&(a="&"+a),e.status.imageConverting){var l=window.localSynap.config.thumbnailExt?"."+window.localSynap.config.thumbnailExt:".png";return e.contextPath+"/thumbnail/"+n+l+"?dpi="+r+"&withXml=false"+a}return e.contextPath+"/thumbnail/"+e.jobId+"/"+n+"?dpi="+r+"&withXml=true"+a},t.getResultPath=function(e,n){var o=e.resultPath+"/"+n;return t.getUrlWithExtraParam(o)},t.getUrlWithExtraParam=function(e){var n=t.setExtraParam("");return t.setQueryString(e,n)},t.setAnnotQueryString=function(e){return void 0!==e.annotToken?"annotToken="+e.annotToken:""},t.printConsoleLog=function(e){window.console&&console.log(e)},t.getMouseHandlerDispatch=function(e,t){return void 0===t&&(t=function(e){return!0}),function(n){if(t(n))if(c.Browser.instance.isIE){(o=document.createEvent("MouseEvent")).initMouseEvent&&o.initMouseEvent(n.type,!0,!0,n.view,n.detail,n.screenX,n.screenY,n.clientX,n.clientY,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.button,n.relatedTarget),e.dispatchEvent(o)}else{var o=new MouseEvent(n.type,n);e.dispatchEvent(o)}}},t.getKeybordHandlerDispatch=function(e){return function(t){if(c.Browser.instance.isIE||c.Browser.instance.isEdge){(n=document.createEvent("KeyboardEvent")).initKeyboardEvent&&n.initKeyboardEvent(t.type,!0,!0,t.view,t.key,t.location,t.modifiersList,t.repeat,t.locale),e.dispatchEvent(n)}else{var n=new KeyboardEvent(t.type,t);e.dispatchEvent(n)}}},t.getTouchHandlerDispatch=function(e){return function(t){var n=new TouchEvent(t.type,t);e.dispatchEvent(n)}},t.fill=function(e,t){for(var n=0;n<e.length;n++)e[n]=t;return e},t.getParameter=function(){var e=document.createElement("a");e.href=window.location.href;for(var t={},n=0,o=e.search.slice(1).split("&");n<o.length;n++){var i=o[n],r=i.split("=")[0],a=i.split("=")[1];t[r]=decodeURIComponent(a)}return t},t.getParameterFromURL=function(e){var t=document.createElement("a");t.href=e;for(var n={},o=0,i=t.search.slice(1).split("&");o<i.length;o++){var r=i[o],a=r.split("=")[0],s=r.split("=")[1];null!=s&&(n[a]=decodeURIComponent(s))}return n},t.getServerDpi=function(n){return i(void 0,void 0,e,(function(){var e,o,i;return r(this,(function(r){switch(r.label){case 0:e=96,o=n+"/config/dpi",i=null,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t.ajaxCall(o,"GET")];case 2:return i=r.sent(),e=parseInt(i),[3,4];case 3:return r.sent(),t.printConsoleLog("fail to call api - /cli"),[3,4];case 4:return[2,e]}}))}))},t.MaxMobileModeWidth=768,t.isSupportKeyFrame=function(){var e=getComputedStyle(document.querySelector(".wrap__contents"));return!(!e.animation&&!e.webkitAnimation)},t.sleep=function(t){return new e((function(e){return setTimeout(e,t)}))},t.bindClickOrTouchEvent=function(e,n,o,i,r){void 0===o&&(o=function(e){}),void 0===i&&(i=function(t){e.removeClass(n)}),void 0===r&&(r=function(t){e.addClass(n)}),e.on(c.Browser.instance.isMobile?"touchstart":"mouseover",(function(t){e.prop("disabled")||r(t)})).on(c.Browser.instance.isMobile?"click touchend":"mouseout click",(function(t){(c.Browser.instance.isMobile&&"click"===t.type||"touchend"===t.type||"mouseout"===t.type)&&i(t),"click"===t.type&&(e.prop("disabled")||o(t))}));for(var a=0;a<e.length;++a)t.bindFocus(e[a]),t.bindEnterKey(e[a])},t.bindClickEvent=function(e,n,o){void 0===n&&(n=function(e){}),void 0===o&&(o=!1),t.bindFocus(e),e.addEventListener("click",(function(e){n(e)})),o?t.bindEnterKey(e,n):t.bindEnterKey(e)},t.bindOnceClickEvent=function(e,n){t.bindFocus(e);var o=function(t){n(t),e.removeEventListener("click",o)};e.addEventListener("click",o),t.bindOnceEnterKey(e)},t.mousedown=!1,t.bindFocus=function(e){e.addEventListener("focus",(function(e){t.mousedown&&e.target.blur()}))},t.checkMouseDown=function(){document.addEventListener("mousedown",(function(){t.mousedown=!0})),document.addEventListener("mouseup",(function(){t.mousedown=!1}))},t.getDimensionHtmlForPDF=function(e){var t=[];if(1==e.index.pdf_cnt){var n={index:0,width:e.index.pdf_list.pdf.w,height:e.index.pdf_list.pdf.h,origin_width:e.index.pdf_list.pdf.w,origin_height:e.index.pdf_list.pdf.h,path:e.index.pdf_list.pdf.path_html};return t[0]=n,t}var o=1,i=parseInt(e.index.pdf_cnt);return 1===window.localSynap.config.loadingRangeType&&(e.index.startPage&&(o=parseInt(e.index.startPage)),e.index.endPage&&(i=parseInt(e.index.endPage))),l.each(e.index.pdf_list.pdf,(function(e,n){var r=parseInt(n.id);if(r<o)return!0;if(r>i)return!1;var a=parseInt(e)-o+1,s={index:a,width:n.w,height:n.h,origin_width:n.w,origin_height:n.h,path:n.path_html};t[a]=s})),t},t.getDimensionHtmlForImage=function(e){var t=[];if(1==e.index.image_cnt){var n={index:0,width:e.index.width,height:e.index.height,origin_width:e.index.width,origin_height:e.index.height,path:e.index.image_list.image.path_image};t[0]=n}else l.each(e.index.image_list.image,(function(e,n){var o={index:e,width:n.w,height:n.h,origin_width:n.w,origin_height:n.h,path:n.path_image};t[e]=o}));return t},t.isServer=function(e){return e.productType===h.PRODUCT_TYPE.SERVER},t.isHtmlSkin=function(e){return t.isHtmlWordSkin(e)||t.isHtmlCellSkin(e)||t.isHtmlSlideSkin(e)},t.isHtmlWordSkin=function(e){return t.isConvHtml(e)&&"word"===e.skinType},t.isHtmlCellSkin=function(e){return t.isConvHtml(e)&&"cell"===e.skinType},t.isHtmlSlideSkin=function(e){return t.isConvHtml(e)&&"slide"===e.skinType},t.isHtmlImageSkin=function(e){return t.isConvHtml(e)&&("image"===e.skinType||"pdf"===e.skinType)},t.isConvHtml=function(e){return e.status.convertType===h.CONV_TYPE.HTML},t.isConvImg=function(e){return e.status.convertType===h.CONV_TYPE.IMAGE},t.isHTMLFormat=function(e){return"mhtml"===e.fileType||"html"===e.fileType||"msg"===e.fileType||"eml"===e.fileType},t.useSingle=function(e){return t.isHtmlSkin(e)&&e.status.single},t.getHeadScale=function(e){var t="string"==typeof l(e).css("transform")?l(e).css("transform").replace("matrix(","").split(","):[];return 6===t.length?parseFloat(t[0]):1},t.isUseAnnotation=function(e){return!t.isConvHtml(e)&&!!window.localSynap.config.useAnnotation&&!e.status.simode},t.isUseSearch=function(e){return(null==window.localSynap.config.search||window.localSynap.config.search)&&"image"!==e.skinType&&!e.status.simode&&!t.isHtmlSkin(e)},t.isCellSkin=function(e){return"cell"===e.skinType},t.isPDF=function(e){return"pdf"===e.skinType},t.needDocumentFitCss=function(e){return t.isHtmlWordSkin(e)||t.isHtmlCellSkin(e)},t.allowCopy=function(){return!(!1===window.localSynap.config.allowCopy)},t.removeContentsAreaTooltip=function(){return!!window.localSynap.config.removeContentsAreaTooltip},t.rotatePdf=function(e){return!1===window.localSynap.config.search&&!window.localSynap.config.useAnnotation&&"pdf"===e.skinType&&!!window.localSynap.config.rotatePdf},t.rotateImage=function(e){return!window.localSynap.config.useAnnotation&&"image"===e.skinType},t.fixedPageFit=function(){return!!window.localSynap.config.fixedPageFit},t.headerAutoHide=function(){return!(!1===window.localSynap.config.headerAutoHide)},t.setServiceType=function(e){t.SERVICE_TYPE=e},t.isDocslive=function(){return"docslive"===t.SERVICE_TYPE},t.setServiceVersion=function(e){t.SERVICE_VERSION="v2019"===e?a.v2019:a.v2022},t.getServiceVersion=function(){return t.SERVICE_VERSION},t.getServiceVersionString=function(){return t.getServiceVersion()===a.v2019?"2019":"2022"},t.isSupportedVer2022=function(){return t.getServiceVersion()===a.v2022},t.clone=function(e){var t={};for(var n in e)t[n]=e[n];return t},t.getSize=function(e,t){var n=e,o="B";return t||-1===e?"-":(e>1073741824?(n=e/1073741824,o="GB"):e>1048576?(n=e/1048576,o="MB"):e>1024&&(n=e/1024,o="KB"),""+n.toFixed(1)+o)},t.toFixedNumber=function(e,t){return"string"==typeof e?parseFloat(parseFloat(e).toFixed(t)):parseFloat(e.toFixed(t))},t.addClass=function(e,t){if(e)if(e.classList)e.classList.add(t);else{for(var n=!1,o=e.className.trim().split(" "),i=0;i<o.length;i++)if(o[i]===t){n=!0;break}n||(e.className=e.className.trim()+" "+t)}},t.removeClass=function(e,t){if(e)if(e.classList)e.classList.remove(t);else{var n="";e.className.trim().split(" ").forEach((function(e){e!==t&&(n+=e+" ")})),e.className=n.trim()}},t.addClasses=function(e,n){for(var o=0,i=e;o<i.length;o++){var r=i[o];t.addClass(r,n)}},t.removeClasses=function(e,n){for(var o=0,i=e;o<i.length;o++){var r=i[o];t.removeClass(r,n)}},t.removeElem=function(e){e&&(e.remove?e.remove():e.parentNode.removeChild(e))},t.getClickEventName=function(){return"click"},t.getClickOrTouchEventName=function(){return c.Browser.instance.isMobile?"touchend":"click"},t.getClickStartEventName=function(){return c.Browser.instance.isMobile?"touchstart":c.Browser.instance.isSafari||c.Browser.instance.isIE10Lower()?"mousedown":"pointerdown"},t.getClickEndEventName=function(){return c.Browser.instance.isMobile?"touchend":c.Browser.instance.isSafari||c.Browser.instance.isIE10Lower()?"mouseup":"pointerup"},t.getMoveEventName=function(){return c.Browser.instance.isMobile?"touchmove":c.Browser.instance.isSafari||c.Browser.instance.isIE10Lower()?"mousemove":"pointermove"},t.hasClass=function(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)},t.hasClassForEventTargetEl=function(e,n,o){void 0===o&&(o=3);var i=function(e){return e&&"HTML"===e.tagName};if(i(e))return!1;for(var r=t.containClassName(e,n),a=e,s=1;s<o;++s){if(r)return!0;var l=t.getParentElement(a);if(!l||i(l))return!1;r=t.containClassName(l,n),a=l}return r},t.nonPassiveEventListenerOption={passive:!1},t.isSelected=function(){var e=window.getSelection();return!!(e&&e.rangeCount>0&&e.toString())},t.cancelSelection=function(){var e=window.getSelection();e&&e.rangeCount>0&&e.getRangeAt(0).getClientRects().length>0&&e.removeAllRanges()},t.getSelectedTextElIdRange=function(){var e=window.getSelection().getRangeAt(0),n=e.startContainer,o=e.endContainer,i=1===n.nodeType?n:n.parentNode;if(c.Browser.instance.isIOS){if(i.id.indexOf("page-area")>-1){var r=i.id.substring("page-area".length);i=document.getElementById("text-"+r+"-0")}}var a=1===o.nodeType?o:o.parentNode;return i&&i.className&&-1!==i.className.indexOf("text")&&a&&a.className&&-1!==a.className.indexOf("text")?{startTextId:i.id,endTextId:a.id}:(t.cancelSelection(),null)},t.blendColors=function(e,t,n){var o=e.match(/\w\w/g).map((function(e){return parseInt(e,16)})),i=o[0],r=o[1],a=o[2],s=t.match(/\w\w/g).map((function(e){return parseInt(e,16)})),l=s[0],c=s[1],d=s[2];return"#"+Math.round(i+(l-i)*n).toString(16).padStart(2,"0")+Math.round(r+(c-r)*n).toString(16).padStart(2,"0")+Math.round(a+(d-a)*n).toString(16).padStart(2,"0")},t.removeExtension=function(e,t){var n=e.lastIndexOf(".");return-1!==n&&e.substring(n+1)===t?e.substring(0,n):e},t.disableEvent=function(e){e.preventDefault()},t.showLoadingDimmed=function(e){void 0===e&&(e=!1);if(t.removeClass(document.getElementById("loading-dimmed"),"loading-dimmed--hide"),e){var n=document.getElementById("percent-message");t.removeClass(n,"hide")}},t.hideLoadingDimmed=function(){t.addClass(document.getElementById("loading-dimmed"),"loading-dimmed--hide");var e=document.getElementById("percent-message");t.addClass(e,"hide")},t.getTimestamp=function(){var e=new Date;return"D:"+e.getFullYear().toString().padStart(4,"0")+(e.getMonth()+1).toString().padStart(2,"0")+e.getDate().toString().padStart(2,"0")+e.getHours().toString().padStart(2,"0")+e.getMinutes().toString().padStart(2,"0")+e.getSeconds().toString().padStart(2,"0")},t.syncTimer=function(t,n){return i(void 0,void 0,void 0,(function(){return r(this,(function(o){return[2,new e((function(e){setTimeout((function(){t(),e()}),n)}))]}))}))},t.getIdxFromElmId=function(e,t){return parseInt(e.substring(t.length))},t.getParentElement=function(e){var t=e.parentElement?e.parentElement:e.parentNode;return null===t&&console.log(e+"cannot get parent"),t},t.getTmpPathElem=function(e){return t.getParentElement(e).getElementsByClassName("tmp-marker-path")?t.getParentElement(e).getElementsByClassName("tmp-marker-path")[e.childElementCount-1]:e.getElementById("tmp-marker-path")},t.containClassName=function(e,t){return e.classList?e.classList.contains(t):!(!e.getAttribute||!e.getAttribute("class"))&&e.getAttribute("class").indexOf(t)>-1},t.disableKeyEventForPageMove=function(e){e.addEventListener("keydown",(function(e){switch(e.keyCode){case f.keyMap.PAGEUP:case f.keyMap.PAGEDOWN:e.preventDefault(),e.stopPropagation();break;case f.keyMap.HOME:case f.keyMap.END:case f.keyMap.UPARROW:case f.keyMap.LEFTARROW:case f.keyMap.DOWNARROW:case f.keyMap.RIGHTARROW:e.stopPropagation()}}))},t.rangeVal=function(e,t,n){return Math.min(Math.max(t,e),n)},t.isFunction=function(e){return"function"==typeof e},t.bindEnterKey=function(e,t){e.addEventListener("keydown",(function(n){"Enter"===n.key&&(t?t(n):e.click())}))},t.bindOnceEnterKey=function(e){var t=function(){return function(n){"Enter"===n.key&&(e.click(),e.removeEventListener("keydown",t))}};e.addEventListener("keydown",t)},t.basicTabList=["page__input","select-arrow","header-tablist__input","export-pdf-btn","server-pdf-btn","marker-btn","sns-btn","info-btn","print-btn","thumbnailview-btn","download-btn","search-btn","search__input","search-prev","search-next","search-close","backgroundcolor-btn","presentation-btn","tabmore","fullscreen","more-btn","mobile-download-btn","mobile-export-pdf-btn","mobile-sns-btn","mobile-bgcolor-btn","mobile-print-btn","mobile-info-btn","mobile-window-close-btn","mobile-thumbnailbar","fullscreen-close","fullscreen-prev","fullscreen-next"],t.curTabList=new o,t.setTabIndexList=function(e,n,o){for(var i=isNaN(n)?1:n,r=e||t.basicTabList,a=0;a<r.length;a++)t.setTabIndex(document.getElementById(r[a]),o?i:i++);return i},t.clearTabIndexList=function(e){for(var n=e||t.basicTabList,o=0;o<n.length;o++)t.rmTabIndex(document.getElementById(n[o]))},t.setTabIndex=function(e,n){e.tabIndex=n,t.curTabList.set(e,n)},t.rmTabIndex=function(e){e.tabIndex=-1,t.curTabList.delete(e)},t.isInit=!1,t.toggleTabIndex=function(){t.isInit?t.curTabList.forEach((function(e,t){t.tabIndex=e})):t.curTabList.forEach((function(e,t){t.tabIndex=-1})),t.isInit=!t.isInit},t.getPageXOffset=function(e){return void 0===e&&(e=!1),c.Browser.instance.isIOS&&(!e||c.Browser.instance.isIOS12Lower())||!c.Browser.instance.isSupportVisualViewport()?window.pageXOffset:window.visualViewport.offsetLeft},t.getPageYOffset=function(e){return void 0===e&&(e=!1),c.Browser.instance.isIOS&&(!e||c.Browser.instance.isIOS12Lower())||!c.Browser.instance.isSupportVisualViewport()?window.pageYOffset:window.visualViewport.offsetTop},t.getInnerWidth=function(){return c.Browser.instance.isIOS||!c.Browser.instance.isSupportVisualViewport()?window.innerWidth:window.visualViewport.width},t.getInnerHeight=function(){return c.Browser.instance.isIOS||!c.Browser.instance.isSupportVisualViewport()?window.innerHeight:window.visualViewport.height},t.setVHVariable=function(){return document.documentElement.style.setProperty("--vh",t.getInnerHeight()/m.ScaleEvent.getBrowserScale()*.01+"px")},t.adjustBrowserScale=function(e){var n=t.getInnerWidth()/document.getElementById("container").clientWidth;e.style.transform=1==n?"":"scale("+n+")"},t.getDefaultViewPortString=function(){return window.screen.width<=t.MaxMobileModeWidth||c.Browser.instance.isIOS?"width=device-width, initial-scale=1.0, minimum-scale=1.0":"width=device-width, minimum-scale=1.0"},t.isActiveSearch=function(){return t.hasClass(document.getElementById("search-btn__img"),"search-btn__img--on")},t.isTabletInCSS=(n=window.matchMedia&&window.matchMedia("screen and (max-device-width: 1024px) and (min-device-height: 1024px) and (min-device-aspect-ratio : 10/17), screen and (min-device-width: 1024px) and (max-device-height: 1024px) and (max-device-aspect-ratio : 17/10)").matches,function(){var e=!c.Browser.instance.isMobile&&document.documentElement.clientWidth<=t.MaxMobileModeWidth;return n&&!e}),t.getOrientation=function(){var e="string"==typeof window.orientation?Number.parseInt(window.orientation):window.orientation;return 90!==Math.abs(e)?s.PORTRAIT:s.LANDSCAPE},t.get4DigitFormatString=function(e){var t=String(e);return"0000".substring(0,"0000".length-t.length)+t},t.checkRange=function(e,t,n){return t<=e&&e<=n},t.addEventListenerOnce=function(e,t,n){if(c.Browser.instance.isIE){var o=function(){n(),e.removeEventListener(t,o)};e.addEventListener(t,o)}else e.addEventListener(t,n,{once:!0})},t.getChildren=function(e){if(e.children)return Array.from(e.children);var t=e.childNodes;return Array.from(t)},t}();t.Util=p}).call(this,n(5),n(49))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Browser=void 0;var o=function(){function e(){var e=this;this.getVersion=function(t){var n=e.userAgent.match(t);if(n&&n.length<2)return-1;try{return parseInt(n[1])}catch(e){return-1}},this.getIEVersion=function(){var t=e.getVersion("Trident/([0-9]+)");return t>2?t+4:e.getVersion("MSIE ([0-9]+)")},this.getChromeVersion=function(){return e.getVersion("Chrome/([0-9]+)")},this.getFirefoxVersion=function(){return e.getVersion("Firefox/([0-9]+)")},this.getAndroidVersion=function(){return e.getVersion("Android ([0-9]+)")},this.getIOSVersion=function(){return e.getVersion("OS ([0-9]+)")},this.getOperaVersion=function(){var t=e.getVersion("OPR/([0-9]+)");return t>-1?t:e.getVersion("Opera/([0-9]+)")},this.getEdgeVersion=function(){return e.getVersion("Edge/([0-9]+)")},this.isIE9Lower=function(){return e.isIE&&e.getIEVersion()<=9},this.isIE10Lower=function(){return e.isIE&&e.getIEVersion()<=10},this.isIOS12Lower=function(){return e.isIOS&&!e.isIPadOSInDesktopSafari&&e.getIOSVersion()<13},this.isIOS13Lower=function(){return!e.isIPadOSInDesktopSafari&&(e.isIOS&&e.getIOSVersion()<14)},this.isIOS9Lower=function(){return e.isIOS&&!e.isIPadOSInDesktopSafari&&e.getIOSVersion()<10},this.isIOS15Over=function(){return e.isIOS&&!e.isIPadOSInDesktopSafari&&e.getIOSVersion()>14},this.isSupportVisualViewport=function(){return void 0!==window.visualViewport},this.appName=navigator.appName,this.userAgent=navigator.userAgent,this.isAndroid=this.userAgent.indexOf("Android")>-1,this.isIPadOSInDesktopSafari="MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,this.isiPhone=this.userAgent.indexOf("iPhone")>-1,this.isiPad=this.userAgent.indexOf("iPad")>-1||this.isIPadOSInDesktopSafari,this.isIOS=this.isiPad||this.isiPhone||this.userAgent.indexOf("iPod")>-1,this.isWindowMobile=this.userAgent.indexOf("IEMobile")>-1,this.isMobile=this.isAndroid||this.isIOS||this.isWindowMobile,this.isIPhoneX=/iphone/gi.test(window.navigator.userAgent)&&window.devicePixelRatio&&3===window.devicePixelRatio&&375===window.screen.width&&812===window.screen.height,this.isIPhoneXS=this.isIPhoneX,this.isIPhoneXSMax=/iphone/gi.test(window.navigator.userAgent)&&window.devicePixelRatio&&3===window.devicePixelRatio&&414===window.screen.width&&896===window.screen.height,this.isIPhoneXR=/iphone/gi.test(window.navigator.userAgent)&&window.devicePixelRatio&&2===window.devicePixelRatio&&414===window.screen.width&&896===window.screen.height,this.isMac=navigator.platform.toUpperCase().indexOf("MAC")>=0,this.isIE=!this.isMobile&&("Microsoft Internet Explorer"===this.appName||this.userAgent.indexOf("MSIE")>-1||this.userAgent.indexOf("Trident")>-1),this.isFirefox=!this.isMobile&&this.userAgent.indexOf("Firefox")>-1,this.isOpera=!this.isMobile&&(this.userAgent.indexOf("Opera")>-1||this.userAgent.indexOf("OPR")>-1),this.isEdge=!this.isMobile&&this.userAgent.indexOf("Edge")>-1,this.isChrome=!this.isMobile&&!this.isOpera&&!this.isEdge&&this.userAgent.indexOf("Chrome")>-1,this.isSafari=!this.isMobile&&!this.isChrome&&!this.isEdge&&this.userAgent.indexOf("Safari")>-1,this.isWebkit=this.userAgent.indexOf("AppleWebKit")>-1,this.isWhale=this.userAgent.indexOf("Whale")>-1,this.version=this.getBrowserVersion()}return e.prototype.getBrowserVersion=function(){if(this.isMobile){if(this.isAndroid)return this.getAndroidVersion();if(this.isIOS)return this.getIOSVersion();if(this.isWindowMobile)return this.getIEVersion()}else{if(this.isIE)return this.getIEVersion();if(this.isChrome)return this.getChromeVersion();if(this.isFirefox)return this.getFirefoxVersion();if(this.isSafari)return this.getIOSVersion();if(this.isOpera)return this.getOperaVersion();if(this.isEdge)return this.getEdgeVersion()}return-1},Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!1,configurable:!0}),Object.defineProperty(e,"_instanceForceCreate",{get:function(){return e._instance&&delete e._instance,e._instance=new e,e._instance},enumerable:!1,configurable:!0}),e}();t.Browser=o},,,,,,,function(e,t,n){"use strict";(function(e){var o=this&&this.__awaiter||function(t,n,o,i){return new(o||(o=e))((function(e,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}l((i=i.apply(t,n||[])).next())}))},i=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.annotScrollMove=t.MARKER_ACTION=t.ANNOT_STATUS_TYPE=void 0;var r,a,s=n(3),l=n(39),c=n(0),d=n(1),u=n(36),h=n(17),f=n(29),m=n(30),p=n(38),g=n(18),v=n(282),b=n(283),E=n(59),y=n(104),I=n(25),w=n(61),_=n(159),S=n(74);!function(e){e[e.ADD=0]="ADD",e[e.DELETE=1]="DELETE",e[e.MODIFY=2]="MODIFY"}(r=t.ANNOT_STATUS_TYPE||(t.ANNOT_STATUS_TYPE={})),function(e){e[e.ADD=0]="ADD",e[e.DELETE=1]="DELETE",e[e.MODIFY=2]="MODIFY"}(a=t.MARKER_ACTION||(t.MARKER_ACTION={})),t.annotScrollMove=function(e,t,n){var o,i,r,a,s,l,c,u=function(e,t,n,o){e.scrollIntoView?e.scrollIntoView(n):t.scrollTop=o},f=document.getElementById(e);if(f.scrollIntoViewIfNeeded){var m=document.getElementById("contents").style.top;d.Browser.instance.isIOS&&(document.getElementById("contents").style.top="0px"),f.scrollIntoViewIfNeeded(),d.Browser.instance.isIOS&&(document.getElementById("contents").style.top=m)}else{var p=h.default.getAnnotRatio(t,n),g="svg"===f.tagName,v={left:parseFloat(f.style.left)*(g?p:1),top:parseFloat(f.style.top)*(g?p:1),width:g?parseFloat(f.style.width):w.MemoIcon.width*p,height:g?parseFloat(f.style.height):w.MemoIcon.height*p},b=d.Browser.instance.isIOS?document.documentElement:document.getElementById("contents"),E=(o=b,i=f.getBoundingClientRect(),r=o.getBoundingClientRect(),a=i.left-r.left,s=i.right-r.left,l=i.top-r.top,c=i.bottom-r.top,{left:a<0&&s>0,right:a<o.clientWidth&&s>o.clientWidth,innerLR:a>=0&&s<=o.clientWidth,top:l<0&&c>0,bottom:l<o.clientHeight&&c>o.clientHeight,innerTB:l>=0&&c<=o.clientHeight});E.left?b.scrollLeft=v.left:E.right?b.scrollLeft=v.left+v.width-b.clientWidth:E.innerLR||(b.scrollLeft=v.left-b.offsetLeft-b.clientWidth/2+v.width/2);var y=I.Page.getPageScrollTop(t.toString())+v.top;if(E.top)u(f,b,E.top,y);else if(E.bottom){var _=y+v.height-b.clientHeight;u(f,b,E.bottom,_>0?_:0)}else E.innerTB||(b.scrollTop=y-b.offsetTop-b.clientHeight/2+v.height/2)}};var T=function(){function e(){var t=this;this.SELECTION_STROKE_WIDTH={DEFAULT:"5",MOBILE:"30"},this.MARKER_LAYER="marker-section",this.ANNOTATION_LAYER="annotationlayer",this.MARKER_UNDOREDO_WAITTIME=100,this.MARKER_UNDOREDO_MAX=20,this.undoStack=[],this.redoStack=[],this.isTempDisabledUndoRedo=!1,this.annotTabList=["page__input","select-arrow","header-tablist__input","export-pdf-btn","marker-btn","annotation-list-btn","marker-undo-btn","marker-redo-btn","marker-eraser-btn","marker-pencil-btn","marker-shapes-btn","marker-square-btn","marker-line-btn","marker-circle-btn","marker-arrowline-btn","marker-memo-btn","select-annotation-btn","marker-hand-scroll-btn","annotation-close"],this.funcgetAnnotationInfos=null,this.getAnnotationInfo=function(e,n){return h.default.getAnnotData(t.funcgetAnnotationInfos(),e,n)},this.createMarkerLayerDiv=function(e,n){for(var o=e;o<n;o++){var i=document.createElement("div");i.id="markerlayer"+o,i.className=c.Util.isCellSkin(t.docInfo)?"markerlayer markerlayer-cell marker-loading":"markerlayer marker-loading";var r=c.Util.isCellSkin(t.docInfo)?document.getElementById("cell-common"):document.getElementById("page"+o),a=r.offsetWidth,s=r.offsetHeight;i.style.cssText="width:"+a+"px;height:"+s+"px;";var l=document.createElement("section");l.className="marker-section",l.id="marker-section"+o,l.style.cssText="width:"+a+"px;height:"+s+"px;",i.appendChild(l);var d=document.createDocumentFragment();d.appendChild(i),document.getElementById("markerlayer"+o)||h.default.getPageOrSheetAreaId(c.Util.isCellSkin(t.docInfo),o).appendChild(d)}},this.createMarkerLayer=function(){if(!c.Util.isCellSkin(t.docInfo)||!p.ImageSheet.sheetLoadFail){var e=h.default.getAnnotLoadingRange(t.docInfo,0),n=e.startIdx,o=e.endIdx;t.createMarkerLayerDiv(n,o)}},this.appendMarkerScaleElm=function(n){var o=document.createElement("div");return o.className="marker-scale",e.isAnnotMode&&c.Util.addClass(o,"marker-scale--pointer"),(S.DrawingEraser.isActive||e.isScrollMode)&&c.Util.addClass(o,"disableEvent"),n.appendChild(o),t.setMarkerScale(o),o},this.setMarkerScale=function(e){var n=c.Util.getIdxFromElmId(c.Util.getParentElement(e).id,"annotationlayer"),o=h.default.getAnnotRatio(n,c.Util.isCellSkin(t.docInfo));e.style.cssText="-ms-transform:scale("+o+"); transform:scale("+o+"); "},this.marker=function(n){c.Util.isCellSkin(t.docInfo)&&p.ImageSheet.sheetLoadFail?e.isAnnotMode&&t.outAnnotMode():(c.Util.isCellSkin(t.docInfo)&&(t.createMarkerLayer(),t.appendMarkerScaleElm(document.getElementById("annotationlayer"+n.pageOrSheetIdx))),e.isDrawingMode?t.drawing.gotoDrawingMode():e.isAnnotMode,(c.Util.isCellSkin(t.docInfo)||n.annotationInfos)&&t.loadMarker(n.annotationInfos,n.pageOrSheetIdx),e.isMarkerLoading&&(e.isMarkerLoading=!1,t.removeMarkerLoadingState(),n.afterFunc&&n.afterFunc()))},this.render=function(e,n,o){void 0===o&&(o=null);var i=o||document.getElementById("annotationlayer"+e);!i.getElementsByClassName("marker-scale")[0]&&t.appendMarkerScaleElm(i),"memo"===h.getAnnotType(n.annot)?t.memo.renderMemo(e,n):(t.drawing.renderMarker(e,n,i),n.annot.contents&&n.annot.contents.text&&n.annot.contents.text.length&&t.memo.renderMemo(e,n))},this.modifyRendering=function(n){var o=n.annot,i=n.prevAnnot;if(!i||o.annot.l===i.annot.l&&o.annot.t===i.annot.t||(t.eventObserver.dragAnnotEnd.notify({page:n.page,annotId:o.id}),"memo"!==h.getAnnotType(o.annot))){var r=e.createtMarkerId(n.page,o.id),a=l.select("svg#"+r);t.drawing.getDrawingTool(h.getAnnotType(o.annot)).redrawAttr(a.node(),o);var d=o.annot.contents?s.extend(!0,{},o.annot.contents):{t:"",d:"",text:""};if("memo"!==h.getAnnotType(o.annot)&&0===d.text.length){var u=document.getElementById(w.MemoIcon.getMemoId(n.page,n.annot.id));c.Util.removeElem(u)}else d.text.length&&t.memo.renderMemo(n.page,o)}},this.deleteRendering=function(t,n){var o=e.createtMarkerId(t,n),i=document.getElementById(o);c.Util.removeElem(i);var r=document.getElementById(w.MemoIcon.getMemoId(t,n));c.Util.removeElem(r)},this._loadMarker=function(e,n){var o=e[n];if(o)for(var i=document.getElementById("annotationlayer"+n),r=0,a=o;r<a.length;r++){var s=a[r];t.render(n,s,i)}},this.loadMarker=function(n,o){for(var i in t._loadMarker(n,o),n){var r=parseInt(i);o!==r&&t._loadMarker(n,r)}e.isAnnotMode&&t.checkUndoRedoState()},this.removeMarkerLoadingState=function(){if(d.Browser.instance.isMobile){c.Util.removeClass(document.getElementById("marker-undo-btn__img"),"mobile-marker-loading"),c.Util.removeClass(document.getElementById("marker-redo-btn__img"),"mobile-marker-loading")}else s(".annotationlayer").removeClass("marker-loading")},this.fullScreen=function(e){e.isFullScreen?s(".markerlayer").addClass("markerlayer--presentation"):s(".markerlayer").removeClass("markerlayer--presentation")},this.resizeMarkerScale=function(){if(!c.Util.isCellSkin(t.docInfo)||!p.ImageSheet.sheetLoadFail){for(var e=0,n=Array.prototype.slice.call(document.getElementsByClassName("marker-scale"));e<n.length;e++){var o=n[e];t.setMarkerScale(o)}for(var i=0,r=Array.prototype.slice.call(document.getElementsByClassName("markerlayer"));i<r.length;i++){var a=r[i],s=c.Util.isCellSkin(t.docInfo)?document.getElementById("cell-common"):c.Util.getParentElement(a).getElementsByClassName("contents-page__img")[0],d=s.offsetWidth,u=s.offsetHeight,h=a.getElementsByClassName("marker-section")[0];a.style.display="none",h.style.display="none",a.style.width=d+"px",a.style.height=u+"px",h.style.width=d+"px",h.style.height=u+"px";var f=h.getElementsByClassName("tmp-marker-svg");0!==f.length&&(f[0].style.display="none",l.select(f[0]).style("width",s.offsetWidth+"px").style("height",s.offsetHeight+"px"),f[0].style.display=""),a.style.display="",h.style.display=""}t.memo&&t.memo.rePosition()}},this.replaceUndoRedoNewId=function(e,t,n){for(var o=0,i=n;o<i.length;o++){var r=i[o];r.annotId===e&&(r.annotId=t)}},this.addRenderAfterUndoRedo=function(e){t.render(e.page,e.annot)},this.addAfterUndoRedo=function(e,n){if(!0===e.rs.success){var o=n[n.length-1].annotId;t.replaceUndoRedoNewId(o,e.annot.id,t.redoStack),t.replaceUndoRedoNewId(o,e.annot.id,t.undoStack);var i=c.Util.isCellSkin(t.docInfo);t.movePageForUndoRedo(e.page,(function(){i&&(t.moveScrollSheet(e.annot.annot,e.page),document.getElementById("contents-area").style.visibility=""),t.addRenderAfterUndoRedo(e)}))}},this.addAfterSaveUndo=function(e){t.addAfterUndoRedo(e,t.redoStack)},this.addAfterSaveRedo=function(e){t.addAfterUndoRedo(e,t.undoStack)},this.deleteAfterSaveUndo=function(e){var n=c.Util.isCellSkin(t.docInfo);t.movePageForUndoRedo(e.page,(function(){n&&(document.getElementById("contents-area").style.visibility="")}))},this.updateMarkerStatus=function(e,n,o,i,r){void 0===i&&(i=null),void 0===r&&(r=null);var a={status:e,page:n,annot:{id:o,annot:i},afterFunc:r,isUndoRedo:!0};t.eventObserver.saveAnnotationServer.notify(a)},this.outAnnotMode=function(){document.getElementById("marker-btn").title=g.LocaleMessage.getMessage("icon_annotation_open"),document.getElementById("marker-btn__img").title=g.LocaleMessage.getMessage("icon_annotation_open"),t.drawing.outDrawingMode();for(var n=0,o=Array.prototype.slice.call(document.getElementsByClassName("marker-scale"));n<o.length;n++){var i=o[n];c.Util.removeClass(i,"marker-scale--pointer")}var r=document.getElementById("marker-btn__img");c.Util.removeClass(r,"marker-btn__img--on"),t.drawing.hideShapeMenu(),e.isAnnotMode=!1,t.checkUndoRedoState(),c.Util.isMobileMode()&&m.Thumbnail.THUMB_STATUS!==m.THUMB_FLAG.on&&(t.eventObserver.mobileThumb.notify(u.ShowActionType.HIDE3SEC),t.eventObserver.mobileHeader.notify(u.ShowActionType.HIDE3SEC)),e.isMarkerLoading&&(e.isMarkerLoading=!1,t.removeMarkerLoadingState()),t.eventObserver.annotMode.notify(e.isAnnotMode)},this.gotoAnnotMode=function(){if(!p.ImageSheet.sheetLoadFail){for(var n=0,o=Array.prototype.slice.call(document.getElementsByClassName("marker-scale"));n<o.length;n++){var i=o[n];c.Util.addClass(i,"marker-scale--pointer")}document.getElementById("marker-btn").title=g.LocaleMessage.getMessage("icon_annotation_close"),document.getElementById("marker-btn__img").title=g.LocaleMessage.getMessage("icon_annotation_close");var r=document.getElementById("marker-btn__img");c.Util.addClass(r,"marker-btn__img--on"),t.drawing.clickSelectBtn(),e.isAnnotMode=!0,t.eventObserver.mobileHeader.notify(u.ShowActionType.SHOW),t.eventObserver.annotMode.notify(e.isAnnotMode)}},this.markerBtnEventBind=function(){var n=function(){e.isAnnotMode?(t.outAnnotMode(),c.Util.clearTabIndexList(t.annotTabList),c.Util.setTabIndexList()):(t.gotoAnnotMode(),c.Util.clearTabIndexList(),c.Util.setTabIndexList(t.annotTabList))};c.Util.bindClickEvent(document.getElementById("marker-btn"),n),c.Util.bindClickEvent(document.getElementById("annotation-close"),n),c.Util.bindOnceClickEvent(document.getElementById("marker-btn"),(function(){t.annotList.loadAnnotList()}))},this.checkUndoRedoState=function(){var e=document.getElementById("marker-undo-btn__img"),n=document.getElementById("marker-redo-btn__img");0===t.undoStack.length?c.Util.hasClass(e,"marker-undo-btn__img--off")||c.Util.addClass(e,"marker-undo-btn__img--off"):c.Util.hasClass(e,"marker-undo-btn__img--off")&&c.Util.removeClass(e,"marker-undo-btn__img--off"),0===t.redoStack.length?c.Util.hasClass(n,"marker-redo-btn__img--off")||c.Util.addClass(n,"marker-redo-btn__img--off"):c.Util.hasClass(n,"marker-redo-btn__img--off")&&c.Util.removeClass(n,"marker-redo-btn__img--off")},this.initRedoStack=function(){t.redoStack=[]},this.modifyRenderAfterUndoRedo=function(e){t.modifyRendering(e)},this.modifyAfterSaveUndoRedo=function(e){if(!0===e.rs.success){var n=e,o=c.Util.isCellSkin(t.docInfo);t.movePageForUndoRedo(e.page,(function(){o&&(t.moveScrollSheet(e.annot.annot,e.page),document.getElementById("contents-area").style.visibility=""),t.modifyRenderAfterUndoRedo(n)}))}},this.undoMarkerStatus=function(e){var n=e.annotId,o=e.pageIdx;switch(e.status){case a.ADD:t.updateMarkerStatus(r.DELETE,o,n,e.markerInfo,t.deleteAfterSaveUndo);break;case a.MODIFY:t.updateMarkerStatus(r.MODIFY,o,n,e.prevMarkerInfo,t.modifyAfterSaveUndoRedo);break;case a.DELETE:t.updateMarkerStatus(r.ADD,o,n,e.markerInfo,t.addAfterSaveUndo)}},this.movePageForUndoRedo=function(e,n){var o=c.Util.isCellSkin(t.docInfo);e!==(c.Util.isCellSkin(t.docInfo)?t.docInfo.currentSheet:t.docInfo.currentPage)?o?(t.eventObserver.sheet.notify({sheetIdx:e,afterFunc:n}),document.getElementById("contents-area").style.visibility="hidden"):t.eventObserver.page.notify({pageNum:e,isScroll:!1,afterFunc:n}):n()},this.undoEvent=function(n){return o(t,void 0,void 0,(function(){var t;return i(this,(function(o){switch(o.label){case 0:return e.isMarkerLoading||(0===this.undoStack.length||this.isTempDisabledUndoRedo)?[2]:[4,this.eventObserver.unSelectAnnotation.notify()];case 1:return o.sent(),this.eventObserver.closeProp.notify(),e.isDrawingMode&&this.drawing.markerSelectEvent(),t=this.undoStack.pop(),this.redoStack.push(t),this.redoStack.length>this.MARKER_UNDOREDO_MAX&&this.redoStack.shift(),this.undoMarkerStatus(t),this.checkUndoRedoState(),n&&n.stopPropagation(),[2]}}))}))},this.redoMarkerStatus=function(e){var n=e.annotId,o=e.pageIdx;switch(e.status){case a.ADD:t.updateMarkerStatus(r.ADD,o,n,e.markerInfo,t.addAfterSaveRedo);break;case a.MODIFY:t.updateMarkerStatus(r.MODIFY,o,n,e.markerInfo,t.modifyAfterSaveUndoRedo);break;case a.DELETE:t.updateMarkerStatus(r.DELETE,o,n,e.markerInfo,t.deleteAfterSaveUndo)}},this.redoEvent=function(n){return o(t,void 0,void 0,(function(){var t;return i(this,(function(o){switch(o.label){case 0:return e.isMarkerLoading||(0===this.redoStack.length||this.isTempDisabledUndoRedo)?[2]:[4,this.eventObserver.unSelectAnnotation.notify()];case 1:return o.sent(),this.eventObserver.closeProp.notify(),t=this.redoStack[this.redoStack.length-1],e.isDrawingMode&&this.drawing.markerSelectEvent(),this.redoStack.pop(),this.pushUndoStack(t),this.redoMarkerStatus(t),this.checkUndoRedoState(),n&&n.stopPropagation(),[2]}}))}))},this.undoRedoEventBind=function(){c.Util.bindClickEvent(document.getElementById("marker-undo-btn"),t.undoEvent),c.Util.bindClickEvent(document.getElementById("marker-redo-btn"),t.redoEvent)},this.moveScrollSheet=function(e,n){var o=document.getElementById("contents").offsetHeight/2,i=document.getElementById("contents").offsetWidth/2,r=f.default.instance.getPageOrCurrentSheetRatio(n,c.Util.isCellSkin(t.docInfo)),a=parseInt(e.l)*r+parseInt(e.h)/2-i,s=parseInt(e.t)*r+parseInt(e.w)/2-o;t.eventObserver.afterUndoRedoSheet.notify({scrollLeft:a,scrollTop:s})},this.disablePinchZoom=function(e){e.touches.length>1&&e.preventDefault()},this.disablePinchZoomInContentAreaEventBind=function(){return document.getElementById("contents-area").addEventListener("touchstart",t.disablePinchZoom,!1)},this.ablePinchZoomInContentAreaEventBind=function(){return document.getElementById("contents-area").removeEventListener("touchstart",t.disablePinchZoom,!1)},this.eventBind=function(e){t.markerBtnEventBind(),t.undoRedoEventBind(),t.eventObserver=e,t.eventObserver.loadAnnotation.subscribe(t.marker),t.eventObserver.fullScreen.subscribe(t.fullScreen),t.eventObserver.undoMarker.subscribe(t.undoEvent),t.eventObserver.redoMarker.subscribe(t.redoEvent),!c.Util.isCellSkin(t.docInfo)&&t.docInfo.status.pageNum>_.ImagePage.initPageNum&&t.eventObserver.initLoadAfter.subscribe((function(){t.createMarkerLayerDiv(_.ImagePage.initPageNum,t.docInfo.status.pageNum)}))},this.getPageIdxWhenInAnnotationMode=function(){return t.docInfo.currentPage},this.pushUndoStack=function(e){t.undoStack.push(e),t.undoStack.length>t.MARKER_UNDOREDO_MAX&&t.undoStack.shift()},this.load=function(e,n,r,a){return o(t,void 0,void 0,(function(){var t,o,s,l;return i(this,(function(i){for(this.docInfo=e,this.funcgetAnnotationInfos=a,this.createMarkerLayer(),t=Array.prototype.slice.call(document.getElementsByClassName("marker-scale")),o=0,s=t;o<s.length;o++)l=s[o],this.setMarkerScale(l);return this.annotList=new y.default,this.annotList.load(e,n,a),this.annotationPopup=new v.default,this.annotationPopup.load(this.docInfo,n,a),this.memo=new b.default,this.memo.load(e,n,a),this.drawing=new E.default,this.drawing.load(e,n,this),this.eventBind(n),this.loadMarker(r,0),[2]}))}))}}return e.isAnnotMode=!1,e.isMarkerLoading=!1,e.isScrollMode=!1,e.isDrawingMode=!1,e.parseMarkerId=function(e){if(e){var t=e.split("-");return{pageOrSheetIdx:Number(t[1]),annotId:Number(t[2])}}},e.createtMarkerId=function(e,t){return"marker-"+e+"-"+t},e}();t.default=T}).call(this,n(5))},,,,,,,,,function(e,t,n){"use strict";(function(e,o){var i=this&&this.__awaiter||function(t,n,o,i){return new(o||(o=e))((function(e,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}l((i=i.apply(t,n||[])).next())}))},r=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.getAnnotType=void 0;var a=n(1),s=n(41),l=n(0),c=n(38),d=n(8),u=n(150),h=n(290),f=n(29),m=n(156);t.getAnnotType=function(e){var t,n,o=e.type;return"line"===e.type&&(o=!e.le||"none"===(null===(t=e.le)||void 0===t?void 0:t.head.toLocaleLowerCase())&&"none"===(null===(n=e.le)||void 0===n?void 0:n.tail.toLocaleLowerCase())?o:"arrowline"),o};var p=function(){function e(t){var n=this;this.docInfo=null,this.eventObserver=null,this.textObj={},this.localId=0,this.localServerIdMap=new o,this.LOADING_DIMMED_TIMEOUT=300,this.getAnnotationInfos=function(){return n.annotationInfos},this.pushAnnotInfoPerPage=function(e,t){n.annotationInfos[t]||(n.annotationInfos[t]=[]),n.annotationInfos[t].push(e)},this.modifyAnnotInfoPerPage=function(e,t){var o=n.annotationInfos[t].findIndex((function(t){return t.id===e.id}));n.annotationInfos[t][o]=e},this.deleteAnnotInfoPerPage=function(e,t){var o=n.annotationInfos[e].findIndex((function(e){return e.id===t}));o>-1&&n.annotationInfos[e].splice(o,1)},this.setEditedAnnotation=function(t){e.EDITED_ANNOTAION!==t&&(e.EDITED_ANNOTAION=t)},this.sortByDate=function(e){e.sort((function(e,t){var n=e.annot.contents&&e.annot.contents.d?e.annot.contents.d:"D:99999999999999",o=t.annot.contents&&t.annot.contents.d?t.annot.contents.d:"D:99999999999999";return parseInt(n.slice(2))-parseInt(o.slice(2))}))},this.checkRequireValidation=function(e){var t=[];for(var n in e){Boolean(e[n].annot.type&&e[n].annot.l&&e[n].annot.t&&e[n].annot.w&&e[n].annot.h)&&t.push(e[n])}return t},this.getAnnotationInfosAllPagesFromServer=function(e){return i(n,void 0,void 0,(function(){var t,n,o,i;return r(this,(function(r){switch(r.label){case 0:return[4,m.getAnnotList(e)];case 1:if((t=r.sent()).success)for(n in this.annotationInfos=t.data.pages,this.annotationInfos)for(o in this.annotationInfos[n]=this.checkRequireValidation(this.annotationInfos[n]),this.sortByDate(this.annotationInfos[n]),this.annotationInfos[n])i=this.annotationInfos[n][o].id,this.localServerIdMap.set(i,i),this.localId=Math.max(this.localId,i);return[2]}}))}))},this.getAnnotationInfosInCurPageRange=function(){var t=l.Util.isCellSkin(n.docInfo)?n.docInfo.currentSheet:n.docInfo.currentPage,o=e.getAnnotLoadingRange(n.docInfo,t),i=o.startIdx,r=l.Util.isCellSkin(n.docInfo)?i:o.endIdx-1,a={};for(var s in n.annotationInfos)if(!(i>Number(s))){if(r<Number(s))break;a[s]=n.annotationInfos[s]}return a},this.createAnnotationLayer=function(t){var o=document.getElementById("annotationlayer"+t);if(!o){var i=l.Util.isCellSkin(n.docInfo)?document.getElementById("cell-common"):document.getElementById("page"+t);if((o=document.createElement("div")).id="annotationlayer"+t,d.default.isAnnotMode&&t>e.DEFAULT_LOADING_CNT?o.className=l.Util.isCellSkin(n.docInfo)?"annotationlayer annotationlayer-cell marker-loading":"annotationlayer marker-loading":o.className=l.Util.isCellSkin(n.docInfo)?"annotationlayer annotationlayer-cell":"annotationlayer",!l.Util.isCellSkin(n.docInfo)){var r=document.getElementById("page"+t);l.Util.hasClass(r,"img-loading")&&l.Util.addClass(o,"annotationlayer--hide")}o.style.cssText="width:"+i.style.width+";height:"+i.style.height+";";var a=document.createDocumentFragment();a.appendChild(o),e.getPageOrSheetAreaId(l.Util.isCellSkin(n.docInfo),t).appendChild(a)}},this._setAnnotationLayer=function(e){var t=document.getElementById("annotationlayer"+e);if(t){var o=l.Util.isCellSkin(n.docInfo)?document.getElementById("cell-common"):document.getElementById("page"+e);n.resizeAnnotationLayer(t,o)}else n.createAnnotationLayer(e)},this.setAnnotationLayer=function(t,o){void 0===o&&(o=!1);var i=o?{startIdx:0,endIdx:n.docInfo.status.pageNum}:e.getAnnotLoadingRange(n.docInfo,t);n._setAnnotationLayer(t);for(var r=i.startIdx;r<i.endIdx;r++)t!==r&&n._setAnnotationLayer(r)},this.addMarkerLoadingState=function(){if(a.Browser.instance.isMobile){l.Util.hasClass(document.getElementById("marker-undo-btn__img"),"marker-redo-btn__img--off")||l.Util.addClass(document.getElementById("marker-undo-btn__img"),"mobile-marker-loading"),l.Util.hasClass(document.getElementById("marker-redo-btn__img"),"marker-redo-btn__img--off")||l.Util.addClass(document.getElementById("marker-redo-btn__img"),"mobile-marker-loading")}},this.focusPage=function(e){return i(n,void 0,void 0,(function(){var t;return r(this,(function(n){return this.setAnnotationLayer(e.pageNum),d.default.isAnnotMode&&(d.default.isMarkerLoading=!0,this.addMarkerLoadingState()),!l.Util.isUseSearch(this.docInfo)&&l.Util.removeContentsAreaTooltip()||this.eventObserver.searchText.notify(e.pageNum),l.Util.isUseAnnotation(this.docInfo)&&(t=this.getAnnotationInfosInCurPageRange(),this.eventObserver.loadAnnotation.notify({annotationInfos:t,pageOrSheetIdx:e.pageNum,afterFunc:e.afterFunc})),[2]}))}))},this.moveSheet=function(e){return i(n,void 0,void 0,(function(){var t,n;return r(this,(function(o){return t=l.Util.isUseAnnotation(this.docInfo),document.getElementById("annotationlayer"+e.sheetIdx)||(c.ImageSheet.sheetLoadFail||this.setAnnotationLayer(e.sheetIdx),d.default.isAnnotMode&&(d.default.isMarkerLoading=!0,this.addMarkerLoadingState()),t&&(n=this.getAnnotationInfosInCurPageRange(),this.eventObserver.loadAnnotation.notify({annotationInfos:n,pageOrSheetIdx:e.sheetIdx,afterFunc:e.afterFunc}))),[2]}))}))},this.rePosition=function(){for(var t=n.docInfo.currentPage,o=e.getAnnotLoadingRange(n.docInfo,t),i=o.startIdx;i<o.endIdx;i++){var r=document.getElementById("annotationlayer"+i);r&&(void 0!==n.textLayer&&l.Util.isUseSearch(n.docInfo)&&n.textLayer.updatePosition(r,i),void 0!==n.linkLayer&&n.linkLayer.updateLinkPosition(r,i))}},this.resizeAnnotationLayer=function(e,t){t.style.width!==e.style.width&&(e.style.width=""+t.style.width,e.style.height=""+t.style.height)},this.resizePage=function(){l.Util.isCellSkin(n.docInfo)?c.ImageSheet.sheetLoadFail||n.setAnnotationLayer(n.docInfo.currentSheet):(f.default.instance.init(n.docInfo.status.pageNum),n.setAnnotationLayer(n.docInfo.currentPage,!0)),n.rePosition(),l.Util.isUseAnnotation(n.docInfo)&&n.marker&&n.marker.resizeMarkerScale()},this.isActiveSaveAnnotation={0:!1,1:!1,2:!1},this.handleSaveAnnotation=function(e){n.isActiveSaveAnnotation[e.status]||(n.isActiveSaveAnnotation[e.status]=!0,l.Util.showLoadingDimmed(),e.status===d.ANNOT_STATUS_TYPE.ADD?n.addAnnotation(e):e.status===d.ANNOT_STATUS_TYPE.MODIFY?n.modifyAnnotation(e):e.status===d.ANNOT_STATUS_TYPE.DELETE&&n.deleteAnnotation(e),n.setEditedAnnotation(!1),l.Util.hideLoadingDimmed(),n.isActiveSaveAnnotation[e.status]=!1)},this.applyAnnot=function(t){var o=t.type,i=t.content,r=i.page,a=i.annot,s=null;if(0===o)n.marker.render(r,a),n.pushAnnotInfoPerPage(a,r),s=d.ANNOT_STATUS_TYPE.ADD;else if(1===o){var l=e.getAnnotData(n.getAnnotationInfos(),r,a.id);n.marker.modifyRendering({page:r,annot:a,prevAnnot:l}),n.modifyAnnotInfoPerPage(a,r),s=d.ANNOT_STATUS_TYPE.MODIFY}else{if(2!==o)return;n.marker.deleteRendering(r,a.id),n.deleteAnnotInfoPerPage(r,a.id),s=d.ANNOT_STATUS_TYPE.DELETE}var c={status:s,page:r,annot:a,afterFunc:null,isUndoRedo:!1};n.eventObserver.updateAnnotList.notify(c)},this.addAnnotation=function(e){var t=null;try{var o=m.addAnnot(n.docInfo,JSON.stringify({page:e.page,annot:e.annot.annot}));if(o.success){var i=e;n.localServerIdMap.delete(e.annot.id),n.localServerIdMap.set(++n.localId,o.data.id),i.annot.id=n.localId,n.pushAnnotInfoPerPage(i.annot,i.page),n.eventObserver.updateAnnotList.notify(i),e.isUndoRedo||(n.marker.pushUndoStack({status:d.MARKER_ACTION.ADD,pageIdx:i.page,annotId:i.annot.id,markerInfo:i.annot.annot}),n.marker.initRedoStack(),n.marker.checkUndoRedoState()),t={rs:o,page:i.page,annot:i.annot},l.Util.isDocslive()&&n.eventObserver.saveAnnotCb.notify({type:0,content:{page:i.page,annot:i.annot}})}else s.default.instance.annotSaveFailedDialog(),t={rs:o,page:e.page,annot:e.annot}}catch(n){s.default.instance.annotSaveExceptDialog(),t={rs:{success:!1},page:e.page,annot:e.annot}}return e.afterFunc&&e.afterFunc(t),t},this.deleteAnnotation=function(e){return i(n,void 0,void 0,(function(){var t,n,o;return r(this,(function(i){switch(i.label){case 0:t=null,i.label=1;case 1:return i.trys.push([1,3,,4]),n=this.localServerIdMap.get(e.annot.id),[4,m.removeAnnot(this.docInfo,n.toString())];case 2:return(o=i.sent()).success?(this.deleteAnnotInfoPerPage(e.page,e.annot.id),this.eventObserver.updateAnnotList.notify(e),e.isUndoRedo||(this.marker.pushUndoStack({status:d.MARKER_ACTION.DELETE,pageIdx:e.page,annotId:e.annot.id,markerInfo:e.annot.annot}),this.marker.initRedoStack(),this.marker.checkUndoRedoState()),this.marker.deleteRendering(e.page,e.annot.id),t={rs:o,page:e.page},l.Util.isDocslive()&&this.eventObserver.saveAnnotCb.notify({type:2,content:{page:e.page,annot:e.annot}})):(s.default.instance.annotFailedDialog(o.code),t={rs:o,page:e.page}),[3,4];case 3:return i.sent(),s.default.instance.annotSaveExceptDialog(),t={rs:{success:!1},page:e.page},[3,4];case 4:return e.afterFunc&&e.afterFunc(t),[2,t]}}))}))},this.modifyAnnotation=function(t){var o=null;try{var i=e.getAnnotData(n.getAnnotationInfos(),t.page,t.annot.id),r=n.localServerIdMap.get(t.annot.id),a=m.modifyAnnot(n.docInfo,r.toString(),JSON.stringify({annot:t.annot.annot}));a.success?(n.modifyAnnotInfoPerPage(t.annot,t.page),n.eventObserver.updateAnnotList.notify(t),t.isUndoRedo||(n.marker.pushUndoStack({status:d.MARKER_ACTION.MODIFY,pageIdx:t.page,annotId:t.annot.id,markerInfo:t.annot.annot,prevMarkerInfo:i.annot}),n.marker.initRedoStack(),n.marker.checkUndoRedoState()),o={rs:a,page:t.page,annot:t.annot,prevAnnot:i},l.Util.isDocslive()&&n.eventObserver.saveAnnotCb.notify({type:1,content:{page:t.page,annot:t.annot}})):(s.default.instance.annotFailedDialog(a.code),o={rs:a,page:t.page})}catch(e){s.default.instance.annotSaveExceptDialog(),o={rs:{success:!1},page:t.page}}return t.afterFunc&&t.afterFunc(o),o},this.isActiveExportPdf=!1,this.exportPdf=function(e){return i(n,void 0,void 0,(function(){var t,n,o=this;return r(this,(function(i){if(this.isActiveExportPdf)return[2];this.isActiveExportPdf=!0,l.Util.showLoadingDimmed();try{t=encodeURIComponent(e.title),n=m.getPdfDownUrl(this.docInfo,t,e.dispAnnot),window.open(n,"_blank")}catch(e){s.default.instance.confirmDialog("msg_export_pdf_failed")}return setTimeout((function(){l.Util.hideLoadingDimmed(),o.isActiveExportPdf=!1}),this.LOADING_DIMMED_TIMEOUT),[2]}))}))},this.isActiveSaveServerPdf=!1,this.saveServerPdf=function(){return i(n,void 0,void 0,(function(){var e,t=this;return r(this,(function(n){switch(n.label){case 0:if(this.isActiveSaveServerPdf)return[2];this.isActiveSaveServerPdf=!0,l.Util.showLoadingDimmed(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,m.uploadPdf(this.docInfo)];case 2:return(e=n.sent()).success?s.default.instance.confirmDialog("msg_saved"):s.default.instance.annotFailedDialog(e.code),[3,4];case 3:return n.sent(),s.default.instance.confirmDialog("msg_server_pdf_failed"),[3,4];case 4:return setTimeout((function(){l.Util.hideLoadingDimmed(),t.isActiveSaveServerPdf=!1}),this.LOADING_DIMMED_TIMEOUT),[2]}}))}))},this.editedAnnotation=function(){n.setEditedAnnotation(!0)},this.eventBind=function(e){n.eventObserver=e,n.eventObserver.page.subscribe(n.focusPage),n.eventObserver.sheet.subscribe(n.moveSheet),n.eventObserver.resizePage.subscribe(n.resizePage),l.Util.isUseAnnotation(n.docInfo)&&(n.eventObserver.editedAnnotation.subscribe(n.editedAnnotation),n.eventObserver.saveAnnotationServer.subscribe(n.handleSaveAnnotation),n.eventObserver.exportPdf.subscribe(n.exportPdf),n.eventObserver.saveServerPdf.subscribe(n.saveServerPdf),l.Util.isDocslive()&&n.eventObserver.applyAnnot.subscribe(n.applyAnnot))},this.load=function(t,o){return i(n,void 0,void 0,(function(){var n;return r(this,(function(i){switch(i.label){case 0:return this.docInfo=t,this.eventBind(o),l.Util.isCellSkin(this.docInfo)?(c.ImageSheet.sheetLoadFail||this.setAnnotationLayer(this.docInfo.currentSheet),[3,3]):[3,1];case 1:return f.default.instance.init(this.docInfo.status.pageNum),this.setAnnotationLayer(this.docInfo.currentPage),!(l.Util.isConvHtml(t)&&l.Util.isPDF(t)||l.Util.isConvImg(t))||!l.Util.isUseSearch(this.docInfo)&&l.Util.removeContentsAreaTooltip()?[3,3]:(this.textLayer=new u.TextLayer,[4,this.textLayer.load(t,this.textObj,o,this.createAnnotationLayer)]);case 2:i.sent(),i.label=3;case 3:return(l.Util.isConvHtml(t)&&l.Util.isPDF(t)||l.Util.isConvImg(t))&&(this.linkLayer=new h.LinkLayer,this.linkLayer.load(t,this.textObj,o)),l.Util.isUseAnnotation(this.docInfo)&&(e.SERVER_DPI=this.docInfo.dpi,e.DEFAULT_DPI=l.Util.isCellSkin(this.docInfo)?96:72,e.DPI_RATIO=e.SERVER_DPI/e.DEFAULT_DPI,n=this.getAnnotationInfosInCurPageRange(),this.marker=new d.default,this.marker.load(t,o,n,this.getAnnotationInfos)),[2]}}))}))},e.permission=t,t.login&&(e.loginId=t.profile.username)}return e.isFullScreen=!1,e.DEFAULT_LOADING_CNT=5,e.EDITED_ANNOTAION=!1,e.loginId=null,e.isAbleToEditAuthor=function(){return null===e.loginId},e.getSheetTileXml=function(e,t,n,o,a,s,c){return i(void 0,void 0,void 0,(function(){var i,d;return r(this,(function(r){switch(r.label){case 0:return e.status.imageConverting?(i=e.contextPath+"/thumbnailxml/"+l.Util.get4DigitFormatString(t+1)+"_d"+n+"_x"+o+"_y"+a+"_w"+s+"_h"+c+".xml",[4,l.Util.getThumbnailXml(i)]):[3,2];case 1:return[2,r.sent()];case 2:return d=e.contextPath+"/thumbnailxml/"+e.status.id+"/"+t+"?dpi="+n+"&x="+o+"&y="+a+"&w="+s+"&h="+c,l.Util.isUseAnnotation(e)&&(d+="&dispAnnot=2"),[4,l.Util.getThumbnailXml(d)];case 3:return[2,r.sent()]}}))}))},e.getXml=function(e,t,n){return i(void 0,void 0,void 0,(function(){var o;return r(this,(function(i){switch(i.label){case 0:return e.status.startPageNum&&(t+=e.status.startPageNum-1),l.Util.isConvHtml(e)?o=e.resultPath+"/"+e.status.fileName+".files/"+e.status.fileName+"_"+(t+1)+".xml":(o=e.contextPath+"/thumbnailxml/"+e.status.id+"/"+t+"?dpi="+n,l.Util.isUseAnnotation(e)&&(o+="&dispAnnot=2"),e.status.imageConverting&&(o=e.contextPath+"/thumbnailxml/"+t+".xml")),[4,l.Util.getThumbnailXml(o)];case 1:return[2,i.sent()]}}))}))},e.getPageOrSheetAreaId=function(e,t){return e?document.getElementById("sheet"):document.getElementById("page-area"+t)},e.parseTextId=function(e){if(e){var t=e.split("-");return{pageNum:Number(t[1]),idx:Number(t[2])}}},e.isVaildColorType=function(e){return 0===e.indexOf("type")&&l.Util.checkRange(Number(e.substring(4)),1,24)},e.isVaildThickness=function(e){return l.Util.checkRange(Number(e),1,16)},e.isVaildTransparency=function(e){return l.Util.checkRange(Number(e),0,1)},e.getAnnotInfoPerPage=function(e,t){return e[t]},e.thicknessPxToAnnotDPI=function(t){return parseFloat((t/e.DPI_RATIO).toFixed(2))},e.getAnnotRatio=function(t,n){return f.default.instance.getPageOrCurrentSheetRatio(t,n)*e.DPI_RATIO},e.getAnnotData=function(e,t,n){var o=e[t].findIndex((function(e){return e.id===n}));return o>-1?e[t][o]:null},e.getAnnotLoadingRange=function(t,n){var o=0,i=0;return l.Util.isCellSkin(t)?i=(o=t.currentSheet)+1:(o=n-e.DEFAULT_LOADING_CNT<0?0:n-e.DEFAULT_LOADING_CNT,i=n+e.DEFAULT_LOADING_CNT>t.status.pageNum?t.status.pageNum:n+e.DEFAULT_LOADING_CNT),{startIdx:o,endIdx:i}},e}();t.default=p}).call(this,n(5),n(49))},function(e,t,n){"use strict";(function(e){var o=this&&this.__awaiter||function(t,n,o,i){return new(o||(o=e))((function(e,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}l((i=i.apply(t,n||[])).next())}))},i=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.LocaleMessage=void 0;var r=n(0),a=function(){function e(){}return e.getMessage=function(t){return e.messages[t]},e.defaultLanguage="en",e.currentLanguage=null,e.messages=null,e.setLocale=function(t){return o(void 0,void 0,void 0,(function(){var n,o;return i(this,(function(i){switch(i.label){case 0:return n={ZH_CN:"zh",ZH:"zh",ZH_TW:"tw",TW:"tw",JA_JP:"ja",JA:"ja",EN_US:"en",EN:"en",KO:"ko",KO_KR:"ko"},e.currentLanguage=n[t.toUpperCase()]||e.defaultLanguage,o=e,[4,r.Util.getJson("locales/"+e.currentLanguage+".js?"+(new Date).getTime(),null,"js")];case 1:return o.messages=i.sent(),[2,e.currentLanguage]}}))}))},e.setLocaleMessage=function(){document.getElementById("mobile-download-btn").innerText=e.getMessage("msg_download"),document.getElementById("mobile-bgcolor-btn").innerText=e.getMessage("msg_light_backgroundcolor"),document.getElementById("mobile-sns-btn").innerText=e.getMessage("sns_title"),document.getElementById("mobile-info-btn").innerText=e.getMessage("info_menu"),document.getElementById("mobile-print-btn").innerText=e.getMessage("print_menu"),document.getElementById("total-page").setAttribute("data-content",""+e.getMessage("page_total")),document.getElementById("page__input").title=e.getMessage("current-page"),document.getElementById("page__input-label").innerText=e.getMessage("current-page"),document.getElementById("mobile-download-btn").title=e.getMessage("icon_download"),document.getElementById("mobile-bgcolor-btn").title=e.getMessage("icon_backgroundcolor"),document.getElementById("mobile-info-btn").title=e.getMessage("info_menu"),document.getElementById("mobile-print-btn").title=e.getMessage("print_menu"),document.getElementById("laser-btn").title=e.getMessage("laser-btn"),document.getElementById("laser-btn__img").title=e.getMessage("laser-btn"),document.getElementById("sns-btn").title=e.getMessage("sns_title"),document.getElementById("sns-btn__img").alt=e.getMessage("sns_title"),document.getElementById("info-btn").title=e.getMessage("info_menu"),document.getElementById("info-btn__img").alt=e.getMessage("info_menu"),document.getElementById("select-arrow").title=e.getMessage("icon_move_page_open"),document.getElementById("select-arrow-img").alt=e.getMessage("icon_move_page_open"),document.getElementById("header-tablist").title=e.getMessage("icon_move_sheet_open"),document.getElementById("header-tablist__input").alt=e.getMessage("icon_move_sheet_open"),document.getElementById("tabmore").title=e.getMessage("icon_move_sheet_open"),document.getElementById("tabmore__img").alt=e.getMessage("icon_move_sheet_open"),document.getElementById("sheet-prev").title=e.getMessage("icon_prev_sheet"),document.getElementById("sheet-prev__img").alt=e.getMessage("icon_prev_sheet"),document.getElementById("sheet-next").title=e.getMessage("icon_next_sheet"),document.getElementById("sheet-next__img").alt=e.getMessage("icon_next_sheet"),document.getElementById("thumbnailview-btn").title=e.getMessage("icon_thumbnail_open"),document.getElementById("thumbnail-btn").title=e.getMessage("icon_thumbnail_open"),document.getElementById("mobile-thumbnailbar").title=e.getMessage("icon_thumbnail_close"),document.getElementById("web-thumbnailbar").title=e.getMessage("icon_thumbnail_drag"),document.getElementById("download-btn").title=e.getMessage("icon_download"),document.getElementById("download-btn__img").alt=e.getMessage("icon_download"),document.getElementById("backgroundcolor-btn").title=e.getMessage("icon_backgroundcolor"),document.getElementById("backgroundcolor-btn__img").alt=e.getMessage("icon_backgroundcolor"),document.getElementById("print-btn").title=e.getMessage("print_menu"),document.getElementById("print-btn__img").alt=e.getMessage("print_menu"),document.getElementById("presentation-btn").title=e.getMessage("icon_fullscreen_open"),document.getElementById("desktop-fullscreen-btn__img").alt=e.getMessage("icon_fullscreen_open"),document.getElementById("fullscreen").title=e.getMessage("icon_fullscreen_open"),document.getElementById("mobile-fullscreen-btn__img").alt=e.getMessage("icon_fullscreen_open"),document.getElementById("more").title=e.getMessage("icon_more"),document.getElementById("more-btn").title=e.getMessage("icon_more"),document.getElementById("search-btn").title=e.getMessage("icon_search"),document.getElementById("search-btn__img").alt=e.getMessage("icon_search"),document.getElementById("marker-btn").title=e.getMessage("icon_annotation_open"),document.getElementById("marker-btn__img").title=e.getMessage("icon_annotation_open"),document.getElementById("server-pdf-btn").title=e.getMessage("msg_server_pdf"),document.getElementById("server-pdf-btn__img").title=e.getMessage("msg_server_pdf"),document.getElementById("mobile-server-pdf-btn").title=e.getMessage("msg_server_pdf"),document.getElementById("export-pdf-btn").title=e.getMessage("msg_export_pdf"),document.getElementById("export-pdf-btn__img").title=e.getMessage("msg_export_pdf"),document.getElementById("mobile-export-pdf-btn").title=e.getMessage("msg_export_pdf"),document.getElementById("mobile-sns-btn").title=e.getMessage("sns_title"),document.getElementById("page-hand-scroll").title=e.getMessage("icon_hand_scroll"),document.getElementById("page-prev").title=e.getMessage("icon_prev_page"),document.getElementById("page-next").title=e.getMessage("icon_next_page"),document.getElementById("page-zoomout").title=e.getMessage("icon_zoomout"),document.getElementById("page-zoomin").title=e.getMessage("icon_zoomin"),document.getElementById("page-originsize").title=e.getMessage("icon_originsize"),document.getElementById("page-pagewidthfit").title=e.getMessage("icon_pagewidthfit"),document.getElementById("page-pagefit").title=e.getMessage("icon_pagefit"),document.getElementById("page-rotate").title=e.getMessage("icon_rotate_clockwise"),document.getElementById("cell-hand-scroll").title=e.getMessage("icon_hand_scroll"),document.getElementById("cell-first").title=e.getMessage("icon_first_sheet"),document.getElementById("cell-prev").title=e.getMessage("icon_prev_sheet"),document.getElementById("cell-next").title=e.getMessage("icon_next_sheet"),document.getElementById("cell-end").title=e.getMessage("icon_end_sheet"),document.getElementById("cell-zoomout").title=e.getMessage("icon_zoomout"),document.getElementById("cell-zoomin").title=e.getMessage("icon_zoomin"),document.getElementById("fullscreen-close").title=e.getMessage("icon_fullscreen_close"),document.getElementById("fullscreen-close__img").alt=e.getMessage("icon_fullscreen_close"),document.getElementById("fullscreen-prev").title=e.getMessage("icon_prev"),document.getElementById("fullscreen-next").title=e.getMessage("icon_next"),document.getElementById("search__label").textContent=e.getMessage("input-searchword"),document.getElementById("search-prev").title=e.getMessage("icon_prev"),document.getElementById("search-next").title=e.getMessage("icon_next"),document.getElementById("search-close").title=e.getMessage("icon_close"),document.getElementById("marker-eraser-btn").title=e.getMessage("icon_eraser_marker"),document.getElementById("marker-eraser-btn__img").alt=e.getMessage("icon_eraser_marker"),document.getElementById("marker-undo-btn").title=e.getMessage("icon_marker_undo"),document.getElementById("marker-undo-btn__img").alt=e.getMessage("icon_marker_undo"),document.getElementById("marker-redo-btn").title=e.getMessage("icon_marker_redo"),document.getElementById("marker-redo-btn__img").alt=e.getMessage("icon_marker_redo"),document.getElementById("annotation-close").title=e.getMessage("icon_annotation_close"),document.getElementById("annotation-close-btn__img").alt=e.getMessage("icon_annotation_close"),document.getElementById("annotation-list-btn").title=e.getMessage("icon_annotation_list"),document.getElementById("annotation-list-btn__img").alt=e.getMessage("icon_annotation_list"),document.getElementById("select-annotation-btn").title=e.getMessage("icon_select_annotation"),document.getElementById("select-annotation-btn__img").alt=e.getMessage("icon_select_annotation"),document.getElementById("marker-hand-scroll-btn").title=e.getMessage("icon_hand_scroll"),document.getElementById("marker-hand-scroll-btn__img").alt=e.getMessage("icon_hand_scroll"),document.getElementById("marker-shapes-btn").title=e.getMessage("icon_marker_shapes"),document.getElementById("marker-shapes-btn__img").title=e.getMessage("icon_marker_shapes"),document.getElementById("marker-pencil-btn").title=e.getMessage("icon_marker_pen"),document.getElementById("marker-pencil-btn__img").title=e.getMessage("icon_marker_pen"),document.getElementById("marker-memo-btn").title=e.getMessage("icon_memo"),document.getElementById("marker-memo-btn__img").title=e.getMessage("icon_memo"),document.getElementById("marker-square-btn").title=e.getMessage("icon_marker_square"),document.getElementById("marker-square-btn__img").title=e.getMessage("icon_marker_square"),document.getElementById("marker-line-btn").title=e.getMessage("icon_marker_line"),document.getElementById("marker-line-btn__img").title=e.getMessage("icon_marker_line"),document.getElementById("marker-circle-btn").title=e.getMessage("icon_marker_circle"),document.getElementById("marker-circle-btn__img").title=e.getMessage("icon_marker_circle"),document.getElementById("marker-arrowline-btn").title=e.getMessage("icon_marker_arrowline"),document.getElementById("marker-arrowline-btn__img").title=e.getMessage("icon_marker_arrowline"),document.getElementById("thickness_title").innerText=e.getMessage("marker_thickness"),document.getElementById("thickness__input").title=e.getMessage("marker_thickness"),document.getElementById("transparency_title").innerText=e.getMessage("marker_transparency"),document.getElementById("transparency__input").title=e.getMessage("marker_transparency"),document.getElementById("color_border").title=e.getMessage("marker_border_color"),document.getElementById("color_fill").title=e.getMessage("marker_fill_color"),document.getElementById("color-type1-btn").title=e.getMessage("color-type1"),document.getElementById("color-type2-btn").title=e.getMessage("color-type2"),document.getElementById("color-type3-btn").title=e.getMessage("color-type3"),document.getElementById("color-type4-btn").title=e.getMessage("color-type4"),document.getElementById("color-type5-btn").title=e.getMessage("color-type5"),document.getElementById("color-type6-btn").title=e.getMessage("color-type6"),document.getElementById("color-type7-btn").title=e.getMessage("color-type7"),document.getElementById("color-type8-btn").title=e.getMessage("color-type8"),document.getElementById("color-type9-btn").title=e.getMessage("color-type9"),document.getElementById("color-type10-btn").title=e.getMessage("color-type10"),document.getElementById("color-type11-btn").title=e.getMessage("color-type11"),document.getElementById("color-type12-btn").title=e.getMessage("color-type12"),document.getElementById("color-type13-btn").title=e.getMessage("color-type13"),document.getElementById("color-type14-btn").title=e.getMessage("color-type14"),document.getElementById("color-type15-btn").title=e.getMessage("color-type15"),document.getElementById("color-type16-btn").title=e.getMessage("color-type16"),document.getElementById("color-type17-btn").title=e.getMessage("color-type17"),document.getElementById("color-type18-btn").title=e.getMessage("color-type18"),document.getElementById("color-type19-btn").title=e.getMessage("color-type19"),document.getElementById("color-type20-btn").title=e.getMessage("color-type20"),document.getElementById("color-type21-btn").title=e.getMessage("color-type21"),document.getElementById("color-type22-btn").title=e.getMessage("color-type22"),document.getElementById("color-type23-btn").title=e.getMessage("color-type23"),document.getElementById("color-type24-btn").title=e.getMessage("color-type24"),document.getElementById("annotation-popup__memo").title=e.getMessage("icon_memo"),document.getElementById("annotation-popup__prop").title=e.getMessage("icon_prop"),document.getElementById("annotation-popup__delete").title=e.getMessage("icon_delete"),document.getElementsByClassName("annotation-popup__img--memo")[0].alt=e.getMessage("icon_memo"),document.getElementById("annotation-memo__author-label").innerText=e.getMessage("input_author")+" : ",document.getElementById("annotation-memo__delete-btn").title=e.getMessage("icon_delete"),document.getElementById("annotation-memo__delete-btn").alt=e.getMessage("icon_delete"),document.getElementById("annotation-memo__content").title=e.getMessage("memo-content"),document.getElementById("annotation-memo__content-label").innerText=e.getMessage("memo-content"),document.getElementById("annotation-color-picker__color--yellow").title=e.getMessage("hightlight_color_yellow"),document.getElementById("annotation-color-picker__color--yellow").alt=e.getMessage("hightlight_color_yellow"),document.getElementById("annotation-color-picker__color--green").title=e.getMessage("hightlight_color_green"),document.getElementById("annotation-color-picker__color--green").alt=e.getMessage("hightlight_color_green"),document.getElementById("annotation-color-picker__color--blue").title=e.getMessage("hightlight_color_blue"),document.getElementById("annotation-color-picker__color--blue").alt=e.getMessage("hightlight_color_blue"),document.getElementById("annotation-color-picker__color--pink").title=e.getMessage("hightlight_color_pink"),document.getElementById("annotation-color-picker__color--pink").alt=e.getMessage("hightlight_hightlight_color_pinkcolor_pink"),document.getElementById("annotation-color-picker__color--transparent").title=e.getMessage("hightlight_color_none"),document.getElementById("annotation-color-picker__color--transparent").alt=e.getMessage("hightlight_color_none"),document.getElementById("fileExplorer-header__closeBtn").title=e.getMessage("fileExplore-close"),document.getElementById("fileExplorer-path__nextBtn").title=e.getMessage("fileExplore-next"),document.getElementById("fileExplorer-path__prevBtn").title=e.getMessage("fileExplore-prev"),document.getElementById("fileExplorer-fileTree-sort__div-fileName").title=e.getMessage("fileExplore-filename-sort"),document.getElementById("fileExplorer-fileTree-sort__div-fileType").title=e.getMessage("fileExplore-filetype-sort"),document.getElementById("fileExplorer-fileTree-sort__div-fileSize").title=e.getMessage("fileExplore-filesize-sort"),document.getElementsByClassName("fileExplorer-allCount__txt")[0].innerText=e.getMessage("fileExplorer-allCount__txt"),document.getElementsByClassName("fileExplorer-allCount__txt")[0].title=e.getMessage("fileExplorer-allCount__txt"),document.getElementById("fileExplorer-sort-fileName").title=e.getMessage("fileExplorer-sort-fileName"),document.getElementById("fileExplorer-sort-fileName").innerText=e.getMessage("fileExplorer-sort-fileName"),document.getElementById("fileExplorer-sort-fileType").title=e.getMessage("fileExplorer-sort-fileType"),document.getElementById("fileExplorer-sort-fileType").innerText=e.getMessage("fileExplorer-sort-fileType"),document.getElementById("fileExplorer-sort-fileSize").title=e.getMessage("fileExplorer-sort-fileSize"),document.getElementById("fileExplorer-sort-fileSize").innerText=e.getMessage("fileExplorer-sort-fileSize"),document.getElementsByClassName("fileExplorer-viewerBtn__txt")[0].title=e.getMessage("fileExplorer-viewerBtn__txt"),document.getElementsByClassName("fileExplorer-viewerBtn__txt")[0].innerText=e.getMessage("fileExplorer-viewerBtn__txt"),document.getElementById("annotation-list__search__input").placeholder=e.getMessage("annotation_list_search_input"),document.getElementById("annotation-list__search__input").title=e.getMessage("annotation_list_search_input"),document.getElementById("annotation-list__search_btn").title=e.getMessage("annotation_list_search_btn"),document.getElementById("annotation-list__search-result__txt").innerText=e.getMessage("annotation_list_search_result_txt"),document.getElementById("annotation-list__search__input-label").innerText=e.getMessage("annotation_list_search_input")},e}();t.LocaleMessage=a}).call(this,n(5))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.ScaleEvent=t.TransformOriginType=void 0;var o,i=n(3),r=n(1),a=n(0),s=n(30);!function(e){e[e.LEFT_TOP=0]="LEFT_TOP",e[e.LEFT_BOTTOM=1]="LEFT_BOTTOM",e[e.RIGHT_TOP=2]="RIGHT_TOP",e[e.RIGHT_BOTTOM=3]="RIGHT_BOTTOM"}(o=t.TransformOriginType||(t.TransformOriginType={}));var l=function(){function t(){}return t.getHeaderAreaHeightWithAnnot=function(){return this._commonHeaderHeight()+this._markerHeaderHeight},t.getDocumentWidth=function(){return this._documentWidth},t.setDocumentWidth=function(e){this._documentWidth=e},t.isAbsolutePosition=function(){return this._useAbsolute},t.getBrowserScale=function(){return r.Browser.instance.isIOS&&0!==this._documentWidth?a.Util.getInnerWidth()/this._documentWidth:a.Util.getInnerWidth()/document.getElementById("container").clientWidth},t.isDefaultBrowserScale=function(){return 1===this.getBrowserScale()},t.getBrowserScaleString=function(){return"scale("+this.getBrowserScale()+")"},t.isSupportScale=function(){return r.Browser.instance.isMobile&&r.Browser.instance.isSupportVisualViewport()},t.getElementStyleMap=function(t){for(var n=new e,o=0;o<t.style.length;o++){var i=t.style[o];n.set(i,t.style[i])}return n},t.getMergedCSSText=function(e,t){for(var n in t)""===t[n]?e.has(n)&&e.delete(n):e.set(n,t[n]);var o="";return e.forEach((function(e,t){""!==e&&(o+=t+":"+e+";")})),o},t.getScaleTransformToMap=function(e,t){var n=this.getBrowserScale(),o="",i="";1!=n&&(o="scale("+n+")",i=t);var r=this.getElementStyleMap(e);return r.set("transform",o),r.set("transform-origin",i),r.set("transform-origin-x",""),r.set("transform-origin-y",""),r.set("transform-origin-z",""),r},t.scale=function(e,t){void 0===t&&(t="left top");var n=this.getScaleTransformToMap(e,t);return e.style.cssText=this.getMergedCSSText(n,{}),this.getBrowserScale()},t.scaleWithPosition=function(e,t,n,i,r){void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=void 0);var s=this.getBrowserScale(),l=1!==s,c="",d="",u="";if(l){switch(t){case o.RIGHT_TOP:c=a.Util.getPageXOffset()+a.Util.getInnerWidth()-n+"px",d=a.Util.getPageYOffset()+i+"px";break;case o.RIGHT_BOTTOM:c=a.Util.getPageXOffset()+a.Util.getInnerWidth()-n+"px",d=a.Util.getPageYOffset()+a.Util.getInnerHeight()-i+"px";break;case o.LEFT_BOTTOM:c=a.Util.getPageXOffset()+n+"px",d=a.Util.getPageYOffset()+a.Util.getInnerHeight()-i+"px";break;case o.LEFT_TOP:default:c=a.Util.getPageXOffset()+n+"px",d=a.Util.getPageYOffset()+i+"px"}this._useAbsolute&&(u="absolute")}var h=this.getScaleTransformToMap(e,"left top"),f={left:c,top:d,position:u};return void 0!==r&&(f.height=l?r:""),e.style.cssText=this.getMergedCSSText(h,f),s},t.saveViewportStatus=function(){this._pageXOffset=a.Util.getPageXOffset(),this._pageYOffset=a.Util.getPageYOffset()},t.isChangePageOffset=function(){var e=r.Browser.instance.isIOS&&this._pageYOffset!==a.Util.getPageYOffset()&&1!==this.getBrowserScale();return this._pageXOffset!==a.Util.getPageXOffset()||e},t.disableScrollEvent=function(){t.disableiOSFocusScale(),t._stopScroll=!0},t.enableScrollEvent=function(){t.enableiOSFocusScale(),t._stopScroll=!1},t.isStopScroll=function(){return this._stopScroll},t.disableiOSFocusScale=function(){var e=document.querySelector('meta[name="viewport"]');this._viewportContent=e.getAttribute("content"),e.setAttribute("content",this._viewportContent+", user-scalable=no")},t.enableiOSFocusScale=function(){""!==this._viewportContent&&(document.querySelector('meta[name="viewport"]').setAttribute("content",this._viewportContent),this._viewportContent="")},t._doScaleSkinThumbnail=function(){var e=this.getBrowserScale(),n=0;if(s.Thumbnail.THUMB_STATUS===s.THUMB_FLAG.on){var r=document.getElementById("thumbnail"),l=parseInt(i(".wrap__thumbnail").css("padding-top")),c=a.Util.getInnerHeight()/e-l;0===this._firstThumbnailWidth&&(this._firstThumbnailWidth=parseInt(i(".wrap__thumbnail").css("width"))),n=this._firstThumbnailWidth*e,t.scaleWithPosition(r,o.LEFT_TOP,0,0,c+"px")}var d=document.getElementById("thumbnailbar"),u=parseInt(i(".wrap__thumbnailbar").css("width")),h=(a.Util.getInnerHeight()-u*e)/2;t.scaleWithPosition(d,o.LEFT_TOP,n,h)},t.doScaleSkinContents=function(e){var t=document.getElementById("contents");if(a.Util.hasClass(t,"wrap__contents--marker-mode")){var n=this.getHeaderAreaHeightWithAnnot()*e;t.style.top=n+"px"}else if(!r.Browser.instance.isMobile||a.Util.headerAutoHide()||a.Util.isFullScreen())t.style.top="";else{n=this._commonHeaderHeight()*e;t.style.top=n+"px"}},t._doScaleSkinThumbsAndAnnot=function(e,n){if(t._doScaleSkinThumbnail(),e){var r=document.getElementById("marker-header");t.scaleWithPosition(r,o.LEFT_TOP,0,this._markerHeaderHeight*n);var s=document.getElementById("annotation-list"),l=parseInt(i(".wrap__annotation-list").css("padding-top")),c=a.Util.getInnerHeight()/n-l;t.scaleWithPosition(s,o.LEFT_TOP,0,0,c+"px")}},t.doScale=function(e,n){if(e&&r.Browser.instance.isIOS){var i=!0;if(r.Browser.instance.isSupportVisualViewport()&&(i=window.visualViewport.scale<1),this._firstShowHeader&&i)return void(this._firstShowHeader=!1)}if(!(this._firstShowHeader&&(this._firstShowHeader=!1,t.isDefaultBrowserScale())||a.Util.hasClass(this.objHeader,"wrap__header--hide")&&a.Util.headerAutoHide())){var s=t.scaleWithPosition(this.objHeader,o.LEFT_TOP,0,0);s<1?(this.objHeader.style.outlineStyle="solid",this.objHeader.style.outlineColor="#000000",this.objHeader.style.outlineWidth=s<.3?"medium":"thin"):(this.objHeader.style.outlineStyle="",this.objHeader.style.outlineColor="",this.objHeader.style.outlineWidth=""),this.doScaleSkinContents(s),e||this._doScaleSkinThumbsAndAnnot(n,s)}},t._stopScroll=!1,t._firstShowHeader=!0,t._viewportContent="",t._pageXOffset=0,t._pageYOffset=0,t._firstThumbnailWidth=0,t._documentWidth=0,t._useAbsolute=r.Browser.instance.isIOS&&r.Browser.instance.getIOSVersion()>=11||r.Browser.instance.isIPadOSInDesktopSafari,t._commonHeaderHeight=function(){return parseInt(i(".wrap__header").css("height"))},t._markerHeaderHeight=parseInt(i(".marker-header").css("height")),t.objHeader=document.getElementById("header"),t}();t.ScaleEvent=l}).call(this,n(49))},,,,,,function(e,t,n){"use strict";(function(e){var o=this&&this.__awaiter||function(t,n,o,i){return new(o||(o=e))((function(e,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}l((i=i.apply(t,n||[])).next())}))},i=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Page=t.VIEW_MODE=t.RESIZE_TYPE=void 0;var r,a,s=n(1),l=n(35),c=n(36),d=n(0),u=n(3),h=n(30),f=n(51),m=n(158),p=n(8),g=n(19),v=n(106);!function(e){e[e.PageFit=0]="PageFit",e[e.PageWidthFit=1]="PageWidthFit",e[e.PageZoom=2]="PageZoom",e[e.SlidePageFit=3]="SlidePageFit"}(r=t.RESIZE_TYPE||(t.RESIZE_TYPE={})),function(e){e[e.desktop=0]="desktop",e[e.mobile=1]="mobile"}(a=t.VIEW_MODE||(t.VIEW_MODE={}));var b=function(){function e(){var t=this;this.starterLen=20,this.eventObserver=null,this.docInfo=null,this.transparentImg="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",this.SCROLL_TIMEOUT=80,this.lastTop=null,this.curZoomFactor=l.DetectZoom.getRatio(),this.scrollContentAreaEl=s.Browser.instance.isIOS?u(document):u("#contents"),this.DEFAULT_LOADING_CNT=5,this.isChangingZoomRatio=!1,this.TIMEOUT_WAIT_FOR_ZOOM_RATIO_INIT=1e3,this.changeZoomRatioTimer=null,this.preScrollHeight=0,this.viewMode=a.desktop,this.isOrientationchange=!1,this.getDefaultLoadingCnt=function(){return t.DEFAULT_LOADING_CNT},this.setDefaultLoadingCnt=function(e){t.DEFAULT_LOADING_CNT=e},this.updatePageFocus=function(){if(s.Browser.instance.isIE10Lower()&&t.isChangingZoomRatio)t.eventObserver.page.notify({pageNum:t.docInfo.currentPage,isScroll:!1});else{var n=t.docInfo.status.pageNum;if(s.Browser.instance.isIOS)for(var o=t.scrollContentAreaEl.scrollTop()+e.containerTop(),i=0;i<n;++i){if(o<u("#page-area"+i).offset().top+e.CURRENT_SIZE[i].height/2)return void t.eventObserver.page.notify({pageNum:i,isScroll:!0})}else for(i=0;i<n;++i){var r=e.CURRENT_SIZE[i].height,a=document.getElementById("page-area"+i).getBoundingClientRect().top+r;if(a>0&&a-r/2>e.containerTop())return void(i!==t.docInfo.currentPage&&t.eventObserver.page.notify({pageNum:i,isScroll:!0}))}t.eventObserver.page.notify({pageNum:t.docInfo.status.pageNum-1,isScroll:!0})}},this.scrollEventBind=function(){var n;t.scrollContentAreaEl.on("scroll",(function(o){if(t.preScrollHeight==document.getElementById("container").scrollHeight){if(!(d.Util.isMobileMode()&&t.viewMode!==a.mobile||!d.Util.isMobileMode()&&t.viewMode!==a.desktop)&&(clearTimeout(n),v.MobileEvent.virtualKeyboardMode!==v.VK_MODE.changeStatus)){var i=document.getElementById("contents").offsetHeight;if(null===t.lastTop){var l=document.getElementById("contents").scrollHeight;t.lastTop=l-i}var c=window.innerHeight,u=i!==c?t.lastTop-(c-i):t.lastTop;if(!(null!==t.lastTop&&t.scrollContentAreaEl.scrollTop()>=u-5)){var h=d.Util.isFullScreen()||!!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement);return!h||h&&(!s.Browser.instance.isMobile&&100!==t.curZoomFactor||s.Browser.instance.isMobile&&e.RESIZE_OBJ.type!=r.PageFit)?(n=setTimeout(t.updatePageFocus,t.SCROLL_TIMEOUT),void t.eventObserver.scroll.notify(o.originalEvent)):void 0}var f=document.getElementById("page-area"+t.docInfo.currentPage).getBoundingClientRect().top;n=f>0?setTimeout((function(){t.eventObserver.page.notify({pageNum:t.docInfo.currentPage,isScroll:!0})}),t.SCROLL_TIMEOUT):setTimeout((function(){t.eventObserver.page.notify({pageNum:t.docInfo.status.pageNum-1,isScroll:!0})}),t.SCROLL_TIMEOUT)}}else t.preScrollHeight=document.getElementById("container").scrollHeight}))},this.focusPage=function(n){s.Browser.instance.isMobile&&t.docInfo.currentPage!==n.pageNum&&u("#thumb-area"+t.docInfo.currentPage).addClass("thumb--nohover"),t.docInfo.currentPage=n.pageNum,t.loadPageImg(t.docInfo.currentPage),t.eventObserver.moveBtn.notify(),!0!==n.isScroll&&(t.scrollContentAreaEl.scrollTop(e.getPageScrollTop(n.pageNum)),e.updateFullscreenCloseBtn(t.docInfo),n.callback&&n.callback())},this.checkMoveControlbar=function(){0===t.docInfo.currentPage?(u("#page-prev").removeClass("controlbar--enable"),u("#page-prev").removeClass("controlbar-prev--hover"),u("#page-prev").prop("disabled",!0),u("#mobile-controlbar-prev__btn").addClass("mobile-controlbar-floating__btn--disabled"),u("#mobile-controlbar-prev__btn").prop("disabled",!0)):(u("#page-prev").addClass("controlbar--enable"),u("#page-prev").prop("disabled",!1),u("#mobile-controlbar-prev__btn").removeClass("mobile-controlbar-floating__btn--disabled"),u("#mobile-controlbar-prev__btn").prop("disabled",!1)),t.docInfo.currentPage===t.docInfo.status.pageNum-1?(u("#page-next").removeClass("controlbar--enable"),u("#page-next").removeClass("controlbar-next--hover"),u("#page-next").prop("disabled",!0),u("#mobile-controlbar-next__btn").addClass("mobile-controlbar-floating__btn--disabled"),u("#mobile-controlbar-next__btn").prop("disabled",!0)):(u("#page-next").addClass("controlbar--enable"),u("#page-next").prop("disabled",!1),u("#mobile-controlbar-next__btn").removeClass("mobile-controlbar-floating__btn--disabled"),u("#mobile-controlbar-next__btn").prop("disabled",!1))},this.moveBackPage=function(){0!==t.docInfo.currentPage&&t.eventObserver.page.notify({pageNum:t.docInfo.currentPage-1,isScroll:!1})},this.moveNextPage=function(){t.docInfo.currentPage!==t.docInfo.status.pageNum-1&&t.eventObserver.page.notify({pageNum:t.docInfo.currentPage+1,isScroll:!1})},this.orientationchange=function(){return o(t,void 0,void 0,(function(){return i(this,(function(e){return d.Util.isBrowserFullScreen()&&this._resizePage(),this.isOrientationchange=!0,[2]}))}))},this.resizeWindow=function(){return o(t,void 0,void 0,(function(){var e,t=this;return i(this,(function(n){switch(n.label){case 0:return m.Presentation.doingFullScreenCloseEvent?[2]:(d.Util.isMobileMode()&&this.viewMode!==a.mobile?this.viewMode=a.mobile:d.Util.isMobileMode()||this.viewMode===a.desktop||(this.viewMode=a.desktop),clearTimeout(this.changeZoomRatioTimer),this.lastTop=null,e=l.DetectZoom.getRatio(),this.isChangingZoomRatio=!1,this.curZoomFactor!==e&&(this.curZoomFactor=e,this.isChangingZoomRatio=!0,this.changeZoomRatioTimer=setTimeout((function(){t.isChangingZoomRatio=!1}),this.TIMEOUT_WAIT_FOR_ZOOM_RATIO_INIT)),document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?(this._innerResizeWindow(),this.eventObserver.resizePage.notify(),[2]):s.Browser.instance.isIOS?[4,this._resizePageForIOS()]:[3,2]);case 1:return n.sent(),[3,3];case 2:this._resizePage(this.isOrientationchange||!this.isChangingZoomRatio),this.isOrientationchange=!1,n.label=3;case 3:return this.checkResizeControlBar(),this.eventObserver.resizePage.notify(),[2]}}))}))},this._resizePage=function(n){return void 0===n&&(n=!0),o(t,void 0,void 0,(function(){return i(this,(function(t){return this._innerResizeWindow(),n&&v.MobileEvent.virtualKeyboardMode!==v.VK_MODE.changeStatus&&this.scrollContentAreaEl.scrollTop(e.getPageScrollTop(this.docInfo.currentPage)),[2]}))}))},this._resizePageForIOS=function(){return o(t,void 0,void 0,(function(){var t,n=this;return i(this,(function(o){switch(o.label){case 0:return d.Util.isFullScreen()&&(document.getElementById("fullscreen-close").style.top=""),t=this.docInfo.currentPage,u("#wrap__index").css("height",""),[4,d.Util.syncTimer((function(){if(u("#thumbnail").height()>u("#wrap__index").height()){s.Browser.instance.isiPad?u("#wrap__index").css("height",0===window.orientation?768*screen.height/screen.width-85:768*screen.width/screen.height-85):u("#wrap__index").css("height",0===window.orientation?screen.height-85:screen.width)}u("#contents-area").css("visibility","hidden"),u("#wrap__index").css("visibility","hidden"),u("#page__input").css("color","#333333"),n.scrollContentAreaEl.scrollTop(e.getPageScrollTop("0"))}),500)];case 1:return o.sent(),[4,d.Util.syncTimer((function(){return n._innerResizeWindow()}),100)];case 2:return o.sent(),this.eventObserver.page.notify({pageNum:t,isScroll:!1}),[4,d.Util.syncTimer((function(){u("#contents-area").css("visibility",""),u("#wrap__index").css("visibility",""),u("#page__input").css("color","")}),100)];case 3:return o.sent(),[2]}}))}))},this.presentationResize=function(){t.pageResizeAction.resizePage(t.preResizeObj.percent,t.getRotateMap()),t.scrollContentAreaEl.scrollTop(e.getPageScrollTop(t.docInfo.currentPage))},this.setFullscreeniOSEvent=function(e){s.Browser.instance.isiPhone&&s.Browser.instance.isIOS15Over()&&e("resize",t.presentationResize)},this.notSupportFullscreenIN=function(){return o(t,void 0,void 0,(function(){var t,n=this;return i(this,(function(o){switch(o.label){case 0:return t=this.docInfo.currentPage,s.Browser.instance.isIOS?[4,d.Util.syncTimer((function(){return n.pageResizeAction.resizePage(n.preResizeObj.percent,n.getRotateMap())}),200)]:[3,3];case 1:return o.sent(),this.eventObserver.resizePage.notify(),this.scrollContentAreaEl.scrollTop(e.getPageScrollTop(t)),[4,d.Util.syncTimer((function(){return u("#contents-area").css("visibility","")}),100)];case 2:return o.sent(),this.setFullscreeniOSEvent(window.addEventListener),[3,4];case 3:this.pageResizeAction.resizePage(this.preResizeObj.percent,this.getRotateMap()),this.eventObserver.resizePage.notify(),this.scrollContentAreaEl.scrollTop(e.getPageScrollTop(t)),o.label=4;case 4:return e.updateFullscreenCloseBtn(this.docInfo),this.checkResizeControlBar(),this.lastTop=null,[2]}}))}))},this.notSupportFullscreenOUT=function(){return o(t,void 0,void 0,(function(){var t,n=this;return i(this,(function(o){switch(o.label){case 0:return t=this.docInfo.currentPage,s.Browser.instance.isIOS?[4,d.Util.syncTimer((function(){n.pageResizeAction.resizePage(n.preResizeObj.percent,n.getRotateMap()),n.eventObserver.resizePage.notify()}),e.IOS_WAITTIME_FOR_PREVENT_RELOAD)]:[3,3];case 1:return o.sent(),this.scrollContentAreaEl.scrollTop(e.getPageScrollTop(t)),[4,d.Util.syncTimer((function(){u("#contents-area").css("visibility",""),u("#wrap__index").css("visibility",""),u("#page__input").css("color","")}),100)];case 2:return o.sent(),this.setFullscreeniOSEvent(window.removeEventListener),[3,4];case 3:this.pageResizeAction.resizePage(this.preResizeObj.percent,this.getRotateMap()),this.eventObserver.resizePage.notify(),this.scrollContentAreaEl.scrollTop(e.getPageScrollTop(t)),o.label=4;case 4:return this.checkResizeControlBar(),this.lastTop=null,[2]}}))}))},this.annotMode=function(e){return o(t,void 0,void 0,(function(){return i(this,(function(t){return e?u("#contents").addClass("wrap__contents--marker-mode"):u("#contents").removeClass("wrap__contents--marker-mode"),this.scrollEventBind(),[2]}))}))},this.fullScreen=function(n){return o(t,void 0,void 0,(function(){var t;return i(this,(function(o){return"cell"===n.skinType||(t=f.Head.bgColorMode===f.BGCOLOR_MODE.lightScreen?"img-loading-bright":"img-loading",n.isFullScreen?(u(document.body).addClass("wrap__contents--page-fullscreen"),u("#contents").addClass("wrap__contents--page-fullscreen"),s.Browser.instance.isIOS&&(u("#contents-area").css("visibility","hidden"),this.scrollContentAreaEl.scrollTop(e.getPageScrollTop("0"))),u("#container").addClass("wrap__container--presentation"),u("#contents").addClass("wrap__contents--presentation"),u("#thumbnailbar").addClass("wrap__thumbnailbar--presentation"),u("."+t).addClass("img-loading-black"),n.isSupport||u(".wrap__header").addClass("wrap__header--presentation"),this.setFitAction(),n.isSupport||(u(".wrap__header").addClass("wrap__header--presentation"),!n.error&&this.notSupportFullscreenIN())):(u(document.body).removeClass("wrap__contents--page-fullscreen"),d.Util.isFullScreen()&&(s.Browser.instance.isIOS&&(u("#contents-area").css("visibility","hidden"),u("#wrap__index").css("visibility","hidden"),u("#page__input").css("color","#333333"),this.scrollContentAreaEl.scrollTop(e.getPageScrollTop("0"))),this.eventObserver.bgColor.notify(f.Head.bgColorMode),u("#container").removeClass("wrap__container--presentation"),u("#contents").removeClass("wrap__contents--presentation"),u("#thumbnailbar").removeClass("wrap__thumbnailbar--presentation"),u("#contents").removeClass("wrap__contents--page-fullscreen"),u(".contents-page").removeClass("img-loading-black"),u(".contents-page__img").removeClass("img-loading-black"),u(".contents-page > img").removeAttr("style"),u(".contents-page > iframe").removeAttr("style"),e.RESIZE_OBJ=this.preResizeObj,this.pageResizeAction=this.prePageAction,n.isSupport||(u(".wrap__header").removeClass("wrap__header--presentation"),this.notSupportFullscreenOUT()),d.Util.isMobileMode()&&h.Thumbnail.THUMB_STATUS===h.THUMB_FLAG.off&&(this.eventObserver.mobileHeader.notify(c.ShowActionType.HIDE3SEC),this.eventObserver.mobileThumb.notify(c.ShowActionType.HIDE3SEC)),this.fullscreenAfterEvent()))),[2]}))}))},this.mouseEventBind=function(){u("#contents-area").on("click",(function(){s.Browser.instance.isMobile||d.Util.isFullScreen()||window.setTimeout((function(){t.toggleMobileHeaderAndThumb()}),0)}))},this.toggleMobileHeaderAndThumb=function(){if(d.Util.isMobileMode()&&!p.default.isAnnotMode){var e=(d.Util.isConvImg(t.docInfo)||d.Util.isHtmlImageSkin(t.docInfo))&&"none"===u(".wrap__thumbnailbar").css("display");"none"===u(".wrap__header").css("display")||e?h.Thumbnail.isOn()?(t.eventObserver.mobileThumb.notify(c.ShowActionType.SHOW),t.eventObserver.mobileHeader.notify(c.ShowActionType.SHOW)):(t.eventObserver.mobileThumb.notify(c.ShowActionType.HIDE3SEC),t.eventObserver.mobileHeader.notify(c.ShowActionType.HIDE3SEC)):(t.eventObserver.mobileThumb.notify(c.ShowActionType.HIDE),t.eventObserver.mobileHeader.notify(c.ShowActionType.HIDE))}},this.singleTap=function(){t.toggleMobileHeaderAndThumb()}}return e.getPageScrollTop=function(t){var n=document.getElementById("page-area"+t);return null===n?0:n.offsetTop-(s.Browser.instance.isIOS?e.containerTop():0)},e.prototype.load=function(e,t){this.docInfo=e,this.preScrollHeight=document.getElementById("container").scrollHeight,s.Browser.instance.isIOS&&(u("#wrap").addClass("wrap--ios"),u("#container").addClass("wrap__container--ios"),u("#contents").addClass("wrap__contents--ios"),u("#thumbnail").addClass("wrap__thumbnail--ios"),u("#annotation-list").addClass("wrap__annotation-list--ios"),u("#footer").addClass("wrap__footer--ios")),d.Util.isMobileMode()&&(this.viewMode=a.mobile)},e.RESIZE_OBJ={type:r.PageFit,percent:0},e.ORIGIN_SIZE=[],e.CURRENT_SIZE=[],e.isOutFullscreen=!1,e.IOS_WAITTIME_FOR_PREVENT_RELOAD=700,e.containerTop=function(){return parseInt(u("#container").css("top"))},e.fullscreenBtnWidth=parseInt(u(".fullscreen-close").css("width")),e.updateFullscreenCloseBtn=function(t){if(d.Util.isFullScreen()&&s.Browser.instance.isMobile&&!d.Util.needDocumentFitCss(t)){var n=document.getElementById("fullscreen-close"),o=g.ScaleEvent.getBrowserScale();if(1===o&&s.Browser.instance.isIOS&&!s.Browser.instance.isiPad&&s.Browser.instance.getIOSVersion()>=11&&s.Browser.instance.getIOSVersion()<=13){var i=document.getElementById("page-area0").getBoundingClientRect().top;return n.style.position="absolute",void(n.style.top=Math.abs(i)+"px")}g.ScaleEvent.scaleWithPosition(n,g.TransformOriginType.RIGHT_TOP,e.fullscreenBtnWidth*o,0)}},e}();t.Page=b}).call(this,n(5))},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(25),r=n(38),a=n(0),s=function(){function e(){this.ratioList=null,this.getPageOrCurrentSheetRatio=function(t,n){return n?r.ImageSheet.resizePercent/100:e.instance.getRatio(t)}}return Object.defineProperty(e,"instance",{get:function(){return o||(o=new e),o},enumerable:!1,configurable:!0}),e.prototype.init=function(e){this.ratioList=a.Util.fill(new Array(e),Number.MIN_SAFE_INTEGER)},e.prototype.getRatio=function(e){return this.ratioList?(this.ratioList[e]===Number.MIN_SAFE_INTEGER&&(this.ratioList[e]=parseFloat(document.getElementById("page"+e).style.width)/i.Page.ORIGIN_SIZE[e].origin_width),this.ratioList[e]):(a.Util.printConsoleLog("Cannot get ratio"),1)},e.prototype.getDocumentRatio=function(e,t){return t?100/r.ImageSheet.resizePercent:i.Page.ORIGIN_SIZE[e].width/parseFloat(document.getElementById("page"+e).style.width)},e}();t.default=s},function(e,t,n){"use strict";(function(e){var o=this&&this.__awaiter||function(t,n,o,i){return new(o||(o=e))((function(e,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}l((i=i.apply(t,n||[])).next())}))},i=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Thumbnail=t.THUMB_FLAG=void 0;var r,a=n(1),s=n(18),l=n(35),c=n(0),d=n(3),u=n(262),h=n(263),f=n(8);!function(e){e[e.on=0]="on",e[e.off=1]="off"}(r=t.THUMB_FLAG||(t.THUMB_FLAG={}));var m=function(){function e(){var t=this;this.eventObserver=null,this.docInfo=null,this.transparentImg="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",this.THUMB_SIZE=[],this.initThumbNum=21,this.isWindowCSS=window.CSS&&window.CSS.supports&&window.CSS.supports("--page-width","0"),this.protectedObj={timer:this.thumbBtnTimer},this.thumbnailMobile=new u.ThumbnailMobile(this.protectedObj),this.thumbnailDesktop=new h.ThumbnailDesktop(this.protectedObj),this.webThumbnailResize=function(){var n=!1;d("#web-thumbnailbar").on(a.Browser.instance.isMobile?"touchstart":"mousedown",(function(){n=!0,d("#container").css("pointer-events","none")}));var o=0;d(document).on(a.Browser.instance.isMobile?"touchmove":"mousemove",(function(e){if(n){var o=a.Browser.instance.isMobile?e.changedTouches[0].pageX:e.clientX,i=o>0?o:0;i<520&&(t.jqContents.css("left",i),d(".wrap__thumbnail").css({width:i,"overflow-y":"scroll"}),t.jqThumbnailBar.css("left",i),t.eventObserver.resizeContents.notify())}else d("#container").css("pointer-events","auto")})).on(a.Browser.instance.isMobile?"touchend":"mouseup",(function(i){if(d("#container").css("pointer-events","auto"),n){n=!1;var l=a.Browser.instance.isMobile?i.changedTouches[0].pageX:i.clientX,c=l-o;c>0&&l<100||c<0&&l<160||0===o&&0===l?(o=0,e.THUMB_STATUS=r.off,t.thumbnailDesktop.hideThumb(),t.eventObserver.resizeContents.notify()):(t.loadThumbImg(t.getThumbIndex()),o=l>520?520:l,c>0&&l>=100?o=385<o&&o<=520?520:231<o&&o<=385?355:200:c<0&&l<520&&(o=320<=l&&l<480?355:160<=l&&l<320?200:520),t.jqContents.css("left",o),d(".wrap__thumbnail").css({width:o,"overflow-y":"scroll"}),t.jqThumbnailBar.css("left",o),e.THUMB_STATUS=r.on,t.focusPage({pageNum:t.docInfo.currentPage}),t.jqThumbnailButton.addClass("thumbnail-btn__img--on"),document.getElementById("thumbnailview-btn").title=s.LocaleMessage.getMessage("icon_thumbnail_close"),document.getElementById("thumbnail-btn").title=s.LocaleMessage.getMessage("icon_thumbnail_close")),t.eventObserver.resizeWindow.notify()}}))},this.loadThumbImg=function(e){return o(t,void 0,void 0,(function(){var t,n,o,r,a,s,c,d,u;return i(this,(function(i){for(3,t=this.jqThumbnail.height(),n=this.docInfo.status.pageNum,0==(o=document.getElementById("thumb-content"+e).clientHeight)&&(o=this._getThumbHeight(this.THUMB_SIZE[e])),r=Math.ceil(t/o),document.getElementById("thumbnail").clientWidth>200&&(r+=20),a=e-3<0?0:e-3,s=e+r+1,c=l.DetectZoom?l.DetectZoom.getRatio():100,s!==n&&c<100&&(s+=Math.ceil(n*(c/100))),s=s>n||s===n-1?n:s,d=a;d<s;d++)(u=document.getElementById("thumb"+d)).src!==this.transparentImg&&""!==u.src||(this.onLoadImg(u,d),this.loadThumbDelay(d));return[2]}))}))},this.thumbMovePage=function(e){var n=parseInt(e.currentTarget.getAttribute("data-index"));if(t.docInfo.currentPage!==n){var o=t.docInfo.status.pageNum;isNaN(n)||n<0||n>o||t.eventObserver.page.notify({pageNum:n,isScroll:!1})}},this.toggleEvent=function(){if(!f.default.isAnnotMode&&(t.thumbnailActions.toggleAction(),e.THUMB_STATUS===r.on)){var n=t.docInfo.currentPage;t.focusPage({pageNum:n}),t.setThumbnailAreaHeightForIOS()}},this.focusPage=function(n){if(e.THUMB_STATUS!=r.off){d("#thumb-area"+n.pageNum).removeClass("thumb--nohover"),d(".thumb__div").removeClass("thumb__focus");var o=document.getElementById("thumbnail").clientHeight-d(".wrap__header").height(),i=document.getElementById("thumb-content"+n.pageNum).clientHeight,a=document.getElementById("thumbnail").scrollTop,s=d("#thumb-area"+n.pageNum).parent().position().top-d("#thumb-area0").parent().position().top;(a>s||s+i>=a+o)&&(document.getElementById("thumbnail").scrollTop=document.getElementById("thumb-content"+n.pageNum).offsetTop-o/4),d("#thumb-area"+n.pageNum).addClass("thumb__focus"),t.loadThumbImg(t.docInfo.currentPage)}},this.resizeWindow=function(){c.Util.isFullScreen()||(c.Util.isMobileMode()&&t.thumbnailActions===t.thumbnailDesktop?(t.thumbnailActions.initThumb(),t.thumbnailActions=t.thumbnailMobile,t.thumbnailActions.changeMode(t.docInfo.currentPage),t.isWindowCSS||t.thumbSizeResize(0,t.docInfo.status.pageNum,t.docInfo.currentPage)):c.Util.isMobileMode()||t.thumbnailActions!==t.thumbnailMobile||(t.thumbnailActions.initThumb(),t.thumbnailActions=t.thumbnailDesktop,t.thumbnailActions.changeMode(t.docInfo.currentPage),t.isWindowCSS||t.thumbSizeResize(0,t.docInfo.status.pageNum,t.docInfo.currentPage)))},this.fullScreen=function(e){"cell"!==e.skinType&&(e.isFullScreen?(t.jqThumbnail.addClass("wrap__thumbnail--presentation"),t.jqThumbnailBar.addClass("wrap__thumbnailbar--presentation")):(t.jqThumbnail.removeClass("wrap__thumbnail--presentation"),t.jqThumbnailBar.removeClass("wrap__thumbnailbar--presentation")))},this.annotMode=function(e){e?(t.jqThumbnail.addClass("wrap__thumbnail--marker-mode"),t.jqThumbnailBar.addClass("wrap__thumbnailbar--marker-mode")):(t.jqThumbnail.removeClass("wrap__thumbnail--marker-mode"),t.jqThumbnailBar.removeClass("wrap__thumbnailbar--marker-mode"))},this.getThumbIndex=function(){var e=document.getElementById("wrap__index").clientHeight,n=document.getElementById("thumbnail").scrollTop;return n<0&&(!l.DetectZoom||100===l.DetectZoom.getRatio())?t.docInfo.currentPage:Math.floor(t.docInfo.status.pageNum/(e/n))},this.scrollEventBind=function(){var n;d("#thumbnail").on("scroll",(function(){clearTimeout(n),n=window.setTimeout((function(){if(e.THUMB_STATUS!=r.off){var n=t.getThumbIndex();t.loadThumbImg(n)}}),50)}))},this.thumbSizeResize=function(e,n,o){var i=t.docInfo.currentPage+t.initThumbNum;if(i=i>t.docInfo.status.pageNum?t.docInfo.status.pageNum:i,null!==o)for(var r=o=o-5<0?0:o-5;r<i;r++)t._thumbSizeRepeat(t.THUMB_SIZE[r],r);setTimeout((function(){for(var r=e;r<n;r++)null!=o?(r<o||r>=i)&&t._thumbSizeRepeat(t.THUMB_SIZE[r],r):t._thumbSizeRepeat(t.THUMB_SIZE[r],r)}),100)},this._thumbSizeRepeat=function(e,n){var o=t._getThumbHeight(e);document.getElementById("thumb"+n).style.height=o+"px"},this._getThumbHeight=function(e){return e&&void 0!==e.mobileHeight?!0===c.Util.isMobileMode()?e.mobileHeight:e.desktopHeight:!0===c.Util.isMobileMode()?t.THUMB_SIZE[0].mobileHeight:t.THUMB_SIZE[0].desktopHeight},this.setThumbnailAreaHeightForIOS=function(){if(a.Browser.instance.isIOS&&0!==d("#wrap__index").height()&&d("#thumbnail").height()>d("#wrap__index").height()){a.Browser.instance.isiPad?d("#wrap__index").css("height",0===window.orientation?768*screen.height/screen.width-85:768*screen.width/screen.height-85):d("#wrap__index").css("height",0===window.orientation?screen.height-85:screen.width)}},this.jqThumbnail=d("#thumbnail"),this.jqThumbnailButton=d("#thumbnail-btn"),this.jqThumbnailBar=d("#thumbnailbar"),this.jqContents=d("#contents")}return e.THUMB_STATUS=r.off,e.isOn=function(){return e.THUMB_STATUS===r.on},e}();t.Thumbnail=m}).call(this,n(5))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DrawingTool=t.getViewBox=t.getAnnotSizeWithStroke=t.getPathList=t.getAnnotInfoPathText=t.getAnnotInfoStrokeWidth=t.getAnnotInfoAlpha=t.getAnnotInfoInnerColor=t.getAnnotInfoColor=void 0;var o=n(39),i=n(0);function r(e,t){return void 0===t&&(t=2),{left:e.left.toFixed(t),top:e.top.toFixed(t),width:e.width.toFixed(t),height:e.height.toFixed(t)}}function a(e,t,n,o){return r({left:parseFloat(e)-s.VIEWBOX_RANGE,top:parseFloat(t)-s.VIEWBOX_RANGE,width:parseFloat(n)+2*s.VIEWBOX_RANGE,height:parseFloat(o)+2*s.VIEWBOX_RANGE},0)}t.getAnnotInfoColor=function(e){return e||"none"},t.getAnnotInfoInnerColor=function(e){return e||"none"},t.getAnnotInfoAlpha=function(e){return e||"1.0"},t.getAnnotInfoStrokeWidth=function(e){return e&&e.w?e.w:"1.0"},t.getAnnotInfoPathText=function(e){return e&&e.text?e.text:""},t.getPathList=function(e){for(var t=e,n=t.indexOf("M"),o=[];n>-1;){var i=t.indexOf("M",n+1),r=i>-1?t.substring(n,i):t.substring(n);o.push(r),n=i}return o},t.getAnnotSizeWithStroke=function(e,t,n,o,i){return r({left:e-i/2,top:t-i/2,width:n+i,height:o+i})},t.getViewBox=a;var s=function(){function e(t,n,r,s,l){var c=this;this.marker=null,this.eventObserver=null,this.newSvg=null,this.curMarkerSection=null,this.attr=null,this.funcSaveDrawing=null,this.isCell=!1,this.redrawAttr=function(e,t){},this.redrawAttrEl=function(e,t,n){},this.getMarkerStyleAttr=function(e,t){return null},this.moveMarker=function(e,t,n){return""},this.createAnnotBaseInfo=function(e,t,n,o,r){var a=c.getAnnotSize(o,r);return{id:e,annot:{type:"",l:a.left,t:a.top,w:a.width,h:a.height,c:t,a:n,contents:{d:i.Util.getTimestamp(),t:c.attr.author,text:""}}}},this.markerDrawBind=function(e,t,n){"mousedown"===o.event.type?e.on("mousemove",(function(){n()})):"pointerdown"===o.event.type?e.on("pointermove",(function(){n()})):e.on("touchmove",(function(){o.event.preventDefault();var i=parseFloat(e.node().style.width),r=parseFloat(e.node().style.height),a=o.touches(this)[0];a[0]<0||a[0]>i||a[1]<0||a[1]>r?t(e,this):n()}))},this.getSvgElement=function(){return c.newSvg&&c.newSvg.node()},this.getCurMarkerSection=function(){return c.curMarkerSection},this.clear=function(){c.newSvg=null,c.curMarkerSection=null},this.setSvgStyle=function(e,t){var n=e.style;for(var o in t){var i=t[o];if("color"===o){var r="#"+i;n.stroke=r}else"innerColor"===o?n.fill="none"===i?i:"#"+i:"thickness"===o?n["stroke-width"]=i:"transparency"===o&&(n.opacity=i)}},this.redrawMoveAttr=function(t,n){var i=a(n.annot.l,n.annot.t,n.annot.w,n.annot.h),r=i.left,s=i.top,l=i.width,c=i.height;o.select(t).attr("viewBox",r+" "+s+" "+l+" "+c).style("left",parseFloat(n.annot.l)-e.VIEWBOX_RANGE+"px").style("top",parseFloat(n.annot.t)-e.VIEWBOX_RANGE+"px").style("width",l+"px").style("height",c+"px")},this.eventBindClear=function(e){e.on("touchstart",null),e.on("touchend",null),e.on("mousedown",null),e.on("mouseup",null),e.on("mouseleave",null),e.on("click",null),e.on("pointerdown",null),e.on("pointerup",null),e.on("pointermove",null)},this.eventBind=function(e){c.eventBindClear(e),c.markerEventBind(e,(function(){return i.Util.isSmallScreen()?i.Util.hasClass(document.getElementById("prop-submenu"),"hide"):(c.eventObserver.closeProp.notify(),!0)}))},this.marker=t,this.eventObserver=n,this.attr=r,this.funcSaveDrawing=s,this.isCell=l}return e.prototype.setAnnotInfoAuthor=function(e){e.annot.contents||(e.annot.contents={d:"",t:"",text:""}),e.annot.contents.t=this.attr.author.trim()},e.prototype.setAnnotInfoText=function(e,t){e.annot.contents||(e.annot.contents={d:"",t:"",text:""}),e.annot.contents.text=t},e.prototype.setAnnotInfoTop=function(e,t){e.annot.t=t},e.prototype.setAnnotInfoLeft=function(e,t){e.annot.l=t},e.prototype.setAnnotInfoWidth=function(e,t){e.annot.w=t},e.prototype.setAnnotInfoHeight=function(e,t){e.annot.h=t},e.prototype.setAnnotInfoColor=function(e,t){e.annot.c=t},e.prototype.setAnnotInfoAlpha=function(e,t){e.annot.a=""+t},e.prototype.setAnnotInfoInnerColor=function(e,t){},e.prototype.modifyAnnotInfo=function(e,t){for(var n in t){var o=t[n];switch(n){case"color":this.setAnnotInfoColor(e,o);break;case"innerColor":this.setAnnotInfoInnerColor(e,o);break;case"thickness":this.setAnnotInfoThickness(e,o);break;case"transparency":this.setAnnotInfoAlpha(e,o);break;case"author":this.setAnnotInfoAuthor(e);break;case"text":this.setAnnotInfoText(e,o);break;case"left":this.setAnnotInfoLeft(e,o);break;case"top":this.setAnnotInfoTop(e,o);break;case"width":this.setAnnotInfoWidth(e,o);break;case"height":this.setAnnotInfoHeight(e,o);break;case"path":this.setAnnotInfoPath(e,o)}}return e},e.VIEWBOX_RANGE=5,e.hexToRgb=function(e){if(!/^[0-9a-fA-F]+$/.test(e)||6!==e.length)return"transparent";e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,o){return t+t+n+n+o+o}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?"rgb("+parseInt(t[1],16)+","+parseInt(t[2],16)+","+parseInt(t[3],16)+")":"#"+e},e}();t.DrawingTool=s},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DetectZoom=void 0;var o=n(0),i=n(1),r=function(){function e(){}return e.getRatio=function(){return this._zoom||(this._zoom=this.detectFunction()),Math.round(100*this._zoom())},e.detectFunction=function(){return window.devicePixelRatio?function(){if(i.Browser.instance.isIE||i.Browser.instance.isFirefox||i.Browser.instance.isEdge)return window.devicePixelRatio;try{var e=Math.abs(window.top.outerWidth-window.top.innerWidth),t=window.top.innerWidth,n=e>=1&&e<=20||!window.top.outerWidth?t:window.top.outerWidth;return Math.round((o.Util.isFullScreen()?screen.width:n)/t*100)/100}catch(e){return 1}}:isNaN(screen.logicalXDPI)||isNaN(screen.systemXDPI)?window.navigator.msMaxTouchPoints?function(){return Math.round(document.documentElement.offsetHeight/window.innerHeight*100)/100}:window.chrome&&!(window.opera||navigator.userAgent.indexOf(" Opera")>=0)?function(){try{return Math.round(window.top.outerWidth/window.top.innerWidth*100)/100}catch(e){return 1}}:Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0?function(){try{return Math.round(window.top.outerWidth/window.top.innerWidth*100)/100}catch(e){return 1}}:"orientation"in window&&"webkitRequestAnimationFrame"in window?function(){var e="string"==typeof window.orientation?Number.parseInt(window.orientation):window.orientation;return(90===Math.abs(e)?screen.height:screen.width)/window.innerWidth}:"webkitRequestAnimationFrame"in window?function(){var e=function(e){return e.replace(/;/g," !important;")},t=document.createElement("div");t.innerHTML="1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>0",t.setAttribute("style",e("font: 100px/1em sans-serif; -webkit-text-size-adjust: none; text-size-adjust: none; height: auto; width: 1em; padding: 0; overflow: visible;"));var n=document.createElement("div");n.setAttribute("style",e("width:0; height:0; overflow:hidden; visibility:hidden; position: absolute;")),n.appendChild(t),document.body.appendChild(n);var o=1e3/t.clientHeight;return o=Math.round(100*o)/100,document.body.removeChild(n),o}:navigator.userAgent.indexOf("Opera")>=0?function(){try{return Math.round(window.top.outerWidth/window.top.innerWidth*100)/100}catch(e){return 1}}:function(){return 1}:function(){return Math.round(screen.deviceXDPI/screen.logicalXDPI*100)/100}},e}();t.DetectZoom=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShowActionType=void 0,function(e){e.SHOW="show",e.HIDE="hide",e.HIDE3SEC="hide3sec"}(t.ShowActionType||(t.ShowActionType={}))},,function(e,t,n){"use strict";(function(e){var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__awaiter||function(t,n,o,i){return new(o||(o=e))((function(e,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}l((i=i.apply(t,n||[])).next())}))},a=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ImageSheet=void 0;var s=n(35),l=n(1),c=n(0),d=n(76),u=n(36),h=n(3),f=n(51),m=n(157),p=n(41),g=n(278),v=n(105),b=function(t){function n(){var o=null!==t&&t.apply(this,arguments)||this;return o.dpiSheet=null,o.sheetWidth=null,o.sheetHeight=null,o.cellPageRE=/cellpage(\d+)_(\d+)/,o.maxBrowserTop=-1,o.transparentImg="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",o.scrollContentAreaEl=l.Browser.instance.isIOS?h(document):h("#contents"),o.scrollSheetEventBind=function(){var e;o.scrollContentAreaEl.on("scroll",(function(t){clearTimeout(e),e=setTimeout(o.scrollEvent,100),o.eventObserver.scroll.notify(t.originalEvent)}))},o.getTitle=function(t,n,i){return r(o,void 0,e,(function(){var e,o;return a(this,(function(r){switch(r.label){case 0:"",e=t+"/title/"+n+"/"+i,this.docInfo.status.imageConverting&&(e=t+"/title/"+i+".js"),o=null,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,c.Util.ajaxCall(e,"GET")];case 2:return o=r.sent(),[3,4];case 3:return r.sent(),c.Util.printConsoleLog("fail to call api - /title"),[3,4];case 4:return[2,o.replace(/^\s+|\s+$/g,"")]}}))}))},o.getDimension=function(t,i,s){return r(o,void 0,e,(function(){var e,o,r,l,d,u,h;return a(this,(function(a){switch(a.label){case 0:i=void 0!==i?i:0,e=t.contextPath+"/dimension/"+t.status.id+"/"+i+"?dpi="+s,this.docInfo.status.imageConverting&&(e=t.contextPath+"/dimension/"+i+".js?dpi="+s),r=null,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,c.Util.getJson(e)];case 2:if(r=a.sent(),l=r[0].w,d=r[0].h,0===l&&0===d)throw Error;return window.localSynap.config.sheetMinSize&&window.localSynap.config.sheetMinSize.length>1&&(u=window.localSynap.config.sheetMinSize[0],h=window.localSynap.config.sheetMinSize[1],u>l&&(l=u>1e5?1e5:u),h>d&&(d=h>1e5?1e5:h)),o={sheetWidth:l,sheetHeight:d},[3,4];case 3:return a.sent(),n.sheetLoadFail=!0,this.showSheetAlertDialog(),[2,o];case 4:return n.sheetLoadFail=!1,[2,o]}}))}))},o.showSheetAlertDialog=function(){c.Util.printConsoleLog("fail to call api - /dimension");var e=p.default.instance.getSheetPageOpenFailedDialogEl(),t=document.createElement("div");t.id="sheet-dialog",t.className="sheet-dialog",t.appendChild(e),document.getElementById("contents").appendChild(t)},o.removeSheetAlertDialog=function(){var e=document.getElementById("sheet-dialog"),t=document.getElementById("contents");e&&t.removeChild(e)},o.scrollEvent=function(){o.addContentDiv(),o.resizeCell(n.resizePercent)},o.createContentDiv=function(e){o.sheetWidth=e.sheetWidth,o.sheetHeight=e.sheetHeight,n.maxCol=Math.ceil(o.sheetWidth/n.defaultCellWidth),n.maxRow=Math.ceil(o.sheetHeight/n.defaultCellHeight);var t=n.defaultCellHeight*(n.resizePercent/100),i=n.defaultCellHeight*(n.resizePercent/100),r='<div id="sheet" name="sheet">\n\t\t\t\t\t\t<div id="cell-common" name="cell-common" class="cell-common" style="width:'+o.sheetWidth+"px;height:"+o.sheetHeight+'px;"></div>\n\t\t\t\t\t</div>';document.getElementById("contents-area").innerHTML=r;var a=(n.maxRow-1)*t;if(o.maxBrowserTop<a&&-1!==o.maxBrowserTop){var s=o.maxBrowserTop/n.defaultCellHeight,l=n.maxCol-1,c=o.sheetCreateElement(s,l,o.maxBrowserTop,l*i,n.lastRowHeight,n.lastColWidth);h("#cell-common").append(c)}o.addContentDiv()},o.changeDPIContentDiv=function(e){return r(o,void 0,void 0,(function(){var t,o,i,r,s,l,d,u,h,f,m,p,g;return a(this,(function(a){switch(a.label){case 0:return c.Util.isServer(this.docInfo)?this.dpiSheet.hasHighDPIRatio()?[3,2]:[4,this.getDimension(this.docInfo,this.docInfo.currentSheet,this.dpiSheet.HIGH_DPI)]:[2];case 1:if(t=a.sent(),n.sheetLoadFail)return[2];this.dpiSheet.setHighDPIRatio(this.sheetWidth,t.sheetWidth),a.label=2;case 2:if(!this.dpiSheet.changeDPI(e))return[2];for(o=this.getLoadingRange(e),i=o.startRow,r=o.endRow,s=o.startCol,l=o.endCol,d=i;d<r;++d)for(u=s;u<l;++u)h=document.getElementById("piece"+d+"_"+u),f=n.getSheetSize(d,u),m=f.sheetWidth,p=f.sheetHeight,g={idx:this.docInfo.currentSheet,rowIdx:d,colIdx:u,width:m,height:p},h.src=this.dpiSheet.getNewPath(g);return[2]}}))}))},o.getLoadingRange=function(e){void 0===e&&(e=0);var t=document.getElementById("contents").offsetWidth,i=document.getElementById("contents").offsetHeight,r=n.defaultCellHeight*(n.resizePercent/100),a=n.defaultCellHeight*(n.resizePercent/100),s=2;e>0&&e<100&&(s=2*Math.ceil(100/e));var l=Math.ceil(o.scrollContentAreaEl.scrollTop()/r),c=(l=l>2?l-2:0)+Math.ceil(i/a);c=c+s>n.maxRow?n.maxRow:c+s;var d=Math.ceil(o.scrollContentAreaEl.scrollLeft()/r),u=(d=d>2?d-2:0)+Math.ceil(t/r);return{startRow:l,endRow:c,startCol:d,endCol:u=u+s>n.maxCol?n.maxCol:u+s}},o.addContentDiv=function(e){void 0===e&&(e=0);var t=o.getLoadingRange(e),i=t.startRow,r=t.endRow,a=t.startCol,s=t.endCol,l=n.defaultCellWidth*(n.resizePercent/100),d=n.defaultCellHeight*(n.resizePercent/100),u=h("#cell-common");n.lastColWidth=o.sheetWidth%n.defaultCellWidth==0?n.defaultCellWidth:o.sheetWidth%n.defaultCellWidth,n.lastRowHeight=o.sheetHeight%n.defaultCellHeight==0?n.defaultCellHeight:o.sheetHeight%n.defaultCellHeight;for(var f=document.createDocumentFragment(),m=i;m<r;++m)for(var p=a;p<s;++p){var g=n.getSheetSize(m,p),v=g.sheetWidth,b=g.sheetHeight,E=h("#cellpage"+m+"_"+p,u);if(0===E.length){var y=m*l,I=p*d,w=o.sheetCreateElement(m,p,y,I,v,b);f.appendChild(w)}else if(c.Util.isServer(o.docInfo)){var _=E.children()[0];if(o.dpiSheet.isEqualDPI(_.src))continue;var S={idx:o.docInfo.currentSheet,rowIdx:m,colIdx:p,width:v,height:b};_.src=o.dpiSheet.getNewPath(S)}}try{document.getElementById("cell-common").appendChild(f)}catch(e){console.log("There is not yet cell-common")}},o.sheetCreateElement=function(e,t,n,i,r,a){var s=document.createElement("div");s.id="cellpage"+e+"_"+t,s.className="cell__div",s.style.cssText="top:"+n+"px;left:"+i+"px;";var l=document.createElement("img");l.id="piece"+e+"_"+t,c.Util.isFullScreen()?l.className="cell__piece img-loading-black":l.className=f.Head.bgColorMode===f.BGCOLOR_MODE.darkScreen?"cell__piece img-loading":"cell__piece img-loading-bright",l.style.cssText="width:"+r+"px;height:"+a+"px",l.src=o.transparentImg;var d=document.getElementById("sheet"+o.docInfo.currentSheet).textContent;l.alt=d+" sheet image";var u={idx:o.docInfo.currentSheet,rowIdx:e,colIdx:t,width:r,height:a},h=o.dpiSheet.getParam(u),m="";return c.Util.isServer(o.docInfo)?m=c.Util.getThumbPath(o.docInfo,u.idx,o.dpiSheet.getDPI(),h):(m=o.docInfo.contextPath+"/thumbnail/"+c.Util.get4DigitFormatString(o.docInfo.currentSheet+1)+"_d"+o.dpiSheet.getDPI()+"_x"+h.x+"_y"+h.y+"_w"+r+"_h"+a,m+=window.localSynap.config.thumbnailExt?"."+window.localSynap.config.thumbnailExt:".png"),o.eventObserver.sheetChangeTile.notify(h),l.onerror=function(){l.setAttribute("src",o.transparentImg),l.className+=" img-retry",l.onclick=function(){c.Util.isFullScreen()?l.className="cell__piece img-loading-black":l.className=f.Head.bgColorMode===f.BGCOLOR_MODE.darkScreen?"cell__piece img-loading":"cell__piece img-loading-bright",l.src=m}},l.src=m,s.appendChild(l),s},o._zoomCalculation=function(e,t){for(var i=n.resizePercent,r=document.getElementById("cell-common").getElementsByTagName("div")[0].id,a=0,s=e;a<s.length;a++){var l=s[a],c=o.cellPageRE.exec(r).slice(1,3).map((function(e){return parseInt(e,10)})),d=c[0],u=c[1],h=l/100*(u===n.maxCol-1?n.lastColWidth:n.defaultCellWidth),f=document.getElementById("piece"+d+"_"+u).clientWidth;if(t(h,f)&&!(Math.abs(h-f)<1)){i=l;break}}return i},o.zoomCell=function(e){var t=null;e===d.ZOOM_TYPE.ZoomOut?(t=o._zoomCalculation(d.Controlbar.ZOOM_LIST.slice().reverse(),(function(e,t){return e<t})),o.addContentDiv(t)):e===d.ZOOM_TYPE.ZoomIn&&(t=o._zoomCalculation(d.Controlbar.ZOOM_LIST,(function(e,t){return e>t}))),t!==n.resizePercent&&(o.changeDPIContentDiv(t),o.resizeCell(t),o.eventObserver.resizePage.notify())},o.resizeCell=function(e){n.resizePercent=e;var t=e/100,i=n.defaultCellWidth*t,r=n.defaultCellHeight*t,a=n.lastColWidth*t,s=n.lastRowHeight*t,d=o.sheetWidth*t,u=o.sheetHeight*t,f=c.Util.isTabletInCSS()?20:0,m=l.Browser.instance.isIOS?Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop):document.getElementById("contents").scrollTop,p=l.Browser.instance.isIOS?Math.max(window.pageXOffset,document.documentElement.scrollLeft,document.body.scrollLeft):document.getElementById("contents").scrollLeft,g=h("#piece0_0").height();h("#cell-common").css({width:d,height:u,"margin-bottom":f});for(var v=document.getElementById("cell-common").children,b=0;b<v.length;b++){var E=v[b].id,y=o.cellPageRE.exec(E).slice(1,3).map((function(e){return parseInt(e,10)})),I=y[0],w=y[1],_=r*I;o.maxBrowserTop<_&&-1!==o.maxBrowserTop?h("#"+E).css({top:o.maxBrowserTop,left:i*w}):h("#"+E).css({top:_,left:i*w}),w===n.maxCol-1?h("#piece"+I+"_"+w).css("width",a):h("#piece"+I+"_"+w).css("width",i),I===n.maxRow-1?h("#piece"+I+"_"+w).css("height",s):h("#piece"+I+"_"+w).css("height",r)}var S=h("#piece0_0").height();if(g!==S){var T=S/g;o.scrollContentAreaEl.scrollTop(m*T),o.scrollContentAreaEl.scrollLeft(p*T),o.checkResizeControlBar()}},o.moveScrollforMarker=function(e){var t=e.scrollLeft,n=e.scrollTop,o=document.getElementById("contents"),i=o.scrollLeft,r=o.scrollTop,a=o.offsetHeight,s=o.offsetWidth;(t<i-s/2||t>i+s/2||n<r-a/2||n>r+a/2)&&(document.getElementById("contents").scrollLeft=t,document.getElementById("contents").scrollTop=n)},o.loadSheet=function(t){return r(o,void 0,e,(function(){var e;return a(this,(function(o){switch(o.label){case 0:return this.docInfo.currentSheet=t,n.resizePercent=100,this.dpiSheet.initDPI(),h("#contents-area").empty(),this.removeSheetAlertDialog(),[4,this.getDimension(this.docInfo,t,this.dpiSheet.ORIGINAL_DPI)];case 1:return e=o.sent(),n.sheetLoadFail?[2]:(this.createContentDiv(e),l.Browser.instance.isMobile&&(n.resizePercent=50,this.resizeCell(n.resizePercent)),this.checkMoveControlbar(),this.checkResizeControlBar(),document.getElementById("contents-area").focus(),[2])}}))}))},o.checkResizeControlBar=function(){n.resizePercent===d.Controlbar.ZOOM_LIST[0]?(h("#cell-zoomout").removeClass("controlbar--enable"),h("#cell-zoomout").removeClass("controlbar-zoomout--hover"),h("#cell-zoomout").prop("disabled",!0),h("#mobile-controlbar-zoomout__btn").addClass("mobile-controlbar-floating__btn--disabled"),h("#mobile-controlbar-zoomout__btn").prop("disabled",!0)):(h("#cell-zoomout").addClass("controlbar--enable"),h("#cell-zoomout").prop("disabled",!1),h("#mobile-controlbar-zoomout__btn").removeClass("mobile-controlbar-floating__btn--disabled"),h("#mobile-controlbar-zoomout__btn").prop("disabled",!1)),n.resizePercent===d.Controlbar.ZOOM_LIST[d.Controlbar.ZOOM_LIST.length-1]?(h("#cell-zoomin").removeClass("controlbar--enable"),h("#cell-zoomin").removeClass("controlbar-zoomin--hover"),h("#cell-zoomin").prop("disabled",!0),h("#mobile-controlbar-zoomin__btn").addClass("mobile-controlbar-floating__btn--disabled"),h("#mobile-controlbar-zoomin__btn").prop("disabled",!0)):(h("#cell-zoomin").addClass("controlbar--enable"),h("#cell-zoomin").prop("disabled",!1),h("#mobile-controlbar-zoomin__btn").removeClass("mobile-controlbar-floating__btn--disabled"),h("#mobile-controlbar-zoomin__btn").prop("disabled",!1))},o.bindControlbarEvent=function(){c.Util.bindClickOrTouchEvent(h("#cell-first"),"controlbar-first--hover",(function(){o.eventObserver.sheet.notify({sheetIdx:0})})),c.Util.bindClickOrTouchEvent(h("#cell-end"),"controlbar-end--hover",(function(){o.eventObserver.sheet.notify({sheetIdx:o.docInfo.status.pageNum-1})})),c.Util.bindClickOrTouchEvent(h("#cell-prev"),"controlbar-prev--hover",(function(){o.eventObserver.sheet.notify({sheetIdx:o.docInfo.currentSheet-1})})),c.Util.bindClickOrTouchEvent(h("#cell-next"),"controlbar-next--hover",(function(){o.eventObserver.sheet.notify({sheetIdx:o.docInfo.currentSheet+1})})),c.Util.bindClickOrTouchEvent(h("#cell-zoomout"),"controlbar-zoomout--hover",(function(){o.zoomCell(d.ZOOM_TYPE.ZoomOut)})),c.Util.bindClickOrTouchEvent(h("#cell-zoomin"),"controlbar-zoomin--hover",(function(){o.zoomCell(d.ZOOM_TYPE.ZoomIn)})),c.Util.bindClickOrTouchEvent(h("#cell-hand-scroll"),"controlbar-hand-scroll--hover",v.MouseScroll.instance.bindDesktopControlbar({elem:document.getElementById("cell-hand-scroll"),selector:"controlbar-hand-scroll--hover"}),v.MouseScroll.instance.mouseOut)},o.resizeWindow=function(){h("#contents").removeAttr("style"),c.Util.isMobileMode()&&(h("#tablist-popup").hide(),c.Util.isFullScreen()||o.eventObserver.mobileHeader.notify(u.ShowActionType.HIDE3SEC)),c.Util.isFullScreen()||c.Util.isFullScreen()||(o.sheetTabResize(),s.DetectZoom.getRatio()<100&&o.addContentDiv())},o.singleTap=function(){o.toggleMobileHeader()},o.mouseEventBind=function(){h("#contents").on("click",(function(){l.Browser.instance.isMobile||o.toggleMobileHeader()}))},o.eventObserverBind=function(e){o.eventObserver=e,o.eventObserver.sheet.subscribe(o.moveSheet),o.eventObserver.resizeWindow.subscribe(o.resizeWindow),o.eventObserver.fullScreen.subscribe(o.fullScreen),o.eventObserver.singleTap.subscribe(o.singleTap),o.eventObserver.afterUndoRedoSheet.subscribe(o.moveScrollforMarker),o.eventObserver.zoom.subscribe(o.zoomCell)},o.eventBind=function(){o.scrollSheetEventBind(),o.mouseEventBind()},o.setMaxBrowserTop=function(){var e=l.Browser.instance;e.isMobile||(e.isIE||e.isEdge?o.maxBrowserTop=1535e3:e.isFirefox&&(o.maxBrowserTop=17895e3))},o.setTabIndex=function(){var e=c.Util.setTabIndexList(),t=document.getElementById("tabmore").tabIndex,n=document.getElementById("header-tablist__input").tabIndex;c.Util.setTabIndex(document.getElementById("contents"),e++);for(var i=0;i<o.maxPage;i++)c.Util.setTabIndex(document.getElementById("tablist"+i),t+1),c.Util.setTabIndex(document.getElementById("mobileTablist"+i),n),c.Util.setTabIndex(document.getElementById("sheet"+i),e)},o.load=function(t,n){return r(o,void 0,e,(function(){return a(this,(function(e){switch(e.label){case 0:return this.docInfo=t,this.maxPage=this.docInfo.status.pageNum,h("#wrap").addClass("wrap--cell"),l.Browser.instance.isIOS&&(h("#wrap").addClass("wrap--ios"),h("#container").addClass("wrap__container--ios"),h("#contents").addClass("wrap__contents--ios"),h("#annotation-list").addClass("wrap__annotation-list--ios"),h("#footer").addClass("wrap__footer--ios")),h("#header-title-text").addClass("wrap__title--cell"),h("#contents-area").addClass("wrap__contents-area"),this.setMaxBrowserTop(),this.bindControlbarEvent(),this.dpiSheet=new g.DPISheet(t),this.eventObserverBind(n),[4,this.loadSheetTab(this.docInfo.currentSheet)];case 1:return e.sent(),[4,this.loadSheet(this.docInfo.currentSheet)];case 2:return e.sent(),this.setTabIndex(),this.eventBind(),this.dpiSheet.load(n),document.getElementById("contents-area").focus(),[2]}}))}))},o}return i(n,t),n.defaultCellWidth=1e3,n.defaultCellHeight=1e3,n.lastColWidth=0,n.lastRowHeight=0,n.maxRow=0,n.maxCol=0,n.sheetLoadFail=!1,n.resizePercent=100,n.getSheetSize=function(e,t){var o=n.defaultCellWidth,i=n.defaultCellHeight;return e===n.maxRow-1&&(i=n.lastRowHeight),t===n.maxCol-1&&(o=n.lastColWidth),{sheetWidth:o,sheetHeight:i}},n}(m.Sheet);t.ImageSheet=b}).call(this,n(5))},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(18),i=n(0),r=n(288),a=n(108),s=n(107),l=n(289),c=n(1),d=n(50),u=n(19),h=null,f=function(){function e(){var t=this;this.resizeEvent=null,this.init=function(){var e=document.getElementById(a.default.dialogWrapperElSelector);e&&t.modalEl.removeChild(e);var n=document.getElementById(a.default.dimmedElSelector);n&&t.modalEl.removeChild(n),u.ScaleEvent.disableiOSFocusScale()},this.alignHorizontally=function(){var t=document.getElementById(a.default.dialogElSelector),n=document.getElementById(a.default.dialogWrapperElSelector),o=i.Util.getPageXOffset(!0)+(i.Util.getInnerWidth()-t.offsetWidth)/2,r=t.offsetHeight*u.ScaleEvent.getBrowserScale(),s=i.Util.getInnerHeight(),l=s*e.getModalTopRatio();s<r+l&&(l=0),l+=i.Util.getPageYOffset(!0),n.style.left=o+"px",n.style.top=l+"px",u.ScaleEvent.scale(n,"center top")},this.resizeModal=function(){var e=t.alignHorizontally;return c.Browser.instance.isIOS?function(){setTimeout((function(){e()}),100)}:e},this.render=function(e,n){if(void 0===n&&(n=null),t.init(),t.modalEl.style.display="block",n){var o=document.createElement("div");o.id=a.default.dimmedElSelector,o.className=a.default.dimmedElSelector,o.addEventListener(i.Util.getClickEventName(),(function(){n()})),t.modalEl.appendChild(o)}var r=document.createElement("div");r.id=a.default.dialogWrapperElSelector,r.className=a.default.dialogWrapperElSelector,i.Util.toggleTabIndex(),e.tabIndex=0,r.appendChild(e),t.modalEl.appendChild(r),t.modalEl.style.display="block",t.alignHorizontally(),window.addEventListener("resize",t.resizeEvent),c.Browser.instance.isSupportVisualViewport()&&window.visualViewport.addEventListener("resize",t.resizeEvent),e.focus()},this.renderWithDialogObject=function(e,n){void 0===n&&(n=null),t.render(e.create(),n)},this.remove=function(){t.modalEl.style.display="",window.removeEventListener("resize",t.resizeEvent),c.Browser.instance.isSupportVisualViewport()&&window.visualViewport.removeEventListener("resize",t.resizeEvent),i.Util.toggleTabIndex(),u.ScaleEvent.enableiOSFocusScale()},this.msgDialog=function(e,n){void 0===n&&(n=null);var o=t.elFactory.createLocaleMsgBox(e),i=t.elFactory.createDialogEl();i.appendChild(o),t.render(i,n)},this.confirmDialog=function(e,n,o){void 0===n&&(n="msg_submit"),void 0===o&&(o=function(){t.remove()});var i=t.elFactory.createLocaleMsgBox(e),r=t.elFactory.createSingleBtnBoxEl(n,s.BUTTON_COLOR.BLACK,o).boxEl,a=t.elFactory.createDialogEl();a.appendChild(i),a.appendChild(r),t.render(a),a.addEventListener("keydown",(function(e){"Enter"===e.key&&o()}))},this.questionDialog=function(e,n,o,i,r,a,s){void 0===i&&(i=null),void 0===r&&(r=null),void 0===a&&(a=null),void 0===s&&(s=null);var l=t.elFactory.createLocaleMsgBox(e),c=t.elFactory.create2AnswerBtnBoxEl(n,o,i,r).boxEl,d=t.elFactory.createDialogEl();d.appendChild(l),null!==s&&d.appendChild(t.elFactory.createCheckBox(s)),d.appendChild(c),t.render(d,a),d.addEventListener("keydown",(function(e){"Enter"===e.key?i&&i():"Escape"===e.key&&r&&r()}))},this.questionMessageDialog=function(e,n,o,i,r,a){void 0===i&&(i=null),void 0===r&&(r=null),void 0===a&&(a=null),t.questionDialog(e,n,o,(function(){t.remove(),null!==i&&i()}),(function(){t.remove(),null!==r&&r()}),null,a)},this.prevPwdValue="",this.passwordDialog=function(e,n,r){void 0===e&&(e=""),void 0===n&&(n=null),void 0===r&&(r=null);var a=t.elFactory.createLocaleMsgBox("msg_exception_doc"),s=document.createElement("div");s.className="dialog__pwd-input";var l=document.createElement("input");if(l.className="pwd-input",l.type="password",l.title=o.LocaleMessage.getMessage("dialog-passwd"),s.appendChild(l),e){l.value=t.prevPwdValue,i.Util.addClass(l,"pwd-input--warn");var c=document.createElement("div");c.className="pwd-warn-msg",c.innerHTML=o.LocaleMessage.getMessage(e),s.appendChild(c)}var d=function(){t.prevPwdValue=l.value,n&&n(l.value),l&&l.focus()},u=t.elFactory.create2AnswerBtnBoxEl("msg_submit","msg_cancel",d,r).boxEl,h=t.elFactory.createDialogEl();h.appendChild(a),h.appendChild(s),h.appendChild(u),t.render(h),l.focus(),h.addEventListener("keydown",(function(e){"Enter"===e.key?d():"Escape"===e.key&&r&&r()}))},this.downloadAsDialog=function(e,n,r,s){void 0===n&&(n=null),void 0===r&&(r=null),void 0===s&&(s=null);var l=!e,u=t.elFactory.createLocaleMsgBox("msg_download_as"),h=document.createElement("input");h.className="input",h.id="download-input",h.placeholder=o.LocaleMessage.getMessage("msg_input_filename"),h.value=e,h.addEventListener("keypress",(function(){l&&(i.Util.removeClass(h,"input--warn"),h.placeholder=o.LocaleMessage.getMessage("msg_input_filename"),l=!1)})),c.Browser.instance.isIE9Lower()&&(h.addEventListener("focus",(function(){l&&(i.Util.removeClass(h,"input--warn"),h.value="",l=!1)})),h.addEventListener("focusout",(function(){""===h.value&&(l=!0,i.Util.addClass(h,"input--warn"),h.value=o.LocaleMessage.getMessage("msg_input_filename_warn"))})));var f=function(){if(h.value&&h.value!==o.LocaleMessage.getMessage("msg_input_filename_warn")){var e=h.value;e=e.replace(/[\\/:*?"<>|]+/g,"_"),t.remove(),n&&n(e)}else l=!0,i.Util.addClass(h,"input--warn"),h.placeholder=o.LocaleMessage.getMessage("msg_input_filename_warn"),c.Browser.instance.isIE9Lower()&&(h.value=o.LocaleMessage.getMessage("msg_input_filename_warn"))},m=function(){t.remove(),r&&r()},p=t.elFactory.create2AnswerBtnBoxEl("msg_save","msg_cancel",f,m).boxEl,g=t.elFactory.createDialogEl();g.appendChild(u);var v=document.createElement("div");v.className=a.default.dialogElSelector+"__input",v.appendChild(h),g.appendChild(v),null!==s&&g.appendChild(t.elFactory.createCheckBox(s)),g.appendChild(p),t.render(g),g.addEventListener("keydown",(function(e){"Enter"===e.key?f():"Escape"!==e.key&&e.keyCode!==d.keyMap.ESC||m()}))},this.infoDialog=function(e,n,r){void 0===e&&(e=""),void 0===n&&(n=null),void 0===r&&(r=function(){t.remove()});var l=document.createElement("div");"ko"===o.LocaleMessage.currentLanguage?l.className="info-logo":l.className="info-logo-en";var c=document.createElement("div");c.className="content";var u=" "+i.Util.getServiceVersionString(),h=[];e&&h.push({key:o.LocaleMessage.getMessage("info_company_name"),value:e}),h.push({key:o.LocaleMessage.getMessage("info_product_name_version_key"),value:o.LocaleMessage.getMessage("info_product_name_version_value")+u});var f=document.createElement("div");f.className="content__key-value",f.appendChild(t.elFactory.createKeyValueBoxEl(h)),c.appendChild(f);var m=document.createElement("div");m.className="content__copyright",m.innerHTML=o.LocaleMessage.getMessage("into_product_copyright"),c.appendChild(m);var p=function(){t.remove(),r&&r()},g=t.elFactory.createSingleBtnBoxEl("msg_submit",s.BUTTON_COLOR.BLACK,p).boxEl,v=t.elFactory.createDialogEl(!1),b=document.createElement("div");b.className=a.default.dialogElSelector+"__info-logo",b.appendChild(l),b.title=o.LocaleMessage.getMessage("dialog_logo"),v.appendChild(b);var E=document.createElement("div");if(E.className=a.default.dialogElSelector+"__info-content",E.appendChild(c),v.appendChild(E),n){var y=document.createElement("div");for(var I in y.className="metabox",n){var w=document.createElement("div");w.className="metabox__key-value";var _=n[I][0].name,S=n[I][1].content?n[I][1].content:"",T=document.createElement("div");T.innerText=_,T.className="metabox__key-box";var x=document.createElement("div");x.innerText=S,x.className="metabox__value-box",w.appendChild(T),w.appendChild(x),y.appendChild(w)}E.appendChild(y),E.style.borderBottom="0px",E.style.marginBottom="0px"}v.appendChild(g),t.render(v),v.addEventListener("keydown",(function(e){"Enter"!==e.key&&"Escape"!==e.key&&e.keyCode!==d.keyMap.ESC||p()}))},this.snsDialog=function(){t.renderWithDialogObject(new l.default(t.elFactory))},this.refreshDialog=function(){t.confirmDialog("msg_exception_open_failed","msg_refresh",(function(){location.reload()}))},this.deleteMarkerDialog=function(e,n,o){void 0===n&&(n=null),void 0===o&&(o=null),t.questionDialog(e,"msg_submit","msg_cancel",(function(){t.remove(),n&&n()}),(function(){t.remove(),o&&o()}))},this.annotFailedDialog=function(e){var n="msg_save_annotation_failed";switch(e){case 102:n="msg_annotation_permission_error";break;case 103:n="msg_annotation_admin_error"}t.confirmDialog(n,"msg_close")},this.annotSaveFailedDialog=function(){t.confirmDialog("msg_save_annotation_failed","msg_close")},this.annotSaveExceptDialog=function(){t.confirmDialog("msg_save_annotation_except","msg_close")},this.getSheetPageOpenFailedDialogEl=function(){var e=t.elFactory.createLocaleMsgBox("msg_sheet_convFail"),n=t.elFactory.createDialogEl(!1);return n.appendChild(e),n},this.openDocErrorDialog=function(e){if(c.Browser.instance.isIOS&&window.history.length>1)t.confirmDialog(e,"msg_back",(function(){history.back()}));else{var n=t.elFactory.createLocaleMsgBox(e),o=t.elFactory.createDialogEl(!1);o.appendChild(n),t.render(o)}},this.elFactory=new r.default,this.modalEl=document.getElementById(a.default.modalElSelector),this.resizeEvent=this.resizeModal()}return Object.defineProperty(e,"instance",{get:function(){return h||(h=new e),h},enumerable:!1,configurable:!0}),e.getModalTopRatio=function(){return i.Util.isMobileMode()?.15:.1},e}();t.default=f},,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyEvent=t.keyMap=void 0;var o,i=n(3),r=n(0),a=n(35),s=n(1),l=n(8),c=n(58);!function(e){e[e.ESC=27]="ESC",e[e.PAGEUP=33]="PAGEUP",e[e.PAGEDOWN=34]="PAGEDOWN",e[e.END=35]="END",e[e.HOME=36]="HOME",e[e.LEFTARROW=37]="LEFTARROW",e[e.UPARROW=38]="UPARROW",e[e.RIGHTARROW=39]="RIGHTARROW",e[e.DOWNARROW=40]="DOWNARROW",e[e.DELETE=46]="DELETE",e[e.Z=90]="Z",e[e.F=70]="F",e[e.F11=122]="F11"}(o=t.keyMap||(t.keyMap={}));var d=function(){var e=this;this.eventObserver=null,this.docInfo=null,this.maxPage=null,this.keypressCnt=0,this.stopKeyTimeout=null,this.scrollContentAreaEl=s.Browser.instance.isIOS?i(document):i("#contents"),this.pageInputEventKey=[o.END,o.HOME,o.LEFTARROW,o.RIGHTARROW],this.isOnePage=function(){return!(!r.Util.isHtmlSlideSkin(e.docInfo)||s.Browser.instance.isMobile)||!(!r.Util.isFullScreen()||!a.DetectZoom||100!==a.DetectZoom.getRatio())||void 0},this.sheetKeyEvent=function(t){e.markerKeyEvent(t)},this.pageKeyEvent=function(t){if(t.keyCode!==o.F11&&t.keyCode!==o.ESC){if(r.Util.isUseSearch(e.docInfo)&&t.keyCode===o.F&&(t.ctrlKey||t.metaKey))return t.preventDefault(),t.stopPropagation(),void(l.default.isAnnotMode||r.Util.isActiveSearch()?(i("#search").hide(),i("#search-btn__img").removeClass("search-btn__img--on"),e.eventObserver.searchDisplay.notify(c.SEARCH_DISPLAY.HIDE)):(i("#search").show(),i("#search__input").focus(),e.eventObserver.searchDisplay.notify(c.SEARCH_DISPLAY.SHOW),i("#search-btn__img").addClass("search-btn__img--on")));var n=t.target;"page__input"===n.id&&e.pageInputEventKey.indexOf(t.keyCode)>-1||(n.id.indexOf("page")>-1&&-1!==[o.PAGEUP,o.PAGEDOWN,o.UPARROW,o.DOWNARROW,o.LEFTARROW,o.RIGHTARROW].indexOf(t.keyCode)&&t.preventDefault(),e.markerKeyEvent(t),"thumbnailview-btn"!==n.id&&n.id.indexOf("thumb")>-1||(e.keypressCnt+=1,clearTimeout(e.stopKeyTimeout),e.keypressCnt>0&&(e.stopKeyTimeout=window.setTimeout((function(){var n=!0===e.isOnePage()?e.fullscreenGetPageNum(t.keyCode,e.keypressCnt):e.getPageNum(t.keyCode,e.keypressCnt);e.keypressCnt=0,-1!==n&&e.keyMovePage(n)}),20))))}},this.getPageNum=function(t,n){var i=e.docInfo.currentPage,r=-1;switch(t){case o.PAGEUP:var a=i-n;r=Math.max(a,0);break;case o.PAGEDOWN:var s=i+n;r=Math.min(s,e.maxPage-1);break;case o.UPARROW:e.scrollContentAreaEl.scrollTop(e.scrollContentAreaEl.scrollTop()-40);break;case o.LEFTARROW:e.scrollContentAreaEl.scrollLeft(e.scrollContentAreaEl.scrollLeft()-40);break;case o.DOWNARROW:e.scrollContentAreaEl.scrollTop(e.scrollContentAreaEl.scrollTop()+40);break;case o.RIGHTARROW:e.scrollContentAreaEl.scrollLeft(e.scrollContentAreaEl.scrollLeft()+40);break;case o.HOME:e.scrollContentAreaEl.scrollTop(0);break;case o.END:e.scrollContentAreaEl.scrollTop(e.scrollContentAreaEl.prop("scrollHeight"));break;default:r=-1}return r},this.fullscreenGetPageNum=function(t,n){var i=e.docInfo.currentPage,r=-1;switch(t){case o.PAGEUP:case o.UPARROW:case o.LEFTARROW:var a=i-n;r=Math.max(a,0);break;case o.PAGEDOWN:case o.DOWNARROW:case o.RIGHTARROW:var s=i+n;r=Math.min(s,e.maxPage-1);break;case o.HOME:r=0;break;case o.END:r=e.maxPage-1;break;default:r=-1}return r},this.keyMovePage=function(t){isNaN(t)||t<0||t>e.maxPage-1||1===e.maxPage?i("#page__input").val(e.docInfo.currentPage+1):e.eventObserver.page.notify({pageNum:t,isScroll:!1})},this.markerKeyEvent=function(t){l.default.isAnnotMode&&t.keyCode===o.Z&&(t.ctrlKey||window.macKeys.cmdKey)&&(t.shiftKey||window.macKeys.shiftKey?e.eventObserver.redoMarker.notify():e.eventObserver.undoMarker.notify())},this.eventBind=function(t){e.eventObserver=t,(r.Util.isConvImg(e.docInfo)||r.Util.isHtmlSlideSkin(e.docInfo)||r.Util.isHtmlImageSkin(e.docInfo))&&(i(window).on("keyup",(function(){e.keypressCnt=0})),i(window).on("keydown",(function(t){return r.Util.isCellSkin(e.docInfo)?e.sheetKeyEvent(t.originalEvent):e.pageKeyEvent(t.originalEvent)}))),i(window).on("keyup",(function(t){e.eventObserver.keyUp.notify(t)})),i(window).on("keydown",(function(t){e.eventObserver.keyPress.notify(t)}))},this.load=function(e,t){this.docInfo=e,r.Util.isCellSkin(e)||(this.maxPage=this.docInfo.status.pageNum),this.eventBind(t)}};t.KeyEvent=d},function(e,t,n){"use strict";(function(e){var o=this&&this.__awaiter||function(t,n,o,i){return new(o||(o=e))((function(e,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}l((i=i.apply(t,n||[])).next())}))},i=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Head=t.BGCOLOR_MODE=void 0;var r,a=n(58),s=n(58),l=n(36),c=n(0),d=n(18),u=n(3),h=n(25),f=n(30),m=n(17),p=n(104),g=n(156),v=n(1),b=n(19),E=n(8),y=n(41),I=n(29),w=n(101),_=n(38),S=n(75);!function(e){e[e.lightScreen=0]="lightScreen",e[e.darkScreen=1]="darkScreen"}(r=t.BGCOLOR_MODE||(t.BGCOLOR_MODE={}));var T=function(){function t(){var T=this;this.docInfo=null,this.eventObserver=null,this.dialogFactory=y.default.instance,this.viewMode=h.VIEW_MODE.desktop,this.pageInputWidth=24,this.headerIconWidth=c.Util.MaxMobileModeWidth/2,this.fileExtMap={xls:"cell-icon",xlsb:"cell-icon",xlsx:"cell-icon",csv:"cell-icon",nxls:"cell-icon",ppt:"slide-icon",pptx:"slide-icon",nppt:"slide-icon",doc:"word-icon",docx:"word-icon",ndoc:"word-icon",hwp2k:"hwp-icon",hwp97:"hwp-icon",hwx:"hwp-icon",hwpx:"hwp-icon",txt:"txt-icon",text:"txt-icon",hwpml:"hwp-icon",jpeg:"img-icon",jpg:"img-icon",png:"img-icon",tiff:"img-icon",gif:"img-icon",bmp:"img-icon",webp:"img-icon",jpeg2k:"img-icon",pdf:"pdf-icon",odt:"odt-icon",html:"html-icon",htm:"html-icon",xmldart:"html-icon",mht:"mht-icon",mhtml:"mht-icon",msg:"mht-icon",eml:"mht-icon",default:"nosupport-icon"},this.setMinWidthHeader=function(){document.getElementById("header").style.minWidth="400px",document.getElementById("wrap__header__container").style.minWidth="400px",document.getElementById("marker-header").style.minWidth="400px"},this.load=function(t,n){return o(T,void 0,e,(function(){return i(this,(function(e){switch(e.label){case 0:return this.docInfo=t,this.pageWidth=this.pageInputWidth+(String(this.docInfo.status.pageNum).length>2?5.5*(String(this.docInfo.status.pageNum).length-2):0)+"px",v.Browser.instance.isMobile||this.setMinWidthHeader(),[4,this.initEvent()];case 1:return e.sent(),this.jqPageInput=u("#page__input"),this.jqPageInput.val(1),this.jqPageInput.on("change",this.movePage),c.Util.bindEnterKey(document.getElementById("page__input"),this.movePage),this.setTotalPageWidth(),this.eventBind(n),c.Util.isMobileMode()&&(this.viewMode=h.VIEW_MODE.mobile),this.setTitle(),[2]}}))}))},this.eventBind=function(e){T.eventObserver=e,T.eventObserver.page.subscribe(T.focusPage),T.eventObserver.sheet.subscribe(T.moveSheet),T.eventObserver.resizeWindow.subscribe(T.resizeWindow),T.eventObserver.bgColor.subscribe(T.bgColor),T.eventObserver.orientationchange.subscribe(T.orientationchange),T.eventObserver.annotMode.subscribe(T.annotMode),T.subscribeMobileHeader(),T.mouseoverEventBind(),v.Browser.instance.isSupportVisualViewport()&&(T.eventObserver.startViewportScroll.subscribe(T.startViewportScroll),T.eventObserver.endViewportScroll.subscribe(T.endViewportScroll)),c.Util.isUseSearch(T.docInfo)&&(c.Util.bindClickOrTouchEvent(u("#search-prev"),"search-control--hover",T.searchTextNotify),c.Util.bindClickOrTouchEvent(u("#search-next"),"search-control--hover",T.searchTextNotify),c.Util.bindClickOrTouchEvent(u("#search-close"),"search-control--hover",T.searchClose)),T.headerIconWidth=document.getElementById("header-menu").clientWidth+document.getElementById("header-page").clientWidth,T.headerIconWidth>c.Util.MaxMobileModeWidth/2&&(T.setHeaderPagePosition(),window.addEventListener("resize",T.setHeaderPagePosition))},this.searchTextNotify=function(e){var t="search-next"===e.target.parentElement.id||"search-next"===e.target.id?s.SEARCH_TYPE.NEXT:s.SEARCH_TYPE.PREV;T.eventObserver.searchNext.notify(t)},this.setTotalPageWidth=function(){c.Util.isMobileMode()?String(T.docInfo.status.pageNum).length>5?(T.jqPageInput.css("width","60px"),u("#select-arrow").css("left","53px"),u("#page-scroll-blind").css("width","73px")):T.jqPageInput.css("width",""):T.jqPageInput.css("width",T.pageWidth)},this.subscribeMobileHeader=function(){if(void 0!==window.localSynap&&!1===window.localSynap.config.isShowHeader)return u(".wrap__header").addClass("wrap__header--hide"),u("#container").addClass("wrap__container--option-on"),void u("#thumbnail").addClass("wrap__thumbnail--option-on");void 0!==window.localSynap&&!1!==window.localSynap.config.headerAutoHide?T.eventObserver.mobileHeader.subscribe(T.mobileHeader):u("#contents").addClass("wrap__contents--option-show-header"),("cell"===T.docInfo.skinType||c.Util.isHtmlSkin(T.docInfo))&&c.Util.isMobileMode()&&T.eventObserver.mobileHeader.notify(l.ShowActionType.HIDE3SEC)},this.initEvent=function(){return o(T,void 0,e,(function(){return i(this,(function(e){return this.setMetaGenerator(),c.Util.isHtmlSkin(this.docInfo)?"cell"===this.docInfo.skinType?(u("#backgroundcolor-btn").addClass("hide"),u("#mobile-bgcolor-btn").addClass("hide")):"slide"===this.docInfo.skinType&&(c.Util.useSingle(this.docInfo)||u("div").removeClass("cell"),v.Browser.instance.isMobile&&(u("#thumbnail").addClass("cell"),u("#thumbnailbar").addClass("cell"),u("#thumbnailview-btn").addClass("cell")),this.mobilePageAreaLoad(this.docInfo.status.pageNum)):"cell"!==this.docInfo.skinType&&(u("div").removeClass("cell"),this.mobilePageAreaLoad(this.docInfo.status.pageNum),c.Util.isUseSearch(this.docInfo)&&this.searchTextLoad()),this.bindPrintBtn(),this.bindSnsBtn(),this.bindInfoBtn(),this.bindMoreBtn(),this.docInfo.downloadUrl&&this.downloadBtnLoad(this.docInfo.downloadUrl),v.Browser.instance.isMobile&&(this.initViewportContent(),this.adjustMobileDeviceViewport(),v.Browser.instance.isIOS&&this.bindWindowCloseBtnLoad()),c.Util.setVHVariable(),u(".wrap__menu").removeClass("hide"),this.bindBgcolorBtn(),this.hasSubMenu()||u("#more").hide(),c.Util.isDocslive()&&this.docInfo.cs===w.CS_TYPE.SERVER&&this.bindLaserBtn(),c.Util.isUseAnnotation(this.docInfo)&&(!c.Util.isCellSkin(this.docInfo)&&!c.Util.isHTMLFormat(this.docInfo)&&(m.default.permission.annotDownPdf&&this.exportPdfBtnLoad(),m.default.permission.annotSavePdf&&this.saveServerPdfBtnLoad()),!v.Browser.instance.isIE10Lower()&&m.default.permission.annotEdit&&(this.markerLoad(),this.bindMarkerDeleteBtn(),this.bindAnnotationList())),this.checkSubMenuBorder(),[2]}))}))},this.setMetaGenerator=function(){var e=n(279).version;e=c.Util.getServiceVersionString()+"."+e;var t=document.querySelector('meta[name="GENERATOR"]').getAttribute("content")+" "+e;document.querySelector('meta[name="GENERATOR"]').setAttribute("content",t)},this.checkSubMenuBorder=function(){var e=null,t=-1,n=document.getElementsByClassName("scroll-blind__more-border");Array.from(document.getElementsByClassName("scroll-blind__more-item")).forEach((function(o,i){o.classList.contains("hide")||(e=o,t=i,i<n.length&&c.Util.removeClass(n[i],"hide"))})),e&&t<n.length&&c.Util.addClass(n[t],"hide")},this.bindMarkerDeleteBtn=function(){var e=u("#marker-delete-btn"),t=document.getElementById("marker-delete-btn__img");e.on("click",(function(){c.Util.addClass(t,"marker-delete-btn__img--on"),T.dialogFactory.deleteMarkerDialog("msg_delete_marker",(function(){c.Util.removeClass(t,"marker-delete-btn__img--on")}),(function(){c.Util.removeClass(t,"marker-delete-btn__img--on")}))}))},this.bindAnnotationList=function(){var e=document.getElementById("annotation-list-btn");c.Util.bindClickEvent(e,(function(){c.Util.containClassName(e,"marker-menu--select")?(c.Util.removeClass(e,"marker-menu--select"),c.Util.addClass(document.getElementById("annotation-list"),"hide"),c.Util.removeClass(document.getElementById("contents"),"wrap__contents--annot-on")):(c.Util.addClass(e,"marker-menu--select"),c.Util.removeClass(document.getElementById("annotation-list"),"hide"),c.Util.addClass(document.getElementById("contents"),"wrap__contents--annot-on"));var t=c.Util.isMobileMode();t&&S.MemoContent.isShow()||p.default.STATUS_TOGGLE(),!t&&T.eventObserver.resizeContents.notify()}))},this.saveServerPdfBtnLoad=function(){var e=document.getElementById("server-pdf-btn__img"),t=function(){return o(T,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this.eventObserver.saveServerPdf.notify()];case 1:return t.sent(),c.Util.removeClass(e,"server-pdf-btn__img--on"),[2]}}))}))},n=function(){c.Util.removeClass(e,"server-pdf-btn__img--on")},r=document.getElementById("server-pdf-btn");c.Util.removeClass(r,"hide"),c.Util.bindClickEvent(r,(function(){c.Util.addClass(e,"server-pdf-btn__img--on"),T.dialogFactory.questionMessageDialog("msg_server_pdf_dialog","msg_submit","msg_cancel",t,n)}));var a=document.getElementById("mobile-server-pdf-btn");c.Util.removeClass(a,"hide"),a.innerText=d.LocaleMessage.getMessage("msg_server_pdf"),c.Util.bindClickOrTouchEvent(u("#mobile-server-pdf-btn"),"scroll-blind__more-item--hover",(function(){c.Util.removeClass(document.getElementById("more-btn__img"),"more-btn__img--on"),u("#more-submenu").toggle(),c.Util.addClass(e,"server-pdf-btn__img--on"),T.dialogFactory.questionMessageDialog("msg_server_pdf_dialog","msg_submit","msg_cancel",t,n)}))},this.exportPdfBtnLoad=function(){var e=document.getElementById("export-pdf-btn"),t=document.getElementById("export-pdf-btn__img"),n=null;m.default.permission.annotView&&(n={id:"export-pdf-use-annotation",message:"msg_pdf_with_annotation",value:"1",checked:!0}),c.Util.removeClass(e,"hide");var r=function(e){return o(T,void 0,void 0,(function(){var n,o,r;return i(this,(function(i){switch(i.label){case 0:return n=c.Util.removeExtension(e,"pdf"),o=document.getElementById("export-pdf-use-annotation"),r=o&&o.checked?1:0,[4,this.eventObserver.exportPdf.notify({title:n,dispAnnot:r})];case 1:return i.sent(),c.Util.removeClass(t,"export-pdf-btn__img--on"),[2]}}))}))},a=function(){c.Util.removeClass(t,"export-pdf-btn__img--on")},s=T.docInfo.title;c.Util.bindClickEvent(e,(function(){E.default.isAnnotMode&&T.eventObserver.saveAnnotation.notify(),c.Util.addClass(t,"export-pdf-btn__img--on"),T.dialogFactory.downloadAsDialog(s,r,a,n)}));var l=document.getElementById("mobile-export-pdf-btn");c.Util.removeClass(l,"hide"),l.innerText=d.LocaleMessage.getMessage("msg_export_pdf"),c.Util.bindClickOrTouchEvent(u("#mobile-export-pdf-btn"),"scroll-blind__more-item--hover",(function(){c.Util.removeClass(document.getElementById("more-btn__img"),"more-btn__img--on"),u("#more-submenu").toggle(),c.Util.addClass(t,"export-pdf-btn__img--on"),T.dialogFactory.downloadAsDialog(s,r,a,n)}))},this.markerLoad=function(){var e=document.getElementById("marker-btn");c.Util.removeClass(e,"hide"),c.Util.removeClass(document.getElementById("header-border"),"hide")},this.annotMode=function(e){var t=document.getElementById("contents"),n=u("#marker-header");if(e)T.annotModeOn(),c.Util.addClass(t,"wrap__contents--marker-mode"),v.Browser.instance.isMobile?(T.jqPageInput.attr("disabled",!0),t.style.top=b.ScaleEvent.getHeaderAreaHeightWithAnnot()*b.ScaleEvent.getBrowserScale()+"px"):t.style.left="",n.removeClass("hide");else{if(T.annotModeOff(),c.Util.removeClass(t,"wrap__contents--marker-mode"),t.style.top="",v.Browser.instance.isMobile)T.jqPageInput.removeAttr("disabled");else{var o=document.getElementById("thumbnail");t.style.left=o.style.width}n.addClass("hide")}},this.annotModeOn=function(){c.Util.isActiveSearch()&&(u("#search").hide(),T.eventObserver.searchDisplay.notify(a.SEARCH_DISPLAY.HIDE));var e="menu__block--deactivate";if(c.Util.addClass(document.getElementById("sns-btn"),e),c.Util.addClass(document.getElementById("info-btn"),e),c.Util.addClass(document.getElementById("thumbnailview-btn"),e),c.Util.addClass(document.getElementById("download-btn"),e),c.Util.addClass(document.getElementById("search-btn"),e),c.Util.addClass(document.getElementById("backgroundcolor-btn"),e),c.Util.addClass(document.getElementById("presentation-btn"),e),c.Util.addClass(document.getElementById("fullscreen"),e),c.Util.addClass(document.getElementById("more-btn"),e),c.Util.addClass(document.getElementById("print-btn"),e),u("#sns-btn").prop("disabled",!0),u("#info-btn").prop("disabled",!0),u("#thumbnailview-btn").prop("disabled",!0),u("#download-btn").prop("disabled",!0),u("#search-btn").prop("disabled",!0),u("#search-btn").prop("disabled",!0),u("#backgroundcolor-btn").prop("disabled",!0),u("#presentation-btn").prop("disabled",!0),u("#fullscreen").prop("disabled",!0),u("#more-btn").prop("disabled",!0),u("#print-btn").prop("disabled",!0),u("#download-btn").click((function(e){e.preventDefault()})),c.Util.isDocslive()){c.Util.addClass(document.getElementById("laser-btn"),e),u("#laser-btn").prop("disabled",!0);var t=document.getElementById("laser-btn__img");c.Util.containClassName(t,"laser-btn__img--on")&&u("#laser-btn").trigger("click")}},this.annotModeOff=function(){var e="menu__block--deactivate";c.Util.removeClass(document.getElementById("sns-btn"),e),c.Util.removeClass(document.getElementById("info-btn"),e),c.Util.removeClass(document.getElementById("thumbnailview-btn"),e),c.Util.removeClass(document.getElementById("download-btn"),e),c.Util.removeClass(document.getElementById("search-btn"),e),c.Util.removeClass(document.getElementById("backgroundcolor-btn"),e),c.Util.removeClass(document.getElementById("presentation-btn"),e),c.Util.removeClass(document.getElementById("fullscreen"),e),c.Util.removeClass(document.getElementById("more-btn"),e),c.Util.removeClass(document.getElementById("print-btn"),e),u("#sns-btn").prop("disabled",!1),u("#info-btn").prop("disabled",!1),u("#thumbnailview-btn").prop("disabled",!1),u("#download-btn").prop("disabled",!1),u("#search-btn").prop("disabled",!1),u("#search-btn").prop("disabled",!1),u("#backgroundcolor-btn").prop("disabled",!1),u("#presentation-btn").prop("disabled",!1),u("#fullscreen").prop("disabled",!1),u("#more-btn").prop("disabled",!1),u("#print-btn").prop("disabled",!1),u("#download-btn").unbind("click"),f.Thumbnail.THUMB_STATUS===f.THUMB_FLAG.on&&c.Util.addClass(document.getElementById("thumbnail-btn"),"thumbnail-btn__img--on"),u("#search-btn__img").hasClass("search-btn__img--on")&&(u("#search").show(),T.eventObserver.searchDisplay.notify(a.SEARCH_DISPLAY.SHOW)),c.Util.isDocslive()&&(c.Util.removeClass(document.getElementById("laser-btn"),e),u("#laser-btn").prop("disabled",!1))},this.searchClose=function(){u("#search").hide(),u("#search-btn__img").removeClass("search-btn__img--on"),T.eventObserver.searchDisplay.notify(a.SEARCH_DISPLAY.HIDE)},this.searchTextLoad=function(){u("#search-btn").removeClass("hide");var e=u("#search"),t=function(){E.default.isAnnotMode||(c.Util.isActiveSearch()?T.searchClose():(e.show(),u("#search__input").focus(),T.eventObserver.searchDisplay.notify(a.SEARCH_DISPLAY.SHOW),u("#search-btn__img").addClass("search-btn__img--on")))};c.Util.bindClickEvent(document.getElementById("search-btn"),t);var n=document.getElementById("mobile-search-btn");n.innerText=d.LocaleMessage.getMessage("icon_search"),c.Util.removeClass(n,"hide"),c.Util.bindClickOrTouchEvent(u(n),"scroll-blind__more-item--hover",(function(){c.Util.removeClass(document.getElementById("more-btn__img"),"more-btn__img--on"),u("#more-submenu").toggle(),v.Browser.instance.isIOS&&b.ScaleEvent.disableiOSFocusScale(),t(),v.Browser.instance.isIOS&&b.ScaleEvent.enableiOSFocusScale()}))},this.hasSubMenu=function(){var e=!1;return u(".scroll-blind__more-item").each((function(t,n){"none"!==u(n).css("display")&&(e=!0)})),e},this.allowPrintPdfServer=function(){return!0===window.localSynap.config.isShowPdfPrint&&c.Util.isServer(T.docInfo)&&c.Util.isSupportedVer2022()&&"xmldart"!==T.docInfo.fileType},this.isShowPrintBtn=function(){var e=window.localSynap.config;if(v.Browser.instance.isMobile)return!1;if(!0!==e.isShowPrint&&!0!==e.isShowPdfPrint)return!1;if(!T.docInfo.enablePrint)return!1;var t=!0===e.isShowPrint&&c.Util.isConvImg(T.docInfo)&&("cell"!==T.docInfo.skinType||"cell"===T.docInfo.skinType&&!0===e.isShowPrintForCell),n=!0===e.isShowPrint&&c.Util.isConvHtml(T.docInfo)&&("word"===T.docInfo.skinType||"image"===T.docInfo.skinType||"pdf"===T.docInfo.skinType);return!!(t||n||T.allowPrintPdfServer())},this.createBlobAndPrint=function(e){var t=document.getElementById("iframepdf"),n=new window.Blob([e],{type:"application/pdf"}),o=window.URL.createObjectURL(n);t.contentWindow.location.replace(o),t.onload=function(){window.URL.revokeObjectURL(o),t.focus(),t.contentWindow.print()}},this.execPrint=function(){if(c.Util.isConvImg(T.docInfo)||c.Util.isConvHtml(T.docInfo)&&("pdf"===T.docInfo.skinType||"image"===T.docInfo.skinType))window.print();else if("word"===T.docInfo.skinType){var e=document.getElementById("innerWrap").contentWindow;e.focus(),e.print()}},this.questionIEtoEdge=function(){T.dialogFactory.questionMessageDialog("msg_print_to_edge","msg_yes","msg_no",(function(){return o(T,void 0,void 0,(function(){return i(this,(function(e){return window.location.replace("microsoft-edge:"+window.location.href),[2]}))}))}),(function(){return o(T,void 0,void 0,(function(){return i(this,(function(e){return[2]}))}))}))},this.questionPrintWithServer=function(){if(v.Browser.instance.isIE)T.questionIEtoEdge();else{var e={id:"print-pdf-use-annotation",message:"msg_pdf_with_annotation",value:"1",checked:!0};c.Util.isUseAnnotation(T.docInfo)&&m.default.permission.annotView?T.dialogFactory.questionMessageDialog("msg_pdf_print_dialog","print_menu","msg_cancel",(function(){return o(T,void 0,void 0,(function(){var e,t;return i(this,(function(n){return e=document.getElementById("print-pdf-use-annotation"),t=e&&e.checked?1:0,this.execPrintWithServer(t),[2]}))}))}),null,e):T.execPrintWithServer(0)}},this.execPrintWithServer=function(e){c.Util.showLoadingDimmed(!0);var t=document.getElementById("percent-message"),n=new window.XMLHttpRequest,o=0,i=0,r=null;n.responseType="arraybuffer",t.innerText="0%",n.addEventListener("error",(function(){null!=r&&clearInterval(r),c.Util.hideLoadingDimmed(),y.default.instance.confirmDialog("msg_print_pdf_failed")})),n.addEventListener("load",(function(){if(-1===[200,201].indexOf(n.status))return c.Util.hideLoadingDimmed(),void y.default.instance.confirmDialog("msg_print_pdf_failed");T.createBlobAndPrint(n.response)})),n.addEventListener("loadend",(function(){t.innerText="",c.Util.hideLoadingDimmed()})),n.addEventListener("readystatechange",(function(){n.readyState==n.HEADERS_RECEIVED&&(i=parseInt(n.getResponseHeader("Synap-File-Size")))})),n.addEventListener("progress",(function(e){null!=r&&clearInterval(r);var n=e.lengthComputable?e.total:i;if(n){var a=o+parseInt((e.loaded/n*(1-o/100)*100).toFixed(0));t.innerText=" "+a+"%"}}));var a=g.getPdfPrintUrl(T.docInfo,e);r=setInterval((function(){o<60&&(o+=1,t.innerText=o+"%")}),1e3),n.open("GET",a,!0),n.send()},this.bindPrintBtn=function(){T.isShowPrintBtn()&&(u("#mobile-print-btn").removeClass("hide"),u("#print-btn").removeClass("hide"),c.Util.bindClickEvent(document.getElementById("print-btn"),(function(){E.default.isAnnotMode||(T.allowPrintPdfServer()?T.questionPrintWithServer():(T.eventObserver.printbefore.notify(),T.execPrint()))})),u("#mobile-print-btn").on("click",(function(){T.allowPrintPdfServer()?T.questionPrintWithServer():(T.eventObserver.printbefore.notify(),window.print())})),c.Util.bindClickOrTouchEvent(u("#mobile-print-btn"),"scroll-blind__more-item--hover",(function(){T.hideMoreSubMemu()})),!0!==T.allowPrintPdfServer()&&u(window).on("afterprint",(function(){T.eventObserver.printafter.notify()})))},this.bindSnsBtn=function(){var e=window.localSynap.config;if(!0===e.isShowSns){if(void 0!==e.kakaoAPIKey){T.addScript("https://t1.kakaocdn.net/kakao_js_sdk/v1/kakao.min.js")}u("#mobile-sns-btn").removeClass("hide"),u("#sns-btn").removeClass("hide"),c.Util.bindClickEvent(document.getElementById("sns-btn"),(function(){E.default.isAnnotMode||T.dialogFactory.snsDialog()})),u("#mobile-sns-btn").on("click",(function(){E.default.isAnnotMode||T.dialogFactory.snsDialog()})),c.Util.bindClickOrTouchEvent(u("#mobile-sns-btn"),"scroll-blind__more-item--hover",(function(){u("#more-submenu").toggle()}))}},this.bindInfoBtn=function(){var e=window.localSynap.config;if(!1!==e.isShowInfo){var t=function(){return T.docInfo.metadata&&T.docInfo.metadata.length>0?T.docInfo.metadata:null},n=function(){return e.companyName?e.companyName:null};u("#mobile-info-btn").removeClass("hide"),u("#info-btn").removeClass("hide"),c.Util.bindClickEvent(document.getElementById("info-btn"),(function(){E.default.isAnnotMode||(u("#info-btn__img").addClass("info-btn__img--on"),T.dialogFactory.infoDialog(n(),t(),(function(){u("#info-btn__img").removeClass("info-btn__img--on")})))})),c.Util.bindClickOrTouchEvent(u("#mobile-info-btn"),"scroll-blind__more-item--hover",(function(){u("#info-btn__img").addClass("info-btn__img--on"),u("#more-submenu").toggle(),T.dialogFactory.infoDialog(n(),t(),(function(){u("#info-btn__img").removeClass("info-btn__img--on")}))}))}},this.hideMoreSubMemu=function(){u("#more-submenu").hide(),u("#more-btn__img").removeClass("more-btn__img--on")},this.bindMoreBtn=function(){var e=u("#more-submenu");c.Util.bindClickEvent(document.getElementById("more-btn"),(function(){E.default.isAnnotMode||(u("#more-submenu").is(":visible")?T.hideMoreSubMemu():(e.show(),u("#more-btn__img").addClass("more-btn__img--on")))})),u(document).on("click keydown",(function(e){"more-btn"===e.target.id||e.target.parentElement&&"more-btn"===e.target.parentElement.id||"string"==typeof e.target.className&&e.target.className.indexOf("scroll-blind__more-item")>-1||T.hideMoreSubMemu()}))},this.downloadBtnLoad=function(e){u("#download-btn > a").attr("href",e),u("#download-btn").removeClass("hide"),c.Util.bindEnterKey(document.getElementById("download-btn"),(function(){location.href=e})),u("#mobile-download-btn").parent().attr("href",e),u("#mobile-download-btn").removeClass("hide"),c.Util.bindClickOrTouchEvent(u("#mobile-download-btn"),"scroll-blind__more-item--hover")},this.addLaserCursor=function(e){e.style.cursor="",c.Util.addClass(e,"cursor-laser-icon")},this.removeLaserCursor=function(e){e.style.cursor="pointer",c.Util.removeClass(e,"cursor-laser-icon")},this.laserStart=function(e){T.addLaserCursor(e.currentTarget)},this.laserEnd=function(e){T.removeLaserCursor(e.currentTarget)},this.laserMove=function(e){if("touch"===e.pointerType||0!==e.pressure){var t=e.currentTarget;""!=t.style.cursor&&"pen"!==e.pointerType&&"touch"!==e.pointerType&&T.addLaserCursor(t);var n=c.Util.isCellSkin(T.docInfo),o=c.Util.getIdxFromElmId(t.id,"markerlayer"),i=I.default.instance.getDocumentRatio(o,n),r={x:e.offsetX*i,y:e.offsetY*i};T.eventObserver.moveLaserCb.notify({type:0,content:{page:o,axis:r}})}},this.laserEventBind=function(e){e.addEventListener("pointerdown",T.laserStart),e.addEventListener("pointermove",T.laserMove),e.addEventListener("pointerup",T.laserEnd),e.style.zIndex="17",e.style.cursor="pointer",e.style.touchAction="none"},this.bindLaserBtn=function(){if(document.getElementById("laser-btn")){var e=document.getElementById("laser-btn"),t=document.getElementById("laser-btn__img");c.Util.removeClass(e,"hide");var n=c.Util.isCellSkin(T.docInfo),o=function(e){var t=0,o=0;n?o=(t=T.docInfo.currentSheet)+1:(t=0,o=T.docInfo.status.pageNum);for(var i=t;i<o;i++){var r=document.getElementById("markerlayer"+i);r||console.log("Not find markerlayer"+i),e?T.laserEventBind(r):(r.removeEventListener("pointerdown",T.laserStart),r.removeEventListener("pointermove",T.laserMove),r.removeEventListener("pointerup",T.laserEnd),r.style.zIndex="",r.style.touchAction="",T.removeLaserCursor(r))}};e.addEventListener("click",(function(){if(c.Util.containClassName(t,"laser-btn__img--on"))c.Util.removeClass(t,"laser-btn__img--on"),o(!1);else{if(E.default.isAnnotMode)return;c.Util.addClass(t,"laser-btn__img--on"),o(!0)}}))}},this.getHeaderCssName=function(e){var t=document.documentElement.clientWidth,n=document.documentElement.clientHeight,o=n>t?t:n,i=n>t?n:t,r=[400,600,800,1e3],a=[500,700,900,1100,1300],s=Math.round((o-r[0])/200),l=Math.round((i-a[0])/200);return s<0?s=0:s>r.length-1&&(s=r.length-1),l<0?l=0:l>a.length-1&&(l=a.length-1),["html-"+e+"-"+r[s]+"-P","html-"+e+"-"+a[l]+"-L"]},this.setHeaderCss=function(e){var t=T.getHeaderCssName(e);u(".wrap").addClass("html").addClass(t[0]).addClass(t[1]),u(".modal").addClass("html").addClass(t[0]).addClass(t[1])},this.getDocumentWidth=function(){var e=[500,650,800,1e3],t=T.docInfo.status.documentWidth?Math.ceil(T.docInfo.status.documentWidth*(96/72)):e[e.length-1],n=Math.ceil((t-e[0])/150);return n<0?n=0:n>e.length-1&&(n=e.length-1),t=e[n]},this.bindWindowCloseBtnLoad=function(){var e=u("#mobile-window-close-btn");e.removeClass("hide"),e.on(c.Util.getClickEventName(),(function(e){e.preventDefault(),window.close()})),e.html(d.LocaleMessage.getMessage("msg_window_close"))},this.initViewportContent=function(){c.Util.needDocumentFitCss(T.docInfo)?(b.ScaleEvent.setDocumentWidth(T.getDocumentWidth()),T.setHeaderCss(b.ScaleEvent.getDocumentWidth()),T.viewportContent="width="+b.ScaleEvent.getDocumentWidth()+", minimum-scale=0.3"):T.viewportContent=c.Util.getDefaultViewPortString()},this.adjustMobileDeviceViewport=function(){document.querySelector('meta[name="viewport"]').setAttribute("content",T.viewportContent)},this.bindBgcolorBtn=function(){var e=function(){E.default.isAnnotMode||(t.bgColorMode===r.lightScreen?(t.bgColorMode=r.darkScreen,"cell"===T.docInfo.skinType?u(".cell__piece").removeClass("img-loading-bright"):(u(".img-loading-bright").addClass("img-loading"),u(".img-loading").removeClass("img-loading-bright"))):(t.bgColorMode=r.lightScreen,"cell"===T.docInfo.skinType?u(".cell__piece").addClass("img-loading-bright"):(u(".img-loading").addClass("img-loading-bright"),u(".img-loading-bright").removeClass("img-loading"))),c.Util.isMobileMode()&&T.hideMoreSubMemu(),T.eventObserver.bgColor.notify(t.bgColorMode))};c.Util.bindClickEvent(document.getElementById("backgroundcolor-btn"),e),c.Util.bindClickOrTouchEvent(u("#mobile-bgcolor-btn"),"scroll-blind__more-item--hover",e)},this.bgColor=function(e){switch(e){case r.darkScreen:t.bgColorMode=r.darkScreen,u(document.body).removeClass("wrap__contents--bgcolor-light"),u("#contents").removeClass("wrap__contents--bgcolor-light"),u("#mobile-bgcolor-btn").html(d.LocaleMessage.getMessage("msg_light_backgroundcolor"));break;case r.lightScreen:t.bgColorMode=r.lightScreen,u(document.body).addClass("wrap__contents--bgcolor-light"),u("#contents").addClass("wrap__contents--bgcolor-light"),u("#mobile-bgcolor-btn").html(d.LocaleMessage.getMessage("msg_dark_backgroundcolor"))}},this.mobilePageAreaLoad=function(e){if(u("#total-page").html(String(e)),v.Browser.instance.isIOS){var t=document.createElement("select");t.id="page__select",t.className="page__select";for(var n=1;n<=e;n++){var o=document.createElement("option");o.id="pagelist"+n,o.value=n,o.innerHTML=n,t.appendChild(o)}document.getElementById("header-page").appendChild(t),document.getElementById("select-arrow").addEventListener("click",(function(){document.getElementById("page__select").focus()})),document.getElementById("page__select").addEventListener("change",(function(){T.eventObserver.page.notify({pageNum:document.getElementById("page__select").selectedIndex,isScroll:!1}),T.hide3secHeaderAndThumb()})),u("#page__input").addClass("page__input--ios")}else{var i=u("#page-content"),r=function(){if(c.Util.isMobileMode()&&(i.toggle(),!i.is(":hidden"))){var e=c.Util.isHtmlSkin(T.docInfo)?c.Util.getHeadScale(".wrap__header__container"):1;u("#page-scroll-blind__list").scrollTop((u("#pagelist"+(T.docInfo.currentPage+1)).position().top-u("#pagelist1").position().top)/e),u(".page-scroll-blind__item").removeClass("page-scroll-blind--focus"),u("#pagelist"+(T.docInfo.currentPage+1)).addClass("page-scroll-blind--focus")}};c.Util.bindClickEvent(document.getElementById("select-arrow"),r),u("#page__input").on(c.Util.getClickEventName(),r),u(document).on("click",(function(e){"select-arrow"!==e.target.id&&"select-arrow-img"!==e.target.id&&"page__input"!==e.target.id&&i.hide()}));for(n=1;n<=e;n++)T.addPageSubmenuItem(n)}},this.addPageSubmenuItem=function(e){var t=u("<li/>",{id:"pagelist"+e,class:"page-scroll-blind__item","data-index":e,html:e});u(".page-scroll-blind__list").append(t),c.Util.bindClickOrTouchEvent(u("#pagelist"+e),"page-scroll-blind__item--hover",(function(e){T.movePage(e),T.hide3secHeaderAndThumb()}))},this.hide3secHeaderAndThumb=function(){f.Thumbnail.THUMB_STATUS===f.THUMB_FLAG.off&&(T.eventObserver.mobileHeader.notify(l.ShowActionType.HIDE3SEC),T.eventObserver.mobileThumb.notify(l.ShowActionType.HIDE3SEC))},this.movePage=function(e){var t=typeof e.target.value,n=NaN;if("string"===t){/^[0-9]+$/.test(e.target.value)&&(n=parseInt(e.target.value))}else"number"===t&&(n=e.target.value);if(n-1!=T.docInfo.currentPage){n=0===e.currentTarget.id.indexOf("pagelist")?parseInt(e.currentTarget.getAttribute("data-index")):n;var o=T.docInfo.status.pageNum;isNaN(n)||n<=0||n>o?T.jqPageInput.val(T.docInfo.currentPage+1):T.eventObserver.page.notify({pageNum:n-1,isScroll:!1})}else T.jqPageInput.val(n)},this.focusPage=function(e){if(T.jqPageInput.val(e.pageNum+1),u("#page__input").attr("value",e.pageNum+1),v.Browser.instance.isIOS)document.getElementById("page__select").options[e.pageNum].selected=!0;else if(!u("#page-content").is(":hidden")){var t=c.Util.isHtmlSkin(T.docInfo)?c.Util.getHeadScale(".wrap__header__container"):1;u("#page-scroll-blind__list").scrollTop((u("#pagelist"+(e.pageNum+1)).position().top-u("#pagelist1").position().top)/t),u(".page-scroll-blind__item").removeClass("page-scroll-blind--focus"),u("#pagelist"+(e.pageNum+1)).addClass("page-scroll-blind--focus")}},this.moveSheet=function(e){if(c.Util.isDocslive()&&T.docInfo.cs===w.CS_TYPE.SERVER&&!c.Util.isHtmlSkin(T.docInfo)&&c.Util.isUseAnnotation(T.docInfo)&&!_.ImageSheet.sheetLoadFail){var t=document.getElementById("laser-btn__img");if(c.Util.containClassName(t,"laser-btn__img--on")){var n=document.getElementById("markerlayer"+e.sheetIdx);n?T.laserEventBind(n):setTimeout((function(){T.moveSheet(e)}),100)}}},this.mobileHeader=function(e){clearTimeout(T.mobileHeaderTimer);var t=u(".wrap__header"),n=function(){t.removeClass("wrap__header--hide"),b.ScaleEvent.doScale(c.Util.isHtmlSkin(T.docInfo),c.Util.isUseAnnotation(T.docInfo))};if(e!==l.ShowActionType.SHOW){var o=function(){t.addClass("wrap__header--hide")};e===l.ShowActionType.HIDE?o():e!==l.ShowActionType.HIDE3SEC||E.default.isAnnotMode||(n(),T.mobileHeaderTimer=window.setTimeout((function(){!c.Util.isActiveSearch()&&o()}),3e3))}else n()},this.mobileHeaderHover=function(e){if(!E.default.isAnnotMode&&!c.Util.isActiveSearch())switch(e){case"mouseover":T.eventObserver.mobileHeader.notify(l.ShowActionType.SHOW);break;case"mouseleave":T.eventObserver.mobileHeader.notify(l.ShowActionType.HIDE3SEC)}},this.mouseoverEventBind=function(){u(".wrap__header").on("mouseover.head",(function(){c.Util.isMobileMode()&&!c.Util.isFullScreen()&&"none"===u("#thumbnail").css("display")&&T.mobileHeaderHover("mouseover")})).on("mouseleave.head",(function(){c.Util.isMobileMode()&&!c.Util.isFullScreen()&&"none"===u("#thumbnail").css("display")&&T.mobileHeaderHover("mouseleave")}))},this.setTitle=function(){if(window.localSynap.config.isShowTitle){document.getElementById("header-title-text").textContent=T.docInfo.title,document.getElementById("header-title-text").title=T.docInfo.title;var e=T.fileExtMap[T.docInfo.fileType]?T.fileExtMap[T.docInfo.fileType]:T.fileExtMap[T.docInfo.default];document.getElementById("header-title-icon__img").className+=" "+e,"cell"===T.docInfo.skinType&&document.getElementById("container").clientWidth<330&&(document.getElementById("header-title-text").style.maxWidth="14%"),T.setTitleMaxWidth()}},this.setTitleMaxWidth=function(){if(c.Util.isTabletInCSS()){var e=20,t=["div.wrap__logo","div#header-title-icon","div#header-menu"];c.Util.isCellSkin(T.docInfo)||(t.push("div#header-page"),e+=30);var n=t.map((function(e){return u(e).outerWidth(!0)})).reduce((function(e,t){return e+t}),e);document.getElementById("header-title-text").style.maxWidth="calc(100% - "+n+"px)"}},this.orientationchange=function(){var e=!c.Util.needDocumentFitCss(T.docInfo);v.Browser.instance.isAndroid&&e&&T.initViewportContent(),T.adjustMobileDeviceViewport()},this.resizeWindow=function(){c.Util.isFullScreen()||(c.Util.setVHVariable(),c.Util.isMobileMode()||u("#page-content").removeAttr("style"),document.getElementById("container").clientWidth<330?document.getElementById("header-title-text").style.maxWidth="14%":c.Util.isTabletInCSS()||(document.getElementById("header-title-text").style.maxWidth=""),c.Util.isMobileMode()&&T.viewMode!==h.VIEW_MODE.mobile?(T.subscribeMobileHeader(),f.Thumbnail.THUMB_STATUS===f.THUMB_FLAG.off&&T.eventObserver.mobileHeader.notify(l.ShowActionType.HIDE3SEC),T.viewMode=h.VIEW_MODE.mobile,T.setTotalPageWidth()):c.Util.isMobileMode()||T.viewMode===h.VIEW_MODE.desktop||(clearTimeout(T.mobileHeaderTimer),void 0!==window.localSynap&&!1!==window.localSynap.config.isShowHeader&&u(".wrap__header").removeClass("wrap__header--hide"),T.eventObserver.mobileHeader.unsubscribe(T.mobileHeader),u("#more-submenu").is(":visible")&&T.hideMoreSubMemu(),T.viewMode=h.VIEW_MODE.desktop,T.setTotalPageWidth()))},this.startViewportScroll=function(){E.default.isAnnotMode&&c.Util.addClass(document.getElementById("marker-header"),"hide"),c.Util.headerAutoHide()?c.Util.hasClass(document.getElementById("header"),"wrap__header--hide")||T.eventObserver.mobileHeader.notify(l.ShowActionType.HIDE):c.Util.hasClass(document.getElementById("header"),"wrap__header--hide")||u(".wrap__header").addClass("wrap__header--hide")},this.endViewportScroll=function(e){if(E.default.isAnnotMode&&c.Util.removeClass(document.getElementById("marker-header"),"hide"),h.Page.updateFullscreenCloseBtn(T.docInfo),!c.Util.headerAutoHide())return u(".wrap__header").removeClass("wrap__header--hide"),void b.ScaleEvent.doScale(c.Util.isHtmlSkin(T.docInfo),c.Util.isUseAnnotation(T.docInfo));if(!e){var t=E.default.isAnnotMode||f.Thumbnail.THUMB_STATUS===f.THUMB_FLAG.on;T.eventObserver.mobileHeader.notify(t?l.ShowActionType.SHOW:l.ShowActionType.HIDE3SEC)}},this.setHeaderPagePosition=function(){var e=Math.round(document.documentElement.clientWidth/2/T.headerIconWidth*100);(!c.Util.isMobileMode()||c.Util.isTabletInCSS())&&e<100?document.getElementById("header-page").style.left=e/2+"%":document.getElementById("header-page").style.left=""}}return t.prototype.addScript=function(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.src=e,t.appendChild(n)},t.bgColorMode=r.darkScreen,t.callLaserClient=function(e,n){var o=n.content,i=o.page,r=o.axis,a=I.default.instance.getPageOrCurrentSheetRatio(i,!1),s=r.x*a,l=r.y*a,d=function(e){var t=document.getElementsByClassName("laser");Array.from(t).forEach((function(t){var n=c.Util.getIdxFromElmId(t.id,"laser_c");(e||i!=n)&&(t.style.visibility="hidden")}))};d(!1);var u=document.getElementById("laser_c"+i);if(!u){var h=e?document.getElementById("sheet"):document.getElementById("page-area"+i),f=document.createElement("div");f.id="laser_c"+i,f.className="laser";var m=document.createElement("div");m.className="laser2",f.appendChild(m);var p=document.createElement("div");p.className="laser3",m.appendChild(p),h.appendChild(f),u=f}var g=e?document.getElementById("cell-common"):document.getElementById("page"+i);u.style.visibility="visible",u.style.left=(g.offsetLeft+s-u.offsetWidth/2).toFixed(2)+"px",u.style.top=(l-u.offsetHeight/2).toFixed(2)+"px";clearTimeout(t.laserTimer),t.laserTimer=setTimeout((function(){d(!0)}),3e3)},t}();t.Head=T}).call(this,n(5))},,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DPI=void 0;var o=n(0),i=function(){function e(t){var n,i=this;this.ZOOM_TO_CHANGE_DPI=150,this.initDPI=function(){i.dpi=i.ORIGINAL_DPI,i.ratio=1},this.getDPI=function(){return i.dpi},this.isEqualDPI=function(e){return i.dpi==o.Util.getParameterFromURL(e).dpi},this.isHighDPI=function(){return i.dpi==i.HIGH_DPI},this.changeDPI=function(e){if(i.ORIGINAL_DPI==i.HIGH_DPI)return!1;var t=i.dpi;if(i.dpi!=i.HIGH_DPI&&e>=i.ZOOM_TO_CHANGE_DPI)t=i.HIGH_DPI,i.ratio=i.HIGH_DPI_RATIO;else{if(!(i.dpi==i.HIGH_DPI&&e<i.ZOOM_TO_CHANGE_DPI))return!1;t=i.ORIGINAL_DPI,i.ratio=1}return i.dpi=t,!0},this.hasHighDPIRatio=function(){return null!=i.HIGH_DPI_RATIO},this.setHighDPIRatio=function(e,t){i.HIGH_DPI_RATIO=parseFloat((t/e).toFixed(2))},this.getNewPath=function(e){var t=i.getParam(e);return o.Util.getThumbPath(i.docInfo,e.idx,i.dpi,t)},this.ORIGINAL_DPI=null!==(n=t.dpi)&&void 0!==n?n:o.Util.isServer(t)?e.normalDPI:96,this.initDPI(),this.docInfo=t;var r=Number(this.ORIGINAL_DPI),a=!isNaN(r)&&(r>96||r>=e.HIGH_SERVER_DPI);"H"===this.ORIGINAL_DPI||a?(this.HIGH_DPI=this.ORIGINAL_DPI,this.HIGH_DPI_RATIO=1):(this.HIGH_DPI="H",this.HIGH_DPI_RATIO=null)}return e.thumbDPI="L",e.normalDPI="M",e.highDPI="H",e.SERVER_DPI_LIST=[72,96,120,150,300],e.isValidDPI=function(t){return!!t&&(t!==e.normalDPI&&(t===e.thumbDPI||t===e.highDPI||!isNaN(t)))},e.initDPIFromServer=function(t){e.ORIGINAL_SERVER_DPI=t.serverDpi,e.HIGH_SERVER_DPI=e.ORIGINAL_SERVER_DPI;for(var n=0,o=e.SERVER_DPI_LIST;n<o.length;n++){var i=o[n];if(e.ORIGINAL_SERVER_DPI<i){e.HIGH_SERVER_DPI=i;break}}},e.getDPINumFromServer=function(t){return t===e.thumbDPI?18:t===e.normalDPI?e.ORIGINAL_SERVER_DPI:t===e.highDPI?e.HIGH_SERVER_DPI:-1},e.getServerDPIBasedRatio=function(t){var n=t.dpi;if(void 0===n)return"1";var o=isNaN(n)?e.getDPINumFromServer(n):n,i=e.ORIGINAL_SERVER_DPI;return void 0===i||o==i?"1":(o/i).toFixed(2)},e}();t.DPI=i},function(e,t,n){"use strict";(function(e){var o=this&&this.__awaiter||function(t,n,o,i){return new(o||(o=e))((function(e,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}l((i=i.apply(t,n||[])).next())}))},i=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SEARCH_DISPLAY=t.SEARCH_TYPE=void 0;var r,a,s=n(3),l=n(149),c=n(0),d=n(30),u=n(18),h=n(41),f=n(17),m=n(150),p=n(8),g=n(277);!function(e){e[e.NONE=0]="NONE",e[e.NEXT=1]="NEXT",e[e.PREV=2]="PREV"}(r=t.SEARCH_TYPE||(t.SEARCH_TYPE={})),function(e){e[e.SHOW=0]="SHOW",e[e.HIDE=1]="HIDE"}(a=t.SEARCH_DISPLAY||(t.SEARCH_DISPLAY={}));var v=function(){var e=this;this.docInfo=null,this.eventObserver=null,this.prevSearchResult={},this.DEFAULT_SEARCH_LENGTH=50,this.isSearchFocus=!1,this.searchText=function(t){return o(e,void 0,void 0,(function(){var e,n,o,a=this;return i(this,(function(i){switch(i.label){case 0:return[4,this.loadTextXml(t)];case 1:if(i.sent(),c.Util.isActiveSearch()&&""!=this.jqSearchInput.val()&&void 0!==this.prevSearchResult.textId){for(e=!1,n=0;n<this.prevSearchResult.textId.length&&!(e=this.prevSearchResult.textId[n].indexOf("text"+t)>-1);n++);o=this.jqSearchInput.val().toLowerCase(),e||(this.focusSearchText(event,o,t),setTimeout((function(){a.focusSearchText(event,o,t+1,r.NEXT),a.focusSearchText(event,o,t-1,r.PREV)}),20))}return setTimeout((function(){a.removeTextDiv(t)}),20),[2]}}))}))},this.clearSearchResult=function(t){return o(e,void 0,void 0,(function(){var e,n,o,a,l,c=this;return i(this,(function(i){switch(i.label){case 0:if(e=!!t&&!!t.target&&!!t.target.value,n=e?t.target.value.toLowerCase():this.jqSearchInput.val().toLowerCase(),void 0!==this.prevSearchResult.textId&&this.prevSearchResult.query!=n){for(o=document.getElementsByClassName("text--highlight"),a=o.length,l=0;l<a;l++)o[0].className="text";this.prevSearchResult=[]}return 0==n.length?(this.searchMoveBtnDisable("search-next",r.NONE,!0),this.searchMoveBtnDisable("search-prev",r.NONE,!0),s("#search__input").blur(),[2]):this.prevSearchResult.query==n&&this.prevSearchResult?[3,2]:(this.loadSpinner(),[4,this.newSearchText(n)]);case 1:return i.sent(),setTimeout((function(){c.removeSpinner()}),200),[3,3];case 2:this.moveSearchResult(r.NEXT),i.label=3;case 3:return[2]}}))}))},this.searchDisplay=function(t){t!=a.HIDE?e.searchResultShow():e.searchResultHide()},this.searchResultHide=function(){for(var e=document.getElementsByClassName("text--highlight"),t=e.length,n=0;n<t;n++)c.Util.addClass(e[n],"text--hide")},this.searchResultShow=function(){for(var e=document.getElementsByClassName("text--hide"),t=e.length,n=0;n<t;n++)c.Util.removeClass(e[0],"text--hide")},this.newSearchText=function(t){return o(e,void 0,void 0,(function(){var e,n,o,a,l,c,d,h,p,g,v,b;return i(this,(function(i){switch(i.label){case 0:e=this.docInfo.currentPage,n=e,o=this.docInfo.status.pageNum-1,a=m.TextLayer.getLocalStorageText(this.docInfo.jobId),l=[],c=!1,d=!1,i.label=1;case 1:return n>=0&&n<=o?[4,this.search(t,n)]:[3,8];case 2:if(l=i.sent(),d&&0==l.length&&n<=0)return c=!0,[3,8];if(0==l.length&&n===o){if(0==e)return c=!0,[3,8];n=e,d=!0}return 0!=l.length?[3,6]:(d?n--:n++,a[n]?[3,5]:[4,f.default.getXml(this.docInfo,n,this.docInfo.dpi)]);case 3:return null==i.sent().result?[3,1]:[4,this.setTextObjectAndLocalStorage(n,a)];case 4:i.sent(),i.label=5;case 5:return[3,7];case 6:return[3,8];case 7:return[3,1];case 8:if(c&&void 0===this.prevSearchResult.textId)return s("#search__input").addClass("search__input--notfound"),s("#search__input").val(u.LocaleMessage.getMessage("empty-searchword")),this.searchMoveBtnDisable("search-next",r.NONE,!0),this.searchMoveBtnDisable("search-prev",r.NONE,!0),s("#search__input").blur(),[2];for(this.searchMoveBtnEnable("search-next"),this.searchMoveBtnEnable("search-prev"),h=[],p=0;p<l.length;p++){for(g=l[p],v=0;v<t.length;v++)(b=s("#text-"+n+"-"+(g+v))).hasClass("text--highlight")||(b.addClass("text--highlight"),0==p&&b.addClass("text--current")),0==p&&0==v&&(this.isSearchFocus=!0,this.prevSearchResult.highlight="text-"+n+"-"+g);h.push("text-"+n+"-"+g)}return 0!=h.length&&(this.prevSearchResult.query=t,this.prevSearchResult.textId=h),this.eventObserver.page.notify({pageNum:n,isScroll:!0}),[2]}}))}))},this.focusSearchText=function(t,n,a,l){return void 0===n&&(n=null),void 0===a&&(a=null),void 0===l&&(l=r.NONE),o(e,void 0,void 0,(function(){var e,o,c,d,h,m,p,g,v,b,E,y;return i(this,(function(i){switch(i.label){case 0:return e=null!=n?n:t.target.value.toLowerCase(),o=null==a?this.docInfo.currentPage:a,c=this.docInfo.status.pageNum-1,d=[],h=!1,m=l!=r.PREV,o<0||o>c?[2]:[4,this.search(e,o)];case 1:if(0==(d=i.sent()).length&&(h=!0),h&&void 0===this.prevSearchResult.textId)return s("#search__input").addClass("search__input--notfound"),s("#search__input").val(u.LocaleMessage.getMessage("empty-searchword")),s("#search__input").blur(),[2];for(p=[],g=0;g<d.length;g++){for(v=d[g],b=0;b<e.length;b++)(E=s("#text-"+o+"-"+(v+b))).hasClass("text--highlight")||E.addClass("text--highlight");p.push("text-"+o+"-"+v)}return y=f.default.parseTextId(this.prevSearchResult.highlight).pageNum>o,0!=p.length&&(this.prevSearchResult.query=e,null!=this.prevSearchResult.textId&&0!=this.prevSearchResult.textId.length&&this.prevSearchResult.textId.indexOf(p[0])<0&&(this.prevSearchResult.textId=!m||y?p.concat(this.prevSearchResult.textId):this.prevSearchResult.textId.concat(p)),this._updateCurrentTextHighlight(e,this.prevSearchResult.highlight)),[2]}}))}))},this.moveSearchText=function(t,n,a){return void 0===t&&(t=null),void 0===n&&(n=null),void 0===a&&(a=r.NEXT),o(e,void 0,void 0,(function(){var e,o,l,c,d,h,p,g,v,b,E,y,I,w;return i(this,(function(i){switch(i.label){case 0:e=t,o=null==n?this.docInfo.currentPage:n,l=this.docInfo.status.pageNum-1,c=m.TextLayer.getLocalStorageText(this.docInfo.jobId),d=[],h=!1,p=a!=r.PREV,i.label=1;case 1:return o>=0&&o<=l?[4,this.search(e,o)]:[3,8];case 2:return 0==(d=i.sent()).length&&o===l||!p&&0==d.length&&o<=0?(h=!0,[3,8]):0!=d.length?[3,6]:(p?o++:o--,c[o]?[3,5]:[4,f.default.getXml(this.docInfo,o,this.docInfo.dpi)]);case 3:return null==i.sent().result?[3,1]:[4,this.setTextObjectAndLocalStorage(o,c)];case 4:i.sent(),i.label=5;case 5:return[3,7];case 6:return[3,8];case 7:return[3,1];case 8:if(h&&void 0===this.prevSearchResult.textId)return s("#search__input").addClass("search__input--notfound"),s("#search__input").val(u.LocaleMessage.getMessage("empty-searchword")),s("#search__input").blur(),[2];if(h&&a!=r.NONE)return a==r.NEXT?(this.searchMoveBtnDisable("search-next",a),1!==this.prevSearchResult.textId.length&&this.searchMoveBtnEnable("search-prev")):(this.searchMoveBtnDisable("search-prev",a),1!==this.prevSearchResult.textId.length&&this.searchMoveBtnEnable("search-next")),[2];if(0!=d.length)for(g=f.default.parseTextId(this.prevSearchResult.highlight),E=0;E<e.length;E++)v=m.TextLayer.getTextId(g.pageNum,g.idx+E),s("#"+v).removeClass("text--current"),s("#"+v).addClass("text--highlight");return[4,this.createTextLayerAndText(o)];case 9:for(i.sent(),b=[],E=0;E<d.length;E++){for(y=d[E],I=0;I<e.length;I++)(w=s("#text-"+o+"-"+(y+I))).hasClass("text--highlight")||(w.addClass("text--highlight"),0==E&&p?(this.isSearchFocus=!0,w.addClass("text--current")):E!=d.length-1||p||(this.isSearchFocus=!0,w.addClass("text--current"))),0==E&&0==I&&p?this.prevSearchResult.highlight="text-"+o+"-"+y:E!=d.length-1||0!=I||p||(this.prevSearchResult.highlight="text-"+o+"-"+y);b.push("text-"+o+"-"+y)}return 0!=b.length&&(this.prevSearchResult.query=e,null!=this.prevSearchResult.textId&&0!=this.prevSearchResult.textId.length&&this.prevSearchResult.textId.indexOf(b[0])<0&&(a==r.PREV?this.prevSearchResult.textId=b.concat(this.prevSearchResult.textId):this.prevSearchResult.textId=this.prevSearchResult.textId.concat(b))),this.eventObserver.page.notify({pageNum:o,isScroll:!1}),this.prevSearchResult.textId[0]==this.prevSearchResult.highlight&&this.prevSearchResult.highlight==this.prevSearchResult.textId[this.prevSearchResult.textId.length-1]||(this.searchMoveBtnEnable("search-prev"),this.searchMoveBtnEnable("search-next")),[2]}}))}))},this.createTextLayerAndText=function(t){return o(e,void 0,void 0,(function(){var e,n;return i(this,(function(o){switch(o.label){case 0:return document.getElementById("annotationlayer"+t)?[3,5]:[4,this.removeTextDiv(t)];case 1:o.sent(),e=f.default.getAnnotLoadingRange(this.docInfo,t),n=e.startIdx,o.label=2;case 2:return n<e.endIdx?[4,this.createAnnotationLayer(n)]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return document.getElementById("textLayer"+t)?[3,7]:[4,this.loadTextXml(t)];case 6:o.sent(),o.label=7;case 7:return[2]}}))}))},this.removeTextDiv=function(t){return o(e,void 0,void 0,(function(){var e,n,o;return i(this,(function(i){for(e=f.default.getAnnotLoadingRange(this.docInfo,t),n=0;n<this.docInfo.status.pageNum;n++)n>=e.startIdx&&n<e.endIdx||(o=s("#textLayer"+n))&&o.remove();return[2]}))}))},this.search=function(t,n){return o(e,void 0,void 0,(function(){var e;return i(this,(function(o){return void 0===(e=m.TextLayer.getLocalStorageText(this.docInfo.jobId)[n])?[2,[]]:[2,g.kmp(Array.from(e),Array.from(t))]}))}))},this.moveSearchResult=function(t){return o(e,void 0,void 0,(function(){var e,n,o,a=this;return i(this,(function(i){switch(i.label){case 0:return t==r.NONE||0==(e=this.jqSearchInput.val().toLowerCase()).length?[2]:this.prevSearchResult.query==e&&this.prevSearchResult?[3,2]:(this.loadSpinner(),[4,this.clearSearchResult(event)]);case 1:return i.sent(),setTimeout((function(){a.removeSpinner()}),200),[2];case 2:return n=this.getSearchIndex(e,t),o=n.pageIdx,n.result?[3,4]:-1===o?(this.searchMoveBtnDisable("search-prev",t),1!==this.prevSearchResult.textId.length&&this.searchMoveBtnEnable("search-next"),[2]):this.docInfo.status.pageNum===o?(this.searchMoveBtnDisable("search-next",t),1!==this.prevSearchResult.textId.length&&this.searchMoveBtnEnable("search-prev"),[2]):(this.loadSpinner(),[4,this.moveSearchText(e,o,t)]);case 3:return i.sent(),setTimeout((function(){a.removeSpinner()}),200),[3,5];case 4:this.isSearchFocus=!0,this._updateCurrentTextHighlight(e,n.updateIdx),this.docInfo.currentPage!=o&&this.eventObserver.page.notify({pageNum:o,isScroll:!0}),this.prevSearchResult.textId[0]==this.prevSearchResult.highlight&&this.prevSearchResult.highlight==this.prevSearchResult.textId[this.prevSearchResult.textId.length-1]||(this.searchMoveBtnEnable("search-prev"),this.searchMoveBtnEnable("search-next")),i.label=5;case 5:return[2]}}))}))},this._updateCurrentTextHighlight=function(t,n){return o(e,void 0,void 0,(function(){var e,o,r,a,l;return i(this,(function(i){switch(i.label){case 0:for(e=f.default.parseTextId(this.prevSearchResult.highlight),a=0;a<t.length;a++)o=m.TextLayer.getTextId(e.pageNum,e.idx+a),s("#"+o).removeClass("text--current"),s("#"+o).addClass("text--highlight");return r=f.default.parseTextId(n),[4,this.createTextLayerAndText(r.pageNum)];case 1:for(i.sent(),a=0;a<t.length;a++)l=m.TextLayer.getTextId(r.pageNum,r.idx+a),s("#"+l).addClass("text--current");return this.isSearchFocus&&(this.searchScroll(m.TextLayer.getTextId(r.pageNum,r.idx),r.pageNum),this.isSearchFocus=!1),null!=n&&(this.prevSearchResult.highlight=n),[2]}}))}))},this.getSearchIndex=function(t,n){var o=!1,i=e.prevSearchResult.highlight,a=f.default.parseTextId(e.prevSearchResult.highlight),s=e.docInfo.currentPage===a.pageNum?e.docInfo.currentPage:a.pageNum,l=null;if(void 0!==e.prevSearchResult.textId&&e.prevSearchResult.query===t){var c=e.prevSearchResult.textId.indexOf(i);n==r.NEXT?(l=e.prevSearchResult.textId[c+1],s+=1):(l=e.prevSearchResult.textId[c-1],s-=1),void 0!==l&&(o=!0,s=f.default.parseTextId(l).pageNum)}return{result:o,pageIdx:s,updateIdx:l}},this.searchEvent=function(){e.jqSearchInput=s("#search__input");var t,n=s("#search__label");e.jqSearchInput.on("keydown",(function(o){clearTimeout(t),n.is(":visible")&&n.hide(),t=setTimeout((function(){"Enter"===o.key&&e.clearSearchResult(o)}),10)})),e.jqSearchInput.on("input",(function(t){n.is(":visible")&&n.hide(),t.target.value.length>e.DEFAULT_SEARCH_LENGTH&&(h.default.instance.confirmDialog("input_limit_searchword","msg_submit",(function(){e.jqSearchInput.trigger("focus"),h.default.instance.remove()})),t.target.value=t.target.value.slice(0,e.DEFAULT_SEARCH_LENGTH))})),e.jqSearchInput.on("focus",(function(){s("#search__input").hasClass("search__input--notfound")&&(s("#search__input").removeClass("search__input--notfound"),s("#search__input").val("")),n.is(":visible")&&n.hide(),e.searchMoveBtnEnable("search-next"),e.searchMoveBtnEnable("search-prev")})),e.jqSearchInput.on("focusout",(function(){""==s("#search__input").val()&&n.show()})),c.Util.disableKeyEventForPageMove(document.getElementById("search__input"))},this.searchMoveBtnDisable=function(e,t,n){void 0===n&&(n=!1),s("#"+e+"__img").addClass(e+"--disable"),s("#"+e).removeClass("search-control--hover"),s("#"+e).prop("disabled",!0),n?h.default.instance.confirmDialog("empty-searchword"):t==r.PREV?h.default.instance.confirmDialog("none_prev_search"):h.default.instance.confirmDialog("none_next_search")},this.searchMoveBtnEnable=function(e){s("#"+e+"__img").removeClass(e+"--disable"),s("#"+e).prop("disabled",!1)},this.loadSpinner=function(){var e={lines:11,length:0,width:12,radius:30,scale:1.25,corners:.5,color:"#435c85",opacity:.25,rotate:0,direction:1,speed:1,trail:65,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:c.Util.isMobileMode()||d.Thumbnail.THUMB_STATUS==d.THUMB_FLAG.off?"50%":s("#thumbnail").outerWidth()+s("#contents").width()/2+"px",shadow:!1,hwaccel:!1,position:"fixed"},t=document.createElement("div");t.setAttribute("class","inner loading_spinner "),document.getElementById("contents").appendChild(t),new l(e).spin(t)},this.removeSpinner=function(){setTimeout((function(){s(".loading_spinner").remove()}),50)},this.searchScroll=function(e,t){p.annotScrollMove(e,t,!1)},this.eventBind=function(){e.eventObserver.searchNext.subscribe(e.moveSearchResult),e.eventObserver.searchText.subscribe(e.searchText),e.eventObserver.searchDisplay.subscribe(e.searchDisplay),e.searchEvent()},this.load=function(t,n,o,i,r){e.docInfo=t,e.eventObserver=n,e.setTextObjectAndLocalStorage=o,e.createAnnotationLayer=i,e.loadTextXml=r,e.eventBind()}};t.default=v}).call(this,n(5))},function(e,t,n){"use strict";(function(e){var o=this&&this.__awaiter||function(t,n,o,i){return new(o||(o=e))((function(e,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}l((i=i.apply(t,n||[])).next())}))},i=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.popUpPos=t.annotPos=t.getAnnotArea=t.enableEvent=t.disableEvent=void 0;var r=n(3),a=n(39),s=n(0),l=n(1),c=n(17),d=n(8),u=n(31),h=n(264),f=n(103),m=n(265),p=n(29),g=n(18),v=n(60),b=n(266),E=n(19),y=n(75),I=n(61),w=n(74),_=n(269);function S(e){var t=Array.prototype.slice.call(e);s.Util.addClasses(t,"disableEvent")}function T(e){var t=Array.prototype.slice.call(e);s.Util.removeClasses(t,"disableEvent")}t.disableEvent=S,t.enableEvent=T,t.getAnnotArea=function(e,t,n){var o=n?document.getElementById("cell-common"):document.getElementById("page"+t),i=n?document.getElementById("cell-common"):document.getElementById("page-area"+t),r=function(){return e?0:o.offsetLeft},a=function(){return e?0:i.offsetTop};return{left:r,right:function(){return r()+o.offsetWidth},top:a,bottom:function(){return a()+o.offsetHeight}}},t.annotPos=function(e,t,n,o,i,r,a,l){var c=i,d=r-e,u=a,h=l-t,f=n,m=o,p=n,g=o,v=function(){return s.Util.rangeVal(p,c,d)},b=function(){return s.Util.rangeVal(g,u,h)},E=function(){return f-v()},y=function(){return m-b()};return{getLeft:v,getTop:b,setPos:function(e,t){p-=e,g-=t},getMoveX:E,getMoveY:y,isMove:function(){return Math.abs(E())>5||Math.abs(y())>5}}},t.popUpPos=function(e,t,n,o,i,r){void 0===r&&(r=void 0);var a=s.Util.isCellSkin(o),c=a?0:document.getElementById("page-area"+i).offsetTop,d=document.getElementById("contents"),u=E.ScaleEvent.isSupportScale()&&!E.ScaleEvent.isDefaultBrowserScale(),h=s.Util.isMobileMode()&&l.Browser.instance.isIOS?Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop):d.scrollTop;if(void 0===r){r=function(){if(u){var t=s.Util.getInnerHeight(),n=e.obj.getBoundingClientRect(),o=n.top,i=n.height;l.Browser.instance.isIOS&&(o+=s.Util.getPageYOffset());var r=o+i;return o-s.Util.getPageYOffset()>=s.Util.getPageYOffset()+t-r}var a=d.offsetHeight,f=c+e.top-h;return f>=a-(f+e.height)}()}var f,m,p,g,v,b,y,I,w,_,S,T,x,C;return{isTopPos:r,left:(v=a?document.getElementById("sheet"):document.getElementById("page-area"+i),b=a?document.getElementById("cell-common"):document.getElementById("page"+i),y=s.Util.isMobileMode()&&l.Browser.instance.isIOS?document.scrollingElement.scrollLeft:d.scrollLeft,I=y+(u&&l.Browser.instance.isAndroid?s.Util.getPageXOffset():0),w=Math.min(v.clientWidth,s.Util.getInnerWidth()),_=Math.min(b.clientWidth,s.Util.getInnerWidth()),S=a||w-_<0?0:(w-_)/2,T=!u||l.Browser.instance.isAndroid&&a?e.left:e.obj.getBoundingClientRect().left+y,x=(u?0:S)+T+e.width/2-t/2,C=I+w,T+e.width<I||T>C?x:s.Util.rangeVal(x,I,C-t)),top:(f=d.clientHeight,m=c+e.top,p=m+e.height,g=r?m-n:p+n,g<h||g-h>f?h:r?m-n:p)}};var x=function(){function n(){var E=this;this.activeMarker=null,this.drawingTool=null,this.drawingTools={ink:null,square:null,memo:null,line:null,circle:null,arrowline:null},this.selectedType=void 0,this.annotCloseBtn=document.getElementById("annotation-close"),this.pencilBtn=document.getElementById("marker-pencil-btn"),this.squareBtn=document.getElementById("marker-square-btn"),this.memoBtn=document.getElementById("marker-memo-btn"),this.shapesBtn=document.getElementById("marker-shapes-btn"),this.lineBtn=document.getElementById("marker-line-btn"),this.handBtn=document.getElementById("marker-hand-scroll-btn"),this.circleBtn=document.getElementById("marker-circle-btn"),this.arrowlineBtn=document.getElementById("marker-arrowline-btn"),this.cursorIcon="cursor-ie-icon",this.menuSelect="marker-menu--select",this.menuMoreProp="more-prop",this.subShapes=["square","line","circle","arrowline"],this.eraser=null,this.createDrawingTool=function(e){switch(e){case"square":E.drawingTools[e]=new h.DrawingSquare(E.marker,E.eventObserver,E.markerAttr,E.saveDrawing,s.Util.isCellSkin(E.docInfo));break;case"ink":E.drawingTools[e]=new f.DrawingInk(E.marker,E.eventObserver,E.markerAttr,E.saveDrawing,s.Util.isCellSkin(E.docInfo));break;case"memo":E.drawingTools[e]=new m.DrawingMemo(E.marker,E.eventObserver,E.markerAttr,E.saveDrawing,s.Util.isCellSkin(E.docInfo));break;case"line":E.drawingTools[e]=new b.DrawingLine(E.marker,E.eventObserver,E.markerAttr,E.saveDrawing,s.Util.isCellSkin(E.docInfo),!1);break;case"circle":E.drawingTools[e]=new _.DrawingCircle(E.marker,E.eventObserver,E.markerAttr,E.saveDrawing,s.Util.isCellSkin(E.docInfo));break;case"arrowline":E.drawingTools[e]=new b.DrawingLine(E.marker,E.eventObserver,E.markerAttr,E.saveDrawing,s.Util.isCellSkin(E.docInfo),!0);break;default:E.drawingTools[e]=new f.DrawingInk(E.marker,E.eventObserver,E.markerAttr,E.saveDrawing,s.Util.isCellSkin(E.docInfo))}},this.getDrawingTool=function(e){return E.drawingTools[e]||E.createDrawingTool(e),E.drawingTools[e]},this.getCurMarkerSection=function(){return E.drawingTool&&E.drawingTool.getCurMarkerSection()},this.renderMarker=function(e,t,n){E.eraser&&w.DrawingEraser.isActive&&w.layerEventBind(E.eraser,n);var o=n.getElementsByClassName("marker-scale")[0],i=E.getDrawingTool(c.getAnnotType(t.annot)),r=d.default.createtMarkerId(e,t.id);document.getElementById(r)||E.createMarker(i,o,t.annot,e,t.id)},this.markerDragEventBind=function(e,n){var o=0,i=0,r=0,l=0,h=E.eventObserver,f=n.id,m=d.default.parseMarkerId(f),g=m.annotId,v=m.pageOrSheetIdx,b=s.Util.isCellSkin(E.docInfo),I=E.marker.getAnnotationInfo(v,g).annot,w=function(){return p.default.instance.getPageOrCurrentSheetRatio(v,b)*c.default.DPI_RATIO},_=t.getAnnotArea(!0,v,b),S=_.left,T=_.right,x=_.top,C=_.bottom,M=t.annotPos(parseFloat(I.w),parseFloat(I.h),parseFloat(I.l),parseFloat(I.t),S(),T()/w(),x(),C()/w());e.call(a.drag().on("start",(function(){if(!y.MemoContent.isShow()){var e=E.marker.getAnnotationInfo(v,g).annot;r=a.event.x,l=a.event.y,M=t.annotPos(parseFloat(e.w),parseFloat(e.h),parseFloat(e.l),parseFloat(e.t),S(),T()/w(),x(),C()/w()),h.dragAnnotStart.notify({elemId:f})}})).on("drag",(function(){y.MemoContent.isShow()||(o=r-a.event.x,i=l-a.event.y,r=a.event.x,l=a.event.y,M.setPos(o/w(),i/w()),o&&e.style("left",M.getLeft()-u.DrawingTool.VIEWBOX_RANGE+"px"),i&&e.style("top",M.getTop()-u.DrawingTool.VIEWBOX_RANGE+"px"))})).on("end",(function(){if(!y.MemoContent.isShow()){if(M.isMove()){var e=E.marker.getAnnotationInfo(v,g).annot,t={left:M.getLeft().toFixed(2),top:M.getTop().toFixed(2),path:E.getDrawingTool(c.getAnnotType(e)).moveMarker(e,M.getMoveX(),M.getMoveY())};E.eventObserver.modifyMarkerAttr.notify({elemId:f,attr:t})}h.dragAnnotEnd.notify({page:v,annotId:g,showPopup:!0,ratio:w()})}})))},this.markerInactive=function(){if(E.activeMarker){if(E.activeMarker instanceof SVGSVGElement){var e=a.select(E.activeMarker);e.classed("active",!1),e.on(".drag",null),e.on("mouseover",(function(){this.style.cursor="pointer"})),E.eventObserver.closeProp.notify(),E.styleMenu.setMarkerAttributes(E.markerAttr,E.hasFill()),E.hideShapeMenu()}E.activeMarker=null}},this.markerActiveEvent=function(e,t){if(E.activeMarker=t,!(t instanceof HTMLDivElement)&&(e.classed("active",!0),e.on("mouseover",(function(){this.style.cursor="move"})),d.default.isAnnotMode)){var n=d.default.parseMarkerId(E.activeMarker.id),o=n.pageOrSheetIdx,i=n.annotId,r=E.marker.getAnnotationInfo(o,i);if(r&&"memo"!==c.getAnnotType(r.annot)){E.drawingTool=E.getDrawingTool(c.getAnnotType(r.annot)),E.selectedType=c.getAnnotType(r.annot);var a=E.drawingTool.getMarkerStyleAttr(r,c.default.DPI_RATIO);a.color=v.default.getRgbToColorType(a.color),a.innerColor&&(a.innerColor=v.default.getRgbToColorType(a.innerColor)),E.styleMenu.setMarkerAttributes(a,E.hasFill())}E.markerDragEventBind(e,t)}},this.markerInactiveEventBind=function(){var e=null;!l.Browser.instance.isMobile&&document.addEventListener("mousedown",(function(t){e=t.target}),!1),document.addEventListener(s.Util.getClickOrTouchEventName(),(function(t){var o=e||t.target;e=null;if(!function(){for(var e in n.selectAnnotElm)if(s.Util.hasClassForEventTargetEl(o,e,n.selectAnnotElm[e]))return!0;return!1}()){if(o.id){var i=o.id;if("annotation-list-btn"===i||i.indexOf("annotation-memo")>-1)return;var r=o.className;if("string"==typeof r&&r.indexOf("annotation-list-btn__img")>-1)return}s.Util.hasClassForEventTargetEl(o,"prop-submenu",6)||E.eventObserver.unSelectAnnotation.notify()}}),!1)},this.createMarker=function(e,t,n,o,i){var r=d.default.createtMarkerId(o,i),a=e.createSvg(t,n,r);if("memo"!=c.getAnnotType(n)){var s=E.eventObserver;a.on("click",(function(){s.selectAnnotation.notify({page:o,annotId:i,showMemo:!1,showPopup:!0})})).on("mouseover",(function(){this.style.cursor="pointer"})).on("mouseout",(function(){this.style.cursor="auto"}))}else a.remove()},this.disableScrollForMarkerDraw=function(){l.Browser.instance.isIOS12Lower()&&E.disableTouch(E.marker.MARKER_LAYER,E.marker.getPageIdxWhenInAnnotationMode())},this.disableTouch=function(e,t){if(void 0===t&&(t=0),l.Browser.instance.isMobile)for(var n=c.default.getAnnotLoadingRange(E.docInfo,t),o=n.startIdx,i=n.endIdx,r=o;r<i;r++){document.getElementById(""+e+r).addEventListener("touchmove",s.Util.disableEvent,s.Util.nonPassiveEventListenerOption)}},this.markerDrawEventBind=function(e){void 0===e&&(e=0);for(var t=c.default.getAnnotLoadingRange(E.docInfo,e),n=t.startIdx,o=t.endIdx,i=n;i<o;i++){var r=a.select(document.getElementById("marker-section"+i).getElementsByClassName("tmp-marker-svg")[0]);r.node()||(r=E.createTempSVG(document.getElementById("marker-section"+i))).node().addEventListener(s.Util.getClickStartEventName(),E.hideSubShapes),E.drawingTool.eventBind(r)}},this.setMarkerCursorInMarkerlayer=function(e){void 0===e&&(e=0);for(var t=c.default.getAnnotLoadingRange(E.docInfo,e),n=t.startIdx,o=t.endIdx,i=n;i<o;i++)s.Util.addClass(document.getElementById(""+E.marker.MARKER_LAYER+i),E.cursorIcon)},this.createTempSVG=function(e){return a.select("#"+e.id).append("svg").style("width",e.offsetWidth+"px").style("height",e.offsetHeight+"px").attr("class","tmp-marker-svg")},this.addAfterSave=function(e){var t=e.annot,n=E.getDrawingTool(c.getAnnotType(t.annot));if(n){var o=document.getElementById("marker-section"+e.page);if(o){var i=n.getCurMarkerSection();if(!0===e.rs.success){var a=s.Util.getParentElement(s.Util.getParentElement(o)).getElementsByClassName("marker-scale")[0];E.createMarker(n,a,t.annot,e.page,t.id)}for(var l=0,u=Array.prototype.slice.call(o.getElementsByClassName("tmp-marker-path"));l<u.length;l++){var h=u[l];r(h).remove()}(s.Util.isCellSkin(E.docInfo)||o===i)&&n.clear(),d.default.isDrawingMode||E.removeDrawingModeEvent(!0)}else s.Util.isCellSkin(E.docInfo)&&n.clear()}},this.callAddSave=function(e,t,n){var o=v.default.getTypeToHexColor(E.markerAttr.color),i="none"===v.default.getTypeToHexColor(E.markerAttr.innerColor)?"":v.default.getTypeToHexColor(E.markerAttr.innerColor),r=E.markerAttr.transparency,a=E.drawingTool.createAnnotInfo(void 0,o,i,r.toString(),t,n),s={status:d.ANNOT_STATUS_TYPE.ADD,page:e,annot:a,afterFunc:E.addAfterSave,isUndoRedo:!1};E.eventObserver.saveAnnotationServer.notify(s)},this.hasSaveAnnot=function(){if(!E.drawingTool)return!1;var e=E.drawingTool.getCurMarkerSection();return!!e&&0!==e.getElementsByClassName("tmp-marker-path").length},this.drawMarkerInAnnotationlayer=function(){if(E.hasSaveAnnot()){var e=E.drawingTool.getCurMarkerSection(),t=e.getElementsByClassName("tmp-marker-path")[0],n=s.Util.getParentElement(s.Util.getParentElement(e)).getElementsByClassName("marker-scale")[0],o=s.Util.getParentElement(s.Util.getParentElement(e)).getElementsByClassName("annotationlayer")[0];n||(n=E.marker.appendMarkerScaleElm(o));var i=s.Util.getIdxFromElmId(o.id,"annotationlayer"),r=c.default.getAnnotRatio(i,s.Util.isCellSkin(E.docInfo));E.callAddSave(i,t,r)}},this.gotoDrawingMode=function(){r(".markerlayer").css("z-index",17),d.default.isDrawingMode&&null!==E.getCurMarkerSection()&&(E.eventObserver.editedAnnotation.notify(E.marker.getPageIdxWhenInAnnotationMode()),E.saveDrawing()),E.markerDrawEventBind(E.marker.getPageIdxWhenInAnnotationMode()),l.Browser.instance.isMobile||E.setMarkerCursorInMarkerlayer(E.marker.getPageIdxWhenInAnnotationMode()),d.default.isDrawingMode=!0},this.saveDrawing=function(){c.default.EDITED_ANNOTAION&&E.drawMarkerInAnnotationlayer()},this.removeDrawingModeEvent=function(e){void 0===e&&(e=!1),!e&&r(".tmp-marker-svg").children().length>0||(r(".tmp-marker-svg").remove(),E.drawingTool=null)},this.outDrawingMode=function(){r(".markerlayer").css("z-index",""),r("."+E.cursorIcon).removeClass(""+E.cursorIcon),E.saveDrawing(),E.removeDrawingModeEvent(),d.default.isDrawingMode=!1},this.chkDrawingModeEvent=function(e){d.default.isDrawingMode?(E.drawingTool.getCurMarkerSection()&&E.saveDrawing(),E.drawingTool=E.getDrawingTool(e),E.markerDrawEventBind(E.marker.getPageIdxWhenInAnnotationMode())):(E.drawingTool=E.getDrawingTool(e),E.gotoDrawingMode())},this.addMarkerBtnCssSelect=function(e){s.Util.addClass(document.getElementById(e),E.menuSelect);var t=document.getElementById(e.replace("btn","block"));t&&(document.getElementById(e).offsetWidth!==t.offsetWidth&&(t.style.width=document.getElementById(e).offsetWidth+"px"),s.Util.addClass(t,E.menuMoreProp))},this.removeMarkerBtnCssSelect=function(e){s.Util.removeClass(document.getElementById(e),E.menuSelect);var t=e.replace("btn","block");s.Util.removeClass(document.getElementById(t),E.menuMoreProp)},this.setMarkerMenuSelect=function(e){var t=["select-annotation-btn","marker-pencil-btn","marker-shapes-btn","marker-memo-btn","marker-hand-scroll-btn"];for(var n in t){var o=t[n];E.removeMarkerBtnCssSelect(o)}E.eraser&&E.eraser.eventUnBind(),E.hideSubShapes(),E.addMarkerBtnCssSelect("marker-"+e+"-btn")},this.setMarkerSubShapesItemSelect=function(e){s.Util.addClass(E.shapesBtn,E.menuSelect);for(var t=document.getElementById("marker-menu__sub-shapes").children,n=0;n<t.length;++n){var o=t[n];E.removeMarkerBtnCssSelect(o.id)}E.addMarkerBtnCssSelect("marker-"+e+"-btn");var i=document.getElementById(E.shapesBtn.id+"__img");E.subShapes.forEach((function(e){i.classList.remove("marker-"+e+"-btn__img")})),i.classList.add("marker-"+e+"-btn__img")},this.markerTypeBtnClickEvent=function(e,t,n){void 0===t&&(t=void 0),void 0===n&&(n=void 0);var o=document.getElementById("marker-"+e+"-btn");if(s.Util.hasClass(o,E.menuSelect))E.selectedType=e,n&&n(E.markerAttr,E.hasFill(),o);else{if(t&&t(e),E.eventObserver.closeProp.notify(),d.default.isMarkerLoading)return;var i="pencil"===e?"ink":e;E.chkDrawingModeEvent(i)}},this.markerShapesBtnEventBind=function(){s.Util.bindClickEvent(E.shapesBtn,(function(){var e=document.getElementById("marker-menu__sub-shapes");if(e.classList.contains("hide")&&E.setMarkerMenuSelect("shapes"),!e.classList.toggle("hide")){var t=document.getElementById(E.shapesBtn.id+"__img");E.subShapes.some((function(e){if(t.classList.contains("marker-"+e+"-btn__img"))return document.getElementById("marker-"+e+"-btn").click(),!0}))}}))},this.markerLineBtnEventBind=function(){s.Util.bindClickEvent(E.lineBtn,(function(){E.markerTypeBtnClickEvent("line",E.setMarkerSubShapesItemSelect,E.styleMenu.toggleStyleMenu)}))},this.markerSquareBtnEventBind=function(){s.Util.bindClickEvent(E.squareBtn,(function(){E.markerTypeBtnClickEvent("square",E.setMarkerSubShapesItemSelect,E.styleMenu.toggleStyleMenu)}))},this.markerPencilBtnEventBind=function(){s.Util.bindClickEvent(E.pencilBtn,(function(){E.markerTypeBtnClickEvent("pencil",E.setMarkerMenuSelect,E.styleMenu.toggleStyleMenu)}))},this.markerMemoBtnEventBind=function(){s.Util.bindClickEvent(E.memoBtn,(function(){E.markerTypeBtnClickEvent("memo",E.setMarkerMenuSelect)}))},this.markerCircleEventBind=function(){s.Util.bindClickEvent(E.circleBtn,(function(){E.markerTypeBtnClickEvent("circle",E.setMarkerSubShapesItemSelect,E.styleMenu.toggleStyleMenu)}))},this.markerArrowLineEventBind=function(){s.Util.bindClickEvent(E.arrowlineBtn,(function(){E.markerTypeBtnClickEvent("arrowline",E.setMarkerSubShapesItemSelect,E.styleMenu.toggleStyleMenu)}))},this.selectAnnot=function(){E.clickSelectBtn(),!d.default.isMarkerLoading&&E.outDrawingMode()},this.clickSelectBtn=function(){s.Util.addClass(document.getElementById("select-annotation-btn"),E.menuSelect),E.removeMarkerBtnCssSelect(E.pencilBtn.id),s.Util.removeClass(E.shapesBtn,E.menuSelect),s.Util.removeClass(E.memoBtn,E.menuSelect),s.Util.removeClass(E.handBtn,E.menuSelect),E.eraser&&E.eraser.eventUnBind(),E.hideSubShapes(),E.disableScrollMode()},this.clickHandBtn=function(){s.Util.addClass(E.handBtn,E.menuSelect),E.removeMarkerBtnCssSelect(E.pencilBtn.id),s.Util.removeClass(E.shapesBtn,E.menuSelect),s.Util.removeClass(E.memoBtn,E.menuSelect),s.Util.removeClass(document.getElementById("select-annotation-btn"),E.menuSelect),E.eraser&&E.eraser.eventUnBind(),E.hideSubShapes()},this.hideShapeMenu=function(){(function(){try{var e=window.event.target.id;if(e&&(e.indexOf("marker-pencil")>-1||e.indexOf("marker-shapes")>-1||e.indexOf("marker-memo")>-1||e.indexOf("marker-hand-scroll-btn")>-1||e.indexOf("marker-eraser-btn")>-1))return!0}catch(e){console.log("event or target id undefined.")}return!1})()||E.clickSelectBtn()},this.hideSubShapes=function(){var e=document.getElementById("marker-menu__sub-shapes");s.Util.addClass(e,"hide"),Array.from(e.children).forEach((function(e){e.classList.remove(E.menuSelect),document.getElementById(""+e.id.replace("btn","block")).classList.remove(E.menuMoreProp)}))},this.markerSelectEvent=function(){E.hideShapeMenu(),E.hideSubShapes(),d.default.isMarkerLoading||(E.outDrawingMode(),E.disableScrollMode())},this.markerSelectEventBind=function(){var e=document.getElementById("select-annotation-btn");s.Util.removeClass(e,"hide"),s.Util.bindClickEvent(e,E.markerSelectEvent)},this.markerHandEventBind=function(){var e=E.handBtn;l.Browser.instance.isMobile?s.Util.bindClickEvent(e,(function(){E.clickHandBtn(),E.hideSubShapes(),d.default.isMarkerLoading||(E.outDrawingMode(),E.enableScrollMode())})):s.Util.addClass(e,"hide")},this.enableScrollMode=function(){d.default.isScrollMode=!0,l.Browser.instance.isMobile||s.Util.addClass(document.getElementById("contents-area"),"cursor-hand-icon"),S(document.getElementsByClassName("marker-scale")),S(document.getElementsByClassName("textLayer"))},this.disableScrollMode=function(){d.default.isScrollMode=!1,l.Browser.instance.isMobile||s.Util.removeClass(document.getElementById("contents-area"),"cursor-hand-icon"),T(document.getElementsByClassName("marker-scale")),T(document.getElementsByClassName("textLayer"))},this.handleMarkerActive=function(e){if(E.markerInactive(),void 0!==e){var t=d.default.createtMarkerId(e.page,e.annotId),n=a.select("svg#"+t),o=n._groups[0][0]?n.node():document.getElementById(I.MemoIcon.getMemoId(e.page,e.annotId));E.markerActiveEvent(n,o)}},this.modifyMarkerAttr=function(e){var t=e.elemId,n=e.attr;if(t&&n){n.author&&(c.default.isAbleToEditAuthor()?E.markerAttr.author=n.author:delete n.author);var o=d.default.parseMarkerId(t),i=E.marker.getAnnotationInfo(o.pageOrSheetIdx,o.annotId),s=r.extend(!0,{},i),l=E.getDrawingTool(c.getAnnotType(i.annot));s=l.modifyAnnotInfo(s,n);var u={status:d.ANNOT_STATUS_TYPE.MODIFY,page:o.pageOrSheetIdx,annot:s,afterFunc:function(){var e=a.select("svg#"+t);e._groups[0][0]&&l.redrawAttr(e.node(),s)},isUndoRedo:!1};E.eventObserver.saveAnnotationServer.notify(u)}},this.markerStyleChangeEvent=function(e){var t,n,o,i,r=e.oldValue,a=e.newValue,s=e.attrName,l=e.setSelectedStyle;if(null!==E.getCurMarkerSection()&&E.saveDrawing(),l(),r!=a&&E.activeMarker){var u=void 0;u="thickness"===s?c.default.thicknessPxToAnnotDPI(Number(a)):"color"===s||"innerColor"===s?v.default.getTypeToHexColor(a):a;(t=d.default.parseMarkerId(E.activeMarker.id),n=t.annotId,o=t.pageOrSheetIdx,i=c.getAnnotType(E.marker.getAnnotationInfo(o,n).annot),E.getDrawingTool(i)).redrawAttrEl(E.activeMarker,""+s,""+u)}else E.markerAttr[s]=a},this.windowLeaveEvent=function(){var e=E.hasSaveAnnot;window.addEventListener("beforeunload",(function(t){e()&&(t.preventDefault(),t.returnValue=g.LocaleMessage.getMessage("leave_window_annot"))}))},this.applyMarkerAttr=function(e,t){void 0===t&&(t={});for(var n=0,o=Object.keys(t);n<o.length;n++){var i=o[n],r=t[i];"color"===i||"innerColor"===i?"color"===i&&"type1"===r||!c.default.isVaildColorType(r)||(e[i]=r):"thickness"===i?c.default.isVaildThickness(r)&&(e[i]=r):"transparency"===i&&c.default.isVaildTransparency(r)&&(e[i]=r)}},this.initMarkerAttr=function(){var e={color:"type2",innerColor:"type1",thickness:3*c.default.DPI_RATIO,transparency:.5,author:"Guest"},t=window.localSynap.config.markerStyle;t&&this.applyMarkerAttr(e,t),this.markerAttr=e},this.eventBind=function(e){E.markerInactiveEventBind(),E.markerShapesBtnEventBind(),E.markerLineBtnEventBind(),E.markerSquareBtnEventBind(),E.markerPencilBtnEventBind(),E.markerMemoBtnEventBind(),E.markerSelectEventBind(),E.markerHandEventBind(),E.markerCircleEventBind(),E.markerArrowLineEventBind(),E.windowLeaveEvent(),E.eventObserver=e,E.eventObserver.selectAnnotation.subscribe(E.handleMarkerActive),E.eventObserver.selectAnnotation.subscribe(E.selectAnnot),E.eventObserver.unSelectAnnotation.subscribe(E.markerInactive),E.eventObserver.modifyMarkerAttr.subscribe(E.modifyMarkerAttr),E.eventObserver.changeMarkerStyle.subscribe(E.markerStyleChangeEvent),E.eventObserver.saveAnnotation.subscribe(E.saveDrawing)},this.load=function(t,n,r){return o(E,void 0,e,(function(){var e=this;return i(this,(function(o){return this.docInfo=t,this.marker=r,this.initMarkerAttr(),null!=c.default.loginId&&(this.markerAttr.author=c.default.loginId),this.styleMenu=new v.default(t,n,this.markerAttr),this.eventBind(n),l.Browser.instance.isIE||(this.eraser=new w.DrawingEraser(document.getElementById("marker-eraser-btn"),r,n,s.Util.isCellSkin(this.docInfo)),this.eraser.eventBind((function(){s.Util.removeClass(document.getElementById("select-annotation-btn"),e.menuSelect),e.removeMarkerBtnCssSelect(e.pencilBtn.id),s.Util.removeClass(e.shapesBtn,e.menuSelect),s.Util.removeClass(e.memoBtn,e.menuSelect),s.Util.removeClass(e.handBtn,e.menuSelect),e.hideSubShapes(),e.outDrawingMode()}))),[2]}))}))}}return n.prototype.hasFill=function(){return"square"===this.selectedType||"circle"===this.selectedType},n.selectAnnotElm={"annot-page-li":6,"memo-icon":1,"marker-svg":2,"annotation-popup":4},n}();t.default=x}).call(this,n(5))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=n(0),r=n(1),a=n(17),s=n(18),l=n(8),c=n(59),d=n(19),u=function(){function e(t,n,u){var h=this;this.docInfo=null,this.selectedAttr={color:"type2",innerColor:"type24",thickness:4,transparency:.5},this.orgAttr=void 0,this.hasFill=!1,this.squareColorTypeSelected="border",this.activeMarkerId=void 0,this.colorSelectedClassSelector="prop-submenu-color--selected",this.propSubmenu=document.getElementById("prop-submenu"),this.popupWidth=269,this.popupHeight=212,this.styleTabList=["thickness__input","transparency__input","color_border","color_fill","color-type1-btn","color-type2-btn","color-type3-btn","color-type4-btn","color-type5-btn","color-type6-btn","color-type7-btn","color-type8-btn","color-type9-btn","color-type10-btn","color-type11-btn","color-type12-btn","color-type13-btn","color-type14-btn","color-type15-btn","color-type16-btn","color-type17-btn","color-type18-btn","color-type19-btn","color-type20-btn","color-type21-btn","color-type22-btn","color-type23-btn","color-type24-btn"],this.toggleColorTypeCss=function(e){void 0===e&&(e=!0);var t=document.getElementsByClassName("prop-submenu-color__radio");if(e)for(var n=0;n<t.length;++n){var o=t[n];i.Util.removeClass(o,"hide")}else i.Util.hasClass(t[0],"hide")||Array.prototype.forEach.call(t,(function(e){i.Util.addClass(e,"hide")}))},this.hideAnnotList=function(e){l.default.isAnnotMode&&i.Util.isSmallScreen()&&h.eventObserver.hideAnnotListInMobile.notify(e)},this.styleMenuOnCss=function(){if(i.Util.removeClass(h.propSubmenu,"hide"),h.hideAnnotList(!0),h.hasFill){var e="border"===h.squareColorTypeSelected?"marker_border_color":"marker_fill_color";document.getElementById("color_name").innerText=s.LocaleMessage.getMessage(e),h.toggleColorTypeCss(!0)}else document.getElementById("color_name").innerText=s.LocaleMessage.getMessage("marker_color")},this.styleMenuOffCss=function(){return!i.Util.hasClass(h.propSubmenu,"hide")&&(h.toggleColorTypeCss(!1),i.Util.addClass(h.propSubmenu,"hide"),h.hideAnnotList(!1),!0)},this.toggleStyleMenu=function(e,t,n){l.default.isMarkerLoading||h.styleMenuOffCss()||(h.setMarkerAttributes(e,t),h.showStyleMenu({activeMarkerId:void 0}),i.Util.setTabIndexList(h.styleTabList,n.tabIndex,!0))},this.setMarkerAttributes=function(e,t){h.orgAttr={};var n;for(var o in h.selectedAttr)""===(n=e[o])||null==n||null!==n&&"object"==typeof n&&!Object.keys(n).length||(h.orgAttr[o]=e[o],h.selectedAttr[o]!==e[o]&&(h.selectedAttr[o]=e[o]));h.hasFill=t},this.saveAnnotStyle=function(){var t=h.hasFill?h.selectedAttr:{color:h.selectedAttr.color,thickness:h.selectedAttr.thickness,transparency:h.selectedAttr.transparency};if(h.activeMarkerId&&JSON.stringify(h.orgAttr)!==JSON.stringify(t)){var n={color:e.getTypeToHexColor(h.selectedAttr.color),thickness:a.default.thicknessPxToAnnotDPI(h.selectedAttr.thickness),transparency:h.selectedAttr.transparency};if(h.hasFill){var o=e.getTypeToHexColor(h.selectedAttr.innerColor);n.innerColor=o}var i=h.activeMarkerId;h.eventObserver.modifyMarkerAttr.notify({elemId:i,attr:n}),h.activeMarkerId=void 0}},this.styleMenuInactiveEventBind=function(){o(document).on(i.Util.getClickOrTouchEventName(),(function(e){if(!i.Util.hasClass(h.propSubmenu,"hide")){var t=e.target;if(t.id){var n=t.id;if("annotation-popup__prop"===n)return;if(0===n.indexOf("marker-pencil")||document.getElementById("marker-menu__sub-shapes").contains(t))return}i.Util.hasClass(t,"annotation-popup__img--prop")||i.Util.hasClassForEventTargetEl(t,"prop-submenu",6)||h.eventObserver.closeProp.notify()}}))},this.colorTypeBtnEventBind=function(){var t=document.getElementById("color_name"),n=document.getElementById("color_border"),o=document.getElementById("color_fill"),r="prop-submenu-color__radio--select",a=function(e){var t=document.getElementById("color_border__rect__inner");e?!i.Util.containClassName(t,r)&&i.Util.addClass(t,r):i.Util.containClassName(t,r)&&i.Util.removeClass(t,r)};i.Util.bindClickEvent(n,(function(){t.innerText=s.LocaleMessage.getMessage("marker_border_color"),i.Util.containClassName(n,r)||(i.Util.removeClass(o,r),i.Util.addClass(n,r)),a(!0);var l=document.getElementById(e.createtColorTypeId(h.selectedAttr.color));h.setColorType(l),h.squareColorTypeSelected="border",h.disabledTransparentColor()})),i.Util.bindClickEvent(o,(function(){t.innerText=s.LocaleMessage.getMessage("marker_fill_color"),i.Util.containClassName(o,r)||(i.Util.removeClass(n,r),i.Util.addClass(o,r)),a(!1);var l=document.getElementById(e.createtColorTypeId(h.selectedAttr.innerColor));h.setColorType(l),h.squareColorTypeSelected="fill",h.disabledTransparentColor()}))},this.setColorType=function(t){o("."+h.colorSelectedClassSelector).removeClass(h.colorSelectedClassSelector+"-dark").removeClass(h.colorSelectedClassSelector+"-bright").removeClass(""+h.colorSelectedClassSelector);var n=e.getColorTypeId(t.id),r=["type2","type3","type7","type8","type9","type10","type11","type12"].find((function(e){return e===n}))?h.colorSelectedClassSelector+"-bright":h.colorSelectedClassSelector+"-dark";i.Util.addClass(t,""+h.colorSelectedClassSelector),i.Util.addClass(t,r)},this.setEachColorRadio=function(t,n){var o=document.getElementById("color_"+t+"__rect"),r=i.Util.containClassName(o,"color-type1-btn");"type1"!==n?(r&&i.Util.removeClass(o,"color-type1-btn"),o.style.backgroundColor="#"+e.getTypeToHexColor(n)):r||(i.Util.addClass(o,"color-type1-btn"),o.style.backgroundColor="#ffffff")},this.initColorRadio=function(){h.setEachColorRadio("border",h.selectedAttr.color),h.setEachColorRadio("fill",h.selectedAttr.innerColor)},this.setColorRadio=function(e){for(var t=document.getElementsByClassName("prop-submenu-color__radio"),n=0;n<t.length;++n){var o=t[n];i.Util.containClassName(o,"prop-submenu-color__radio--select")&&h.setEachColorRadio(h.squareColorTypeSelected,e)}},this.colorBtnEventBind=function(){h.bindColorClickOrTouchEvent(o(".prop-submenu-color__block"),".prop-submenu-color--hover",(function(t){var n=h.hasFill&&"fill"===h.squareColorTypeSelected,i=n?"innerColor":"color",r=o("."+h.colorSelectedClassSelector)[0].id,a=e.getColorTypeId(r),s=t.target,l=e.getTypeToHexColor(e.getColorTypeId(s.id)),c=n||"none"!==l?s:document.getElementById(r),d=e.getColorTypeId(c.id);h.eventObserver.changeMarkerStyle.notify({oldValue:a,newValue:d,attrName:i,setSelectedStyle:function(){a!==d&&(h.setColorRadio(d),h.setColorType(c),h.selectedAttr[i]=d)}}),t.preventDefault()}))},this.setInputRangeTrackFill=function(e){if(!r.Browser.instance.isIE){var t=(parseInt(e.value)-parseInt(e.min))/(parseInt(e.max)-parseInt(e.min))*100;o(e).css("background","linear-gradient(to right, #333 0%, #333 "+t+"%, #e1e1e1 "+t+"%, #e1e1e1 100%)")}},this.bindInputRangeClickOrTouchEvent=function(e){var t=document.getElementById(e+"__input"),n=function(){var t=h.selectedAttr[e],n=document.getElementById(e+"__input").value,o=function(e){return"thickness"===e?Math.round(parseInt(n)/(96/a.default.DEFAULT_DPI)*a.default.DPI_RATIO):"transparency"===e?((100-parseInt(n))/100).toFixed(2):n};h.eventObserver.changeMarkerStyle.notify({oldValue:t,newValue:o(e),attrName:""+e,setSelectedStyle:function(){document.getElementById(e+"_result").innerText=n,h.selectedAttr[e]=o(e)}})};r.Browser.instance.isIE?(i.Util.addClass(t,"prop-submenu-slider__input-ms"),t.addEventListener("change",(function(){n()}))):t.addEventListener("input",(function(e){h.setInputRangeTrackFill(e.target),n()})),i.Util.bindFocus(t),i.Util.disableKeyEventForPageMove(t)},this.thicknessBtnEventBind=function(){h.bindInputRangeClickOrTouchEvent("thickness")},this.transparencyBtnEventBind=function(){h.bindInputRangeClickOrTouchEvent("transparency")},this.disabledTransparentColor=function(){var e=document.getElementById("color-type1-btn");h.hasFill&&"fill"==h.squareColorTypeSelected?e.classList.remove("color-type1-btn--disabled"):e.classList.add("color-type1-btn--disabled")},this.setStyleMenuItem=function(){var t=h.hasFill&&"fill"==h.squareColorTypeSelected?h.selectedAttr.innerColor:h.selectedAttr.color;h.disabledTransparentColor(),h.setColorType(document.getElementById(e.createtColorTypeId(t))),h.initColorRadio();["thickness","transparency"].forEach((function(e){var t=function(e){var t=h.selectedAttr[e];return"thickness"===e?t=Math.round(t/a.default.DPI_RATIO*(96/a.default.DEFAULT_DPI)):"transparency"===e&&(t=(100*(1-t)).toFixed(0)),"number"==typeof t?t.toString():t}(e),n=document.getElementById(e+"__input");n.value=t,document.getElementById(e+"_result").innerText=t,h.setInputRangeTrackFill(n)}))},this.getStyleMenuPosition=function(e,t){var n=l.default.parseMarkerId(h.activeMarkerId).pageOrSheetIdx,o=document.getElementById(h.activeMarkerId),i={left:parseFloat(o.style.left)*e,top:parseFloat(o.style.top)*e,width:parseFloat(o.style.width)*e,height:parseFloat(o.style.height)*e,obj:o},r=h.popupWidth*d.ScaleEvent.getBrowserScale(),a=h.popupHeight*d.ScaleEvent.getBrowserScale(),s=c.popUpPos(i,r,a,h.docInfo,n,t);return{left:s.left,top:s.top}},this.setPosition=function(e,t){var n=d.ScaleEvent.getBrowserScale();if(i.Util.isSmallScreen())if(1!==n){if(d.ScaleEvent.isAbsolutePosition())return h.propSubmenu.style.position="absolute",void d.ScaleEvent.scaleWithPosition(h.propSubmenu,d.TransformOriginType.LEFT_TOP,0,1*n);var o=i.Util.getPageYOffset();if(!r.Browser.instance.isIOS){var a=d.ScaleEvent.getHeaderAreaHeightWithAnnot()+1;o=i.Util.getPageYOffset()+a*n}h.propSubmenu.style.cssText="position: fixed; transform-origin: left top; left : "+i.Util.getPageXOffset()+"px; top: "+o+"px",d.ScaleEvent.scale(h.propSubmenu)}else{var s=document.getElementById("marker-header").getBoundingClientRect();h.propSubmenu.style.cssText="left: 0px; top:"+s.bottom+"px"}else{h.propSubmenu.style.cssText="";var l=h.activeMarkerId?h.getStyleMenuPosition(e,t):function(){var e,t=null===(e=window.event.target)||void 0===e?void 0:e.getBoundingClientRect();if(1!==n&&d.ScaleEvent.isAbsolutePosition()){h.propSubmenu.style.position="absolute";var o=t.left-h.popupWidth*n/2,r=i.Util.getPageYOffset()+t.top-t.height+1*n;return{left:o>0?i.Util.getPageXOffset()+o:0,top:r}}h.propSubmenu.style.position="fixed";var a=t.left-h.popupWidth*n/2;return{left:a>0?a:0,top:t.bottom+1*n}}();1!==n&&d.ScaleEvent.scale(h.propSubmenu),h.propSubmenu.style.left=l.left+"px",h.propSubmenu.style.top=l.top+"px"}},this.showStyleMenu=function(e){var t=e.activeMarkerId,n=e.ratio,o=e.isTop;h.activeMarkerId=t,h.setPosition(n,o),h.setStyleMenuItem(),h.styleMenuOnCss()},this.resizeWindow=function(){var e,t,n;l.default.isAnnotMode&&!i.Util.containClassName(h.propSubmenu,"hide")&&(h.activeMarkerId&&(e=l.default.parseMarkerId(h.activeMarkerId),t=e.pageOrSheetIdx,n=e.annotId,h.eventObserver.selectAnnotation.notify({page:t,annotId:n,showMemo:!1,showPopup:!0})),h.eventObserver.closeProp.notify())},this.bindColorClickOrTouchEvent=function(e,t,n){e.on(r.Browser.instance.isMobile?"touchstart":"mouseover",(function(e){var n=e.target.className.indexOf("submenu__block")>-1?e.target:i.Util.getParentElement(e.target);o(n).addClass(t)})).on(r.Browser.instance.isMobile?"touchend click":"mouseout click",(function(e){if("touchend"===e.type||"mouseout"===e.type){var r=e.target.className.indexOf("submenu__block")>-1?e.target:i.Util.getParentElement(e.target);o(r).removeClass(t)}"touchend"!==e.type&&"click"!==e.type||n(e)}));for(var a=0;a<e.length;++a)i.Util.bindFocus(e[a]),i.Util.bindEnterKey(e[a])},this.disableClickAndTouchEvent=function(){l.default.isDrawingMode&&r.Browser.instance.isMobile&&r.Browser.instance.isIOS&&(h.propSubmenu.addEventListener("click",(function(e){e.preventDefault()})),h.propSubmenu.addEventListener("touchstart",(function(e){e.touches.length>1&&e.preventDefault()})))},this.closeStyleMenu=function(){h.styleMenuOffCss()&&h.saveAnnotStyle(),i.Util.clearTabIndexList(h.styleTabList)},this.eventBind=function(e){var t;h.styleMenuInactiveEventBind(),h.colorTypeBtnEventBind(),h.colorBtnEventBind(),h.thicknessBtnEventBind(),h.transparencyBtnEventBind(),h.disableClickAndTouchEvent(),h.eventObserver=e,h.eventObserver.showProp.subscribe(h.showStyleMenu),h.eventObserver.resizeWindow.subscribe(h.resizeWindow),h.eventObserver.closeProp.subscribe(h.closeStyleMenu),t=!1,h.eventObserver.dragAnnotStart.subscribe((function(){var e=i.Util.isSmallScreen(),n=!i.Util.hasClass(h.propSubmenu,"hide");e||(t=n),n&&h.eventObserver.closeProp.notify()})),h.eventObserver.dragAnnotEnd.subscribe((function(e){var n=e.page,o=e.annotId,r=e.ratio;i.Util.isSmallScreen()||o&&t&&(h.activeMarkerId=l.default.createtMarkerId(n,o),h.setPosition(r),h.styleMenuOnCss())}))},this.setMarkerAttributes(u,!1),this.eventBind(n),this.docInfo=t}return e.getColorTypeId=function(e){return e.split("-")[1]},e.createtColorTypeId=function(e){return"color-"+e+"-btn"},e.getRgbToColorType=function(t){if(!t)return t;for(var n=document.getElementsByClassName("prop-submenu-color__block"),o=0;o<n.length;++o){var i=n.item(o).id,r=e.getColorTypeId(i);if(e.getTypeToHexColor(r)===t)return r}return"type2"},e.getTypeToHexColor=function(t){return document.getElementById(e.createtColorTypeId(t)).dataset.color},e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MemoIcon=void 0;var o=n(17),i=n(31),r=n(0),a=n(8),s=n(59),l=n(75),c=function(){function e(t,n,i,c,d,u){var h=this;this.eventObserver=null,this.memoIconEl=null,this.memoContent=null,this.annotId=0,this.pageOrSheetIdx=0,this.isCell=!1,this.get=function(){return h.memoIconEl},this.click=function(){a.default.isScrollMode||(h.eventObserver.unSelectAnnotation.notify(),l.MemoContent.isShow()?a.default.isAnnotMode&&"memo"!==o.getAnnotType(e.getMemoInfo(h.memoIconEl.id))&&h.eventObserver.selectAnnotation.notify({page:h.pageOrSheetIdx,annotId:h.annotId,showMemo:!1,showPopup:!1}):h.eventObserver.selectAnnotation.notify({page:h.pageOrSheetIdx,annotId:h.annotId,showMemo:!0,showPopup:!1}))},this.drag=function(){var t=!1,n=0,i=0,l=s.getAnnotArea(!0,h.pageOrSheetIdx,h.isCell),c=l.left,d=l.right,u=l.top,f=l.bottom,m=o.default.getAnnotRatio,p=null,g=function(e){return{clientX:e instanceof MouseEvent?e.clientX:e.touches[0].clientX,clientY:e instanceof MouseEvent?e.clientY:e.touches[0].clientY}},v=function(e){var o=g(e),r=o.clientX,a=o.clientY,s=n-r,l=i-a;n=r,i=a,p.setPos(s/m(h.pageOrSheetIdx,h.isCell),l/m(h.pageOrSheetIdx,h.isCell)),p.isMove()&&(s&&(h.memoIconEl.style.left=p.getLeft()+"px"),l&&(h.memoIconEl.style.top=p.getTop()+"px"),t=!0,h.memoContent.hide(!0))},b=function(){document.removeEventListener("touchmove",r.Util.disableEvent,r.Util.nonPassiveEventListenerOption),document.removeEventListener(r.Util.getMoveEventName(),v),document.removeEventListener(r.Util.getClickEndEventName(),b),p.isMove()&&e.updateMemoInfo(h.memoIconEl,p.getMoveX(),p.getMoveY())};h.memoIconEl.addEventListener(r.Util.getClickStartEventName(),(function(o){a.default.isScrollMode||(t=!1,a.default.isAnnotMode&&function(t){var o=g(t),a=o.clientX,l=o.clientY;n=a,i=l;var E=e.getMemoInfo(h.memoIconEl.id);p=s.annotPos(parseFloat(E.w),parseFloat(E.h),parseFloat(E.l),parseFloat(E.t),c(),d()/m(h.pageOrSheetIdx,h.isCell),u(),f()/m(h.pageOrSheetIdx,h.isCell)),document.addEventListener("touchmove",r.Util.disableEvent,r.Util.nonPassiveEventListenerOption),document.addEventListener(r.Util.getMoveEventName(),v),document.addEventListener(r.Util.getClickEndEventName(),b)}(o))})),h.memoIconEl.addEventListener(r.Util.getClickOrTouchEventName(),(function(){a.default.isScrollMode||!t&&h.click()}))},this.createMemoIcon=function(t){h.memoIconEl=document.createElement("div"),h.memoIconEl.id=e.getMemoId(h.pageOrSheetIdx,h.annotId),h.memoIconEl.className="memo-icon";var n=e.getPosition(t,h.pageOrSheetIdx,h.isCell),o=n.top,i=n.left;h.memoIconEl.style.cssText="left: "+i+"px; top: "+o+"px"},this.fullscreen=function(e){e.isFullScreen?r.Util.addClass(h.memoIconEl,"hide"):r.Util.removeClass(h.memoIconEl,"hide")},this.eventObserver=t,this.annotId=d,this.pageOrSheetIdx=c,this.isCell=u,this.memoContent=i,this.createMemoIcon(n),"memo"===o.getAnnotType(n)?this.drag():this.memoIconEl.addEventListener("click",this.click),this.eventObserver.fullScreen.subscribe(this.fullscreen)}return e.getMemoInfo=null,e.updateMemoInfo=null,e.width=20,e.height=20,e.setMemoCommonFunc=function(t,n){e.getMemoInfo=t,e.updateMemoInfo=n},e.getMemoId=function(e,t){return"memo-"+e+"-"+t},e.getPosition=function(t,n,r){var a=parseFloat(t.t),l=parseFloat(t.l);"memo"!==o.getAnnotType(t)&&(a-=i.DrawingTool.VIEWBOX_RANGE,l-=i.DrawingTool.VIEWBOX_RANGE,a-e.height<0?a+=parseFloat(t.h)+2*i.DrawingTool.VIEWBOX_RANGE:a-=e.height);var c=s.getAnnotArea(!0,n,r),d=c.left,u=c.right,h=c.top,f=c.bottom,m=s.annotPos(parseFloat(t.w),parseFloat(t.h),l,a,d(),u()/o.default.getAnnotRatio(n,r),h(),f()/o.default.getAnnotRatio(n,r));return{top:m.getTop(),left:m.getLeft()}},e}();t.MemoIcon=c},,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DrawingEraser=t.layerEventBind=void 0;var o=n(0),i=n(17),r=n(59),a=n(103),s=n(31),l=n(8),c=n(3),d=n(1),u=n(270),h=n(61);t.layerEventBind=function(e,t){e.addEventListener(t)};var f=function(){var e=this;this.list=[],this.push=function(t){e.list.push(t)},this.pop=function(){return e.list.shift()},this.empty=function(){return 0===e.list.length},this.front=function(){return e.list.length>0?e.list[0]:null}},m=function(){function e(t,n,m,p){var g=this;this.elem=null,this.marker=null,this.eventObserver=null,this.isCell=!1,this.updateQueue=null,this.eraseUpdate=function(){if(!g.updateQueue.empty()){var e=g.updateQueue.pop();if(g.updateQueue.front()!==e){var t,n=document.getElementById(e),o=l.default.parseMarkerId(e),r=g.marker.getAnnotationInfo(o.pageOrSheetIdx,o.annotId),d=c.extend(!0,{},r),u=l.ANNOT_STATUS_TYPE.DELETE;if("ink"==i.getAnnotType(d.annot)){for(var f=d.annot,m="",p=0;p<n.children.length;p++)m+=n.children[p].getAttribute("d");(u=m.length?l.ANNOT_STATUS_TYPE.MODIFY:l.ANNOT_STATUS_TYPE.DELETE)==l.ANNOT_STATUS_TYPE.MODIFY&&(f.path.text=m,t=a.getInkSize(f.path.text,parseFloat(f.path.w),1),f.l=t.left,f.t=t.top,f.w=t.width,f.h=t.height)}var v={status:u,page:o.pageOrSheetIdx,annot:d,afterFunc:function(){if(u===l.ANNOT_STATUS_TYPE.MODIFY){var e=s.getViewBox(t.left,t.top,t.width,t.height);n.setAttribute("viewBox",e.left+" "+e.top+" "+e.width+" "+e.height),n.style.left=e.left+"px",n.style.top=e.top+"px",n.style.width=e.width+"px",n.style.height=e.height+"px";var i=h.MemoIcon.getMemoId(o.pageOrSheetIdx,o.annotId),r=document.getElementById(i);if(r){var a=h.MemoIcon.getPosition(d.annot,o.pageOrSheetIdx,g.isCell),c=a.top,f=a.left;r.style.left=f+"px",r.style.top=c+"px"}}},isUndoRedo:!1};g.eventObserver.saveAnnotationServer.notify(v)}}},this.eraseAddItem=function(t,n){g.updateQueue.push(t),n.remove(),setTimeout(g.eraseUpdate,e.updateTime)},this.eraseAnnot=function(t,n,r){var a=t,s=i.default.getAnnotRatio(o.Util.getIdxFromElmId(t.id,"annotationlayer"),n),l=function(t,n){return function(t,n){var o=e.eraserSize/2,i=function(t){return{type:"rect",value:{x:t.x-o,y:t.y-o,width:e.eraserSize,height:e.eraserSize}}}(n);return u.intersect(u.shape(t.tagName,function(){if("rect"===t.tagName)return{x:parseFloat(t.getAttribute("x")),y:parseFloat(t.getAttribute("y")),width:parseFloat(t.getAttribute("width")),height:parseFloat(t.getAttribute("height"))};if("path"===t.tagName){var e=t.getAttribute("d"),n=e.trim().split(" ");return 6===n.length&&n[1]===n[4]&&n[2]&&n[5]&&(e="M "+n[1]+" "+n[2]+" L "+(parseFloat(n[4])+1)+" "+(parseFloat(n[5])+2)),{d:e}}return"ellipse"===t.tagName?{cx:parseFloat(t.getAttribute("cx")),cy:parseFloat(t.getAttribute("cy")),rx:parseFloat(t.getAttribute("rx")),ry:parseFloat(t.getAttribute("ry"))}:{}}()),u.shape(i.type,i.value))}(n,t).points.length>0||function(e,t){var n=e.tagName;return("rect"===n||"ellipse"===n)&&e.isPointInFill(t)}(n,t)},c=function(e){var t=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,n=e instanceof MouseEvent?e.clientY:e.touches[0].clientY,o=a.getElementsByClassName("marker-scale");if(o.length){var i=o[0].children;Array.from(i).forEach((function(e){if(e instanceof SVGSVGElement){var o=function(e,t,n){var o=n.createSVGPoint();o.x=e,o.y=t;var i=o.matrixTransform(n.getScreenCTM().inverse());return(d.Browser.instance.isIOS||d.Browser.instance.isSafari||d.Browser.instance.isFirefox)&&(i.x=i.x/s,i.y=i.y/s),i}(t,n,e),i=e.id;Array.from(e.children).forEach((function(e){l(o,e)&&r(i,e)}))}}))}};a.addEventListener(o.Util.getMoveEventName(),c);var h=function(){a.removeEventListener("mouseleave",f),a.removeEventListener(o.Util.getMoveEventName(),c)},f=function(){a.removeEventListener(o.Util.getClickEndEventName(),h),a.removeEventListener(o.Util.getMoveEventName(),c)};a.addEventListener(o.Util.getClickEndEventName(),h,{once:!0}),a.addEventListener("mouseleave",f,{once:!0})},this.erase=function(e){d.Browser.instance.isMobile&&e.preventDefault(),g.eraseAnnot(e.target,g.isCell,g.eraseAddItem)},this.addEventListener=function(e){o.Util.addClass(e,"cursor-eraser-icon"),e.addEventListener(o.Util.getClickStartEventName(),g.erase)},this.removeEventListener=function(e){o.Util.removeClass(e,"cursor-eraser-icon"),e.removeEventListener(o.Util.getClickStartEventName(),g.erase)},this.eventBind=function(t){o.Util.bindClickEvent(g.elem,(function(){t(),o.Util.addClass(g.elem,"marker-menu--select"),e.isActive=!0,r.disableEvent(document.getElementsByClassName("marker-scale")),r.disableEvent(document.getElementsByClassName("textLayer"));for(var n=document.getElementsByClassName("annotationlayer"),i=0;i<n.length;i++)g.addEventListener(n[i])}))},this.eventUnBind=function(){o.Util.removeClass(g.elem,"marker-menu--select"),e.isActive=!1,r.enableEvent(document.getElementsByClassName("marker-scale")),r.enableEvent(document.getElementsByClassName("textLayer"));for(var t=document.getElementsByClassName("annotationlayer"),n=0;n<t.length;n++)g.removeEventListener(t[n])},this.elem=t,o.Util.removeClass(this.elem,"hide"),this.marker=n,this.eventObserver=m,this.isCell=p,this.updateQueue=new f}return e.isActive=!1,e.eraserSize=14,e.updateTime=100,e}();t.DrawingEraser=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MemoContent=void 0;var o=n(1),i=n(50),r=n(19),a=n(0),s=n(17),l=n(104),c=n(8),d=function(){function e(t){var n=this;this.memoCharLimit=512,this.contentWidth=300,this.contentHeight=200,this.cursorMoveKey=[i.keyMap.PAGEUP,i.keyMap.PAGEDOWN,i.keyMap.END,i.keyMap.HOME,i.keyMap.UPARROW,i.keyMap.DOWNARROW,i.keyMap.LEFTARROW,i.keyMap.RIGHTARROW],this.memoEl=document.getElementById("annotation-memo"),this.contentsEl=document.getElementById("annotation-memo__content"),this.backdropEl=document.getElementById("annotation-memo__backdrop"),this.highlightsEl=document.getElementById("annotation-memo__highlights"),this.authorInputEl=document.getElementById("annotation-memo__author-input"),this.saveMemo=null,this.focusContent=function(e,t,o){c.annotScrollMove(e.id,t,o),n.contentsEl.focus()},this.getPosition=function(e,t,i){var c=i?document.getElementById("cell-common"):document.getElementById("page-area"+t),d=i?document.getElementById("cell-common"):document.getElementById("page"+t),u=d.offsetLeft,h=d.offsetWidth,f=r.ScaleEvent.getBrowserScale(),m=c.offsetLeft,p=c.offsetTop,g=e.offsetLeft,v=e.offsetTop,b=e.offsetWidth,E=e.offsetHeight,y=n.contentWidth*f,I=n.contentHeight*f,w=s.default.getAnnotRatio(t,i),_=(v+E)*w+p,S=(g+b/2)*w+m+u-y/2,T=_+I,x=S+y,C=c.getBoundingClientRect(),M=C.width,k=C.left,O=document.getElementById("contents"),B=O.scrollTop,A=O.clientHeight,P=O.clientWidth,U=O.offsetWidth,L=function(){if(r.ScaleEvent.isSupportScale()){var e=a.Util.getPageXOffset(),t=a.Util.getPageXOffset()+a.Util.getInnerWidth();if(o.Browser.instance.isAndroid)e+=Math.abs(k),(t+=Math.abs(k))>Math.max(M,h)&&(t-=U-P);return[e,t]}return[Math.abs(k)-l.default.getAnnotListWidth(),Math.abs(k)+P]}(),N=L[0],D=L[1];S<N?S=N:x>D&&(S=Math.max(0,D-y));var R=0;return T>(R=o.Browser.instance.isIOS?Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop)+window.innerHeight:B+A)&&(_=R-I),{top:_,left:S}},this.setPosition=function(e,t,o){var i=n.getPosition(e,t,o);n.memoEl.style.left=i.left+"px",n.memoEl.style.top=i.top+"px"},this.show=function(e,t,o,i,d){if(c.default.isAnnotMode?(n.enableEdit(),!s.default.isAbleToEditAuthor()&&n.disableEditAuthor()):n.disableEdit(),n.contentsEl.value=e.contents&&e.contents.text?e.contents.text:"",n.authorInputEl.value=e.contents&&e.contents.t?e.contents.t:"",n.authorInputEl.maxLength=128,n.contentsEl.setAttribute("data-memo-id",t.id),n.setPosition(t,o,i),n.showMemoContentCnt(),c.default.isAnnotMode&&l.default.searchText){var u=n.applyHighlights(n.contentsEl.value,l.default.searchText);n.highlightsEl.innerHTML=u}else n.clearHighlights();a.Util.removeClass(n.memoEl,"annotation-memo--hide"),r.ScaleEvent.scale(n.memoEl,"left top"),c.default.isAnnotMode&&r.ScaleEvent.disableiOSFocusScale(),d&&n.focusContent(t,o,i),n.backdropEl.scrollTop=n.contentsEl.scrollTop},this.hide=function(t){e.isShow()&&(c.default.isAnnotMode&&r.ScaleEvent.enableiOSFocusScale(),t&&n.saveMemo(),n.contentsEl.value="",n.authorInputEl.value="",n.contentsEl.removeAttribute("data-memo-id"),a.Util.addClass(n.memoEl,"annotation-memo--hide"),n.hideAuthorEdit())},this.enableEdit=function(){a.Util.removeClass(document.getElementById("annotation-memo__delete-btn"),"hide"),a.Util.removeClass(document.getElementById("annotation-memo__header"),"disable-pointer"),a.Util.removeClass(document.getElementById("annotation-memo__author-icon"),"disable-pointer"),a.Util.removeClass(n.contentsEl,"disable-pointer"),a.Util.removeClass(document.getElementById("annotation-memo__footer"),"disable-pointer"),a.Util.removeClass(n.authorInputEl,"disable-pointer"),n.contentsEl.readOnly=!1,n.authorInputEl.readOnly=!1},this.disableEdit=function(){a.Util.addClass(document.getElementById("annotation-memo__delete-btn"),"hide"),a.Util.addClass(document.getElementById("annotation-memo__header"),"disable-pointer"),a.Util.addClass(n.contentsEl,"disable-pointer"),a.Util.addClass(document.getElementById("annotation-memo__footer"),"disable-pointer"),n.contentsEl.readOnly=!0,n.disableEditAuthor()},this.disableEditAuthor=function(){a.Util.addClass(document.getElementById("annotation-memo__author-icon"),"disable-pointer"),a.Util.addClass(n.authorInputEl,"disable-pointer"),n.authorInputEl.readOnly=!0},this.showMemoContentCnt=function(e,t){void 0===e&&(e=0),void 0===t&&(t="");var i=n.contentsEl.value,r=i.length+e>-1?i.length+e:0,s=document.getElementById("annotation-memo__char-cnt");if(o.Browser.instance.isIOS){var l=i.split(/\r\n|\r|\n/g).length-1+(t.split(/\r\n|\r|\n/g).length-1);n.contentsEl.setAttribute("maxlength",(n.memoCharLimit+l).toString())}r>=n.memoCharLimit?(a.Util.addClass(s,"annotation-memo__char-cnt--limit"),r=n.memoCharLimit):a.Util.removeClass(s,"annotation-memo__char-cnt--limit"),s.innerText=r+" / "+n.memoCharLimit},this.pasteMemoContentCntEvent=function(e){try{var t=(e.clipboardData||window.clipboardData).getData("text");n.showMemoContentCnt(t.length,t)}catch(e){console.log("This browser is not support clipboardData")}},this.cutMemoContentCntEvent=function(){try{var e=window.getSelection().toString();n.showMemoContentCnt(-e.length,e)}catch(e){console.log("This browser is not support selection object")}},this.hideAuthorEdit=function(){var e=document.getElementById("annotation-memo__author-icon"),t=document.getElementById("annotation-memo__author-label");a.Util.removeClass(e,"annotation-memo__author-icon--edit"),a.Util.removeClass(t,"annotation-memo__author-label--edit"),a.Util.removeClass(n.authorInputEl,"annotation-memo__author-input--edit")},this.showAuthorEdit=function(){var e=document.getElementById("annotation-memo__author-icon"),t=document.getElementById("annotation-memo__author-label");a.Util.addClass(e,"annotation-memo__author-icon--edit"),a.Util.addClass(t,"annotation-memo__author-label--edit"),a.Util.addClass(n.authorInputEl,"annotation-memo__author-input--edit"),n.authorInputEl.focus()},this.getContentElem=function(){return n.contentsEl},a.Util.disableKeyEventForPageMove(this.memoEl);var d=document.getElementById("annotation-memo__author");d.addEventListener("click",(function(){c.default.isAnnotMode&&n.showAuthorEdit()})),d.addEventListener("focusout",(function(e){e.relatedTarget instanceof HTMLElement&&a.Util.hasClassForEventTargetEl(e.relatedTarget,"annotation-memo__author")||n.hideAuthorEdit()})),this.contentsEl.addEventListener("keyup",(function(e){-1===n.cursorMoveKey.indexOf(e.keyCode)&&n.clearHighlights(),n.showMemoContentCnt()})),this.contentsEl.addEventListener("paste",this.pasteMemoContentCntEvent),this.contentsEl.addEventListener("cut",this.cutMemoContentCntEvent),this.contentsEl.addEventListener("input",(function(){n.contentsEl.value.length>n.contentsEl.maxLength&&(n.contentsEl.value=n.contentsEl.value.slice(0,n.contentsEl.maxLength))})),this.contentsEl.addEventListener("scroll",(function(){n.backdropEl.scrollTop=n.contentsEl.scrollTop})),this.saveMemo=t}return e.prototype.applyHighlights=function(e,t){return e.replace(/\n$/g,"\n\n").replace(new RegExp(t,"gi"),"<mark>$&</mark>")},e.prototype.clearHighlights=function(){this.highlightsEl.innerHTML.length>0&&(this.highlightsEl.innerHTML="")},e.isShow=function(){return!a.Util.hasClass(document.getElementById("annotation-memo"),"annotation-memo--hide")},e}();t.MemoContent=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Controlbar=t.ZOOM_TYPE=void 0;var o=n(0),i=n(3),r=n(38),a=n(8);!function(e){e[e.ZoomIn=0]="ZoomIn",e[e.ZoomOut=1]="ZoomOut",e[e.OriginSize=2]="OriginSize",e[e.PrintA4=3]="PrintA4"}(t.ZOOM_TYPE||(t.ZOOM_TYPE={}));var s=function(){function e(){var e=this;this.docInfo=null,this.eventObserver=null,this.controlbarId=null,this.fadeControlbar=function(){if(o.Util.isMobileMode()||o.Util.isFullScreen()||a.default.isAnnotMode||r.ImageSheet.sheetLoadFail)e.jsContents.off("mousemove"),e.jqControlbar.off("mousemove"),e.jqControlbar.hide();else{var t,n=function(n){clearTimeout(t),e.jqControlbar.stop(!0,!0).show();var o=n.target;(!o.parentElement||o.id!==e.controlbarId&&o.parentElement.id!==e.controlbarId)&&(t=setTimeout((function(){e.jqControlbar.fadeOut(1e3)}),e.controlbarFadeoutTimeout))};e.jsContents.on("mousemove",(function(e){return n(e)})),e.jqControlbar.on("mousemove",(function(e){return n(e)})),e.moveControlbar()}},this.moveControlbar=function(){if(!o.Util.isMobileMode()){!function(){if(void 0===window.localSynap.config.controllbarPosition||0==Object.keys(window.localSynap.config.controllbarPosition).length)e.jqControlbar.css("left",0),e.jqControlbar.css("left",i("#thumbnail").outerWidth()+i("#contents").width()/2-i("#"+e.controlbarId).outerWidth()/2);else{var t=!!window.localSynap.config.controllbarPosition.left,n=!!window.localSynap.config.controllbarPosition.right;t&&!n?e.jqControlbar.css({left:i("#thumbnail").outerWidth()+Number(window.localSynap.config.controllbarPosition.left.replace("px",""))}):!t&&n?e.jqControlbar.css({right:document.getElementById("contents").offsetWidth-document.getElementById("contents").clientWidth+Number(window.localSynap.config.controllbarPosition.right.replace("px",""))}):(e.jqControlbar.css("left",0),e.jqControlbar.css("left",i("#thumbnail").outerWidth()+i("#contents").width()/2-i("#"+e.controlbarId).outerWidth()/2));var o=!!window.localSynap.config.controllbarPosition.bottom,r=!!window.localSynap.config.controllbarPosition.top;o&&!r?e.jqControlbar.css({bottom:window.localSynap.config.controllbarPosition.bottom}):!o&&r&&e.jqControlbar.css({top:window.localSynap.config.controllbarPosition.top,bottom:"auto"})}}()}},this.resizeWindow=function(){setTimeout((function(){e.fadeControlbar()}),150)},this.fullscreen=function(){e.fadeControlbar()},this.annotMode=function(){e.fadeControlbar()},this.sheetMove=function(){r.ImageSheet.sheetLoadFail&&e.sheetFail(),e.fadeControlbar()},this.sheetFail=function(){e.jsContents.off("mousemove"),e.jqControlbar.hide()},this.eventBind=function(t){e.eventObserver=t,e.eventObserver.resizeWindow.subscribe(e.resizeWindow),e.eventObserver.fullScreen.subscribe(e.fullscreen),e.eventObserver.resizeContents.subscribe(e.moveControlbar),e.eventObserver.sheet.subscribe(e.sheetMove),e.eventObserver.annotMode.subscribe(e.annotMode),e.fadeControlbar()},this.load=function(t,n){e.docInfo=t,e.controlbarId="cell"===e.docInfo.skinType?"cell-controlbar":"page-controlbar",e.jqControlbar=i("#"+e.controlbarId);var a=window.localSynap.config.controllbarFadeoutTimeout;if(a&&(e.controlbarFadeoutTimeout=a),o.Util.isHtmlSkin(e.docInfo)&&e.hideControlbarBtn(),e.eventBind(n),"page-controlbar"===e.controlbarId){var s=e.jqControlbar.width();e.jqControlbar.css("min-width",s)}r.ImageSheet.sheetLoadFail&&e.sheetFail()},this.hideControlbarBtn=function(){i(".controlbar__seperator").hide(),i("#cell-zoomout").hide(),i("#cell-zoomin").hide(),i("#page-zoomout").hide(),i("#page-zoomin").hide(),i("#page-originsize").hide(),i("#page-pagewidthfit").hide(),i("#page-pagefit").hide(),i("#page-rotate").hide(),o.Util.addClass(document.getElementById("page-hand-scroll"),"hide"),o.Util.addClass(document.getElementById("cell-hand-scroll"),"hide")},this.jsContents=void 0===window.localSynap.config.controllbarPosition||0==Object.keys(window.localSynap.config.controllbarPosition).length?i("#contents"):i("#contents, #header"),this.controlbarFadeoutTimeout=3e3}return e.ZOOM_LIST=[25,50,100,150,200],e}();t.Controlbar=s},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";(function(e){var o=this&&this.__awaiter||function(t,n,o,i){return new(o||(o=e))((function(e,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}l((i=i.apply(t,n||[])).next())}))},i=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Init=t.CS_TYPE=t.PRODUCT_TYPE=t.CONV_TYPE=t.__SERVICE_VERSION__=t.__SERVICE_TYPE__=void 0;var r=n(17),a=n(0),s=n(1),l=n(18),c=n(291),d=n(292),u=n(159),h=n(38),f=n(293),m=n(51),p=n(158),g=n(50),v=n(106),b=n(294),E=n(76),y=n(295),I=n(109),w=n(160),_=n(58),S=n(3),T=n(41);n(299);var x=n(300),C=n(57);t.__SERVICE_TYPE__="viewer";var M,k,O;t.__SERVICE_VERSION__="v2022",function(e){e[e.HTML=0]="HTML",e[e.IMAGE=1]="IMAGE"}(M=t.CONV_TYPE||(t.CONV_TYPE={})),function(e){e[e.SERVER=0]="SERVER",e[e.MODULE=1]="MODULE"}(k=t.PRODUCT_TYPE||(t.PRODUCT_TYPE={})),function(e){e.SERVER="S",e.CLIENT="C"}(O=t.CS_TYPE||(t.CS_TYPE={}));var B=function(t){var n=this;this.docInfo={properties:{}},this.passTryCnt=0,this.skinType={xls:"cell",xlsx:"cell",xlsb:"cell",csv:"cell",nxls:"cell",ppt:"slide",pptx:"slide",nppt:"slide",doc:"word",docx:"word",ndoc:"word",hwp2k:"word",hwp97:"word",hwx:"word",hwpx:"word",txt:"word",text:"word",hwpml:"word",jpeg:"image",jpg:"image",png:"image",tiff:"image",gif:"image",bmp:"image",webp:"image",jpeg2k:"image",mhtml:"image",html:"image",msg:"image",eml:"image",pdf:"pdf",odt:"word",xmldart:"word"},this.defaultConfig={ZOOM_LIST:[],isShowTitle:!1,isShowHeader:!0,headerAutoHide:!0,isShowInfo:!0,companyName:"",preventPrint:!1,isShowPrint:!1,isShowPrintForCell:!1,isShowPdfPrint:!1,allowCopy:!0,sheetMinSize:[],extraParam:{},extraHeader:{},loadErrorHandler:function(e){return""},contextPath:"/SynapDocViewServer",showThumbnail:!1,showThumbnailMobile:!1,isShowSns:!1,kakaoAPIKey:"",controllbarFadeoutTimeout:3e3,controllbarPosition:{},loadingPageFitType:0,loadingPageFitTypeForMobile:0,thumbnailExt:"",search:!1,useAnnotation:!1,removeContentsAreaTooltip:!0,rotatePdf:!1,fixedPageFit:!1,loadingRangeType:0,markerStyle:{}},this.doAfterGetStatusForIMAGEServer=function(e,t){var o={properties:{}};return o.jobId=n.id,o.contextPath=n.contextPath,o.title=e.fileName,o.downloadUrl=e.downloadUrl,o.status=e,o.serverDpi=e.dpi,o.dpi=C.DPI.isValidDPI(t.dpi)?t.dpi:o.serverDpi,n.setCommonDocInfo(o,e),o.productType=k.SERVER,o.metadata=e.metadata,o},this.doAfterGetStatusForHTMLServer=function(e,t){return o(n,void 0,void 0,(function(){var n,o,r;return i(this,(function(i){switch(i.label){case 0:return 0!==e.htmlErrCode?[2,this.doAfterGetStatusForIMAGEServer(e,t)]:(n=this.contextPath+"/xml/"+this.id,[4,a.Util.getXml(n)]);case 1:return o=i.sent(),(r=this.doAfterGetStatusForHTML(o)).contextPath=this.contextPath,r.resultPath=this.contextPath+"/result/"+r.status.resultFileName,r.title=e.fileName,r.downloadUrl=e.downloadUrl,r.productType=k.SERVER,[2,r]}}))}))},this.setCommonDocInfo=function(e,t){null===t.format?e.fileType="docx":e.fileType=t.format.toLowerCase();var o=e.fileType;e.skinType=n.skinType[o],"cell"!==e.skinType?e.currentPage=0:e.currentSheet=0},this.doAfterGetStatusForHTML=function(e){var t={properties:{}};if(t.jobId=n.id,t.resultPath=n.contextPath,t.title=e.index.doc_title?e.index.doc_title:n.id,t.downloadUrl=e.index.downUrl,e.format=e.index.file_type,t.status={convertType:M.HTML,single:"true"===e.index.use_single_page,fileName:e.index.file_name,format:e.index.file_type,htmlConverting:!0,htmlDone:!0,pageNum:0,imgDone:!1,resultFileName:e.index.file_name,width:e.index.width,height:e.index.height},n.setCommonDocInfo(t,e),"cell"===t.skinType||"csv"===t.skinType?t.status.pageNum=parseInt(e.index.sheet_cnt):"slide"===t.skinType?t.status.pageNum=parseInt(e.index.slide_cnt):"pdf"===t.skinType?(t.status.startPageNum=1,t.status.pageNum=parseInt(e.index.pdf_cnt),1===window.localSynap.config.loadingRangeType&&(e.index.startPage&&(t.status.startPageNum=parseInt(e.index.startPage)),e.index.endPage&&(t.status.pageNum=parseInt(e.index.endPage)-t.status.startPageNum+1))):"image"===t.skinType?t.status.pageNum=parseInt(e.index.image_cnt):"word"===t.skinType&&(t.status.documentWidth=parseInt(e.index.width)),t.productType=k.MODULE,e.index.metadata_list){var o=0,i=[];S.each(e.index.metadata_list.metadata,(function(e,t){if(t.name){var n=[];n[0]=JSON.parse(t.name),n[1]={content:t.content},i[o]=n,o++}})),t.metadata=i}return t},this.sendPassword=function(t){return o(n,void 0,e,(function(){var e,n;return i(this,(function(o){switch(o.label){case 0:if(""===t)return T.default.instance.passwordDialog("msg_input_password",this.sendPassword,this.cancelPassword),[2];T.default.instance.remove(),S("#contents").addClass("img-loading"),this.passTryCnt+=1,e=this.contextPath+"/passcode/"+this.id,(n={}).param={passcode:t},o.label=1;case 1:return o.trys.push([1,4,,5]),[4,a.Util.postJson(e,n)];case 2:return o.sent(),S("#contents").removeClass("img-loading"),[4,this.load()];case 3:return o.sent(),[3,5];case 4:return o.sent(),S("#contents").removeClass("img-loading"),T.default.instance.openDocErrorDialog("help.erro_code.errorcode.255.desc1"),[3,5];case 5:return[2]}}))}))},this.cancelPassword=function(){T.default.instance.refreshDialog()},this.passwordProcess=function(){n.passTryCnt>0?T.default.instance.passwordDialog("msg_input_retry",n.sendPassword,n.cancelPassword):T.default.instance.passwordDialog(null,n.sendPassword,n.cancelPassword)},this.getArchiveFileList=function(){return o(n,void 0,e,(function(){var e;return i(this,(function(t){switch(t.label){case 0:e=this.contextPath+"/archiveFileList/"+this.id,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,a.Util.postJson(e)];case 2:return[2,t.sent()];case 3:return t.sent(),S("#contents").removeClass("img-loading"),T.default.instance.openDocErrorDialog("msg_archiveFile_convFail"),[2,null];case 4:return[2]}}))}))},this.zipProcess=function(e){return o(n,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return[4,this.getArchiveFileList()];case 1:return(t=n.sent())&&(S("#contents").removeClass("img-loading"),new w.FileExplorer(t,this.docInfo.title,this.contextPath,this.id,this.docInfo.status.convertType,e).archiveFileViewDialog()),[2]}}))}))},this.errProcess=function(e,t){var o="";if(3!==e){if(2===e)o="help.erro_code.errorcode.2.desc1";else if(4===e)o="help.erro_code.errorcode.4.desc1";else if(9===e)o="help.erro_code.errorcode.3.desc1";else{if(21===e)return void n.zipProcess(t);if(22===e)o="help.error_code.errorcode.22.desc1";else if(101===e)o="help.erro_code.errorcode.101.desc1";else if(134===e||148===e)o="help.erro_code.errorcode.134.desc1";else if(254===e)o="help.erro_code.errorcode.254.desc1";else if(255===e)o="help.erro_code.errorcode.255.desc1";else{if(!window.localSynap||"function"!=typeof window.localSynap.loadErrorHandler)return void(location.href=a.Util.getUrlWithExtraParam(n.contextPath+"/exception?convLocale="+t));o=window.localSynap.loadErrorHandler(e)}}T.default.instance.openDocErrorDialog(o)}else n.passwordProcess()},this.initConfig=function(){for(var e in window.localSynap||(window.localSynap={}),window.localSynap.config||(window.localSynap.config={}),n.defaultConfig)void 0===window.localSynap.config[e]&&(window.localSynap.config[e]=n.defaultConfig[e])},this.initService=function(e){a.Util.setServiceVersion("v2022"),a.Util.setServiceType("viewer"),a.Util.isDocslive()?n.docInfo.cs=void 0!==e.cs&&e.cs.toUpperCase()===O.SERVER?O.SERVER:O.CLIENT:n.docInfo.cs=""},this.initUserInfo=function(){n.userInfo={login:!1,annotView:!1,annotEdit:!1,annotDownPdf:!1,annotSavePdf:!1,enablePrint:!a.Util.isServer(n.docInfo)||a.Util.isServer(n.docInfo)&&!a.Util.isSupportedVer2022()}},this.localSynapSetting=function(){var e=window.localSynap;e.getCurrentPage=function(){return a.Util.isCellSkin(n.docInfo)?n.docInfo.currentSheet+1:n.docInfo.currentPage+1},e.moveNext=function(){var t=e.getCurrentPage()-1;t<n.docInfo.status.pageNum-1&&(a.Util.isCellSkin(n.docInfo)?n.eventObserver.sheet.notify({sheetIdx:t+1}):n.eventObserver.page.notify({pageNum:t+1,isScroll:!1}))},e.movePrev=function(){var t=e.getCurrentPage()-1;t>0&&(a.Util.isCellSkin(n.docInfo)?n.eventObserver.sheet.notify({sheetIdx:t-1}):n.eventObserver.page.notify({pageNum:t-1,isScroll:!1}))},e.movePage=function(e){e>0&&e<=n.docInfo.status.pageNum&&(a.Util.isCellSkin(n.docInfo)?n.eventObserver.sheet.notify({sheetIdx:e-1}):n.eventObserver.page.notify({pageNum:e-1,isScroll:!1}))},e.search=function(e,t){var o=function(){e.length<=0||(S("#search-btn").trigger("click"),S("#search__input").val(e),n.eventObserver.searchNext.notify(_.SEARCH_TYPE.NEXT))},i=Number(t);i&&i>0&&i<=n.docInfo.status.pageNum?a.Util.isCellSkin(n.docInfo)?n.eventObserver.sheet.notify({sheetIdx:i-1}):n.eventObserver.page.notify({pageNum:i-1,isScroll:!1,callback:o}):o()},e.getPageSize=function(){return n.docInfo.status.pageNum},e.applyAnnot=function(e){n.eventObserver.applyAnnot.notify(e)},e.laser=function(e){m.Head.callLaserClient(a.Util.isCellSkin(n.docInfo),e)}},this.movePage=function(){window.localSynap.onMovePage&&a.Util.isFunction(window.localSynap.onMovePage)&&window.localSynap.onMovePage()},this.scroll=function(e){window.localSynap.onScroll&&a.Util.isFunction(window.localSynap.onScroll)&&window.localSynap.onScroll(e)},this.keyPress=function(e){window.localSynap.onKeyDown&&a.Util.isFunction(window.localSynap.onKeyDown)&&window.localSynap.onKeyDown(e)},this.saveAnnot=function(e){window.localSynap.onSaveAnnot&&a.Util.isFunction(window.localSynap.onSaveAnnot)&&window.localSynap.onSaveAnnot(e)},this.keyUp=function(e){window.localSynap.onKeyUp&&a.Util.isFunction(window.localSynap.onKeyUp)&&window.localSynap.onKeyUp(e)},this.moveLaser=function(e){window.localSynap.onMoveLaser&&a.Util.isFunction(window.localSynap.onMoveLaser)&&window.localSynap.onMoveLaser(e)},this.loadDocument=function(){var e=a.Util.isConvHtml(n.docInfo)&&("word"===n.docInfo.skinType||"cell"===n.docInfo.skinType||"slide"===n.docInfo.skinType);window.localSynap.onLoadBody&&a.Util.isFunction(window.localSynap.onLoadBody)&&!e&&window.localSynap.onLoadBody()},this.optionSettings=function(){var e=window.localSynap.config;e.ZOOM_LIST&&0!==e.ZOOM_LIST.length&&(E.Controlbar.ZOOM_LIST=e.ZOOM_LIST),e.preventPrint&&S("body").addClass("layout")},this.getConvLocale=function(e){return void 0===e.convLocale?"ko":e.convLocale},this.getAnnotToken=function(e){return void 0===e.annotToken?"":e.annotToken},this.isModuleType=function(e){return void 0===e.key},this.getContextPath=function(e){var t,o=n.isModuleType(e)?e.rs:e.contextPath;return!o&&void 0!==window.localSynap&&window.localSynap.config.contextPath&&(o=window.localSynap.config.contextPath.trim()),(t=o)&&t.length>1&&"/"===t[t.length-1]?o.substring(0,o.length-1):o},this.getInfoURL=function(e){return e.imageConverting?n.contextPath+"/status/"+e.key+".js":n.isModuleType(e)?n.getContextPath(e)+"/"+n.id+".xml":n.contextPath+"/status/"+e.key},this.getUserInfoFromServer=function(){return o(n,void 0,void 0,(function(){var e,t;return i(this,(function(n){switch(n.label){case 0:return e=this.docInfo.contextPath+"/user?"+a.Util.setAnnotQueryString(this.docInfo)+"&key="+this.docInfo.jobId,[4,a.Util.getJson(e)];case 1:return(t=n.sent()).success&&(this.userInfo=t.data),[2]}}))}))},this.load=function(){return o(n,void 0,e,(function(){var e,t,n,o,w,_,S,M,O,B,A,P,U,L;return i(this,(function(i){switch(i.label){case 0:return a.Util.checkMouseDown(),e=a.Util.getParameter(),this.id=this.isModuleType(e)?e.fn:e.key,this.contextPath=this.getContextPath(e),[4,l.LocaleMessage.setLocale(this.getConvLocale(e))];case 1:t=i.sent(),document.documentElement.setAttribute("lang",t),document.title=l.LocaleMessage.getMessage("view_title"),l.LocaleMessage.setLocaleMessage(),this.initConfig(),n=this.getInfoURL(e),o=!0,i.label=2;case 2:if(!o)return[3,16];i.label=3;case 3:return i.trys.push([3,14,,15]),this.isModuleType(e)?[4,a.Util.getXml(n)]:[3,5];case 4:return _=i.sent(),[3,7];case 5:return[4,a.Util.getJson(n)];case 6:_=i.sent(),i.label=7;case 7:return(w=_).imgDone?(this.docInfo=this.doAfterGetStatusForIMAGEServer(w,e),this.docInfo.status.imageConverting=!!e.imageConverting,this.docInfo.status.imageConverting&&(this.docInfo.productType=k.MODULE),this.docInfo.annotToken=this.getAnnotToken(e),o=!1,[3,13]):[3,8];case 8:return w.htmlDone?(S=this,[4,this.doAfterGetStatusForHTMLServer(w,e)]):[3,10];case 9:return S.docInfo=i.sent(),this.docInfo.annotToken=this.getAnnotToken(e),o=!1,[3,13];case 10:return w.index?(this.docInfo=this.doAfterGetStatusForHTML(w),o=!1,[3,13]):[3,11];case 11:return[4,a.Util.sleep(1e3)];case 12:i.sent(),i.label=13;case 13:return[3,15];case 14:return"403"===i.sent().message?T.default.instance.openDocErrorDialog("msg_exception_url_access_failed"):T.default.instance.openDocErrorDialog("help.erro_code.errorcode.255.desc1"),[2,!1];case 15:return[3,2];case 16:return this.docInfo.status.imgDone&&this.docInfo.status.imgErrCode>0?(this.errProcess(this.docInfo.status.imgErrCode,t),[2,!1]):this.docInfo.status.htmlDone&&this.docInfo.status.htmlErrCode>0?(this.errProcess(this.docInfo.status.htmlErrCode,t),[2,!1]):(s.Browser.instance.isIE||s.Browser.instance.isIOS13Lower())&&"webp"===this.docInfo.fileType?(T.default.instance.openDocErrorDialog("msg_browser_not_support_format"),[2,!1]):(this.initService(e),this.initUserInfo(),a.Util.isServer(this.docInfo)?[4,this.getUserInfoFromServer()]:[3,18]);case 17:i.sent(),i.label=18;case 18:return this.docInfo.enablePrint=this.userInfo.enablePrint,M=[],a.Util.isHtmlSkin(this.docInfo)?("word"===this.docInfo.skinType||a.Util.useSingle(this.docInfo)?M=[new m.Head,new y.Word,new p.Presentation,new g.KeyEvent,new v.MobileEvent,new b.WindowEvent]:"cell"===this.docInfo.skinType?M=[new f.HtmlSheet,new m.Head,new p.Presentation,new g.KeyEvent,new v.MobileEvent,new b.WindowEvent,new E.Controlbar]:"slide"===this.docInfo.skinType&&(M=s.Browser.instance.isMobile?[new m.Head,new I.Slide,new p.Presentation,new g.KeyEvent,new v.MobileEvent,new b.WindowEvent,new E.Controlbar]:[new m.Head,new d.default,new I.Slide,new p.Presentation,new g.KeyEvent,new v.MobileEvent,new b.WindowEvent,new E.Controlbar]),[3,22]):[3,19];case 19:return O=new r.default(this.userInfo),a.Util.isServer(this.docInfo)?(C.DPI.initDPIFromServer(this.docInfo),a.Util.isUseAnnotation(this.docInfo)?[4,O.getAnnotationInfosAllPagesFromServer(this.docInfo)]:[3,21]):[3,21];case 20:i.sent(),i.label=21;case 21:M="cell"===this.docInfo.skinType?[new h.ImageSheet,new m.Head,new p.Presentation,new g.KeyEvent,new v.MobileEvent,new b.WindowEvent,new E.Controlbar,new x.MobileControlbar,O]:[new m.Head,new u.ImagePage,new c.default,new p.Presentation,new g.KeyEvent,new v.MobileEvent,new b.WindowEvent,new E.Controlbar,new x.MobileControlbar,O],i.label=22;case 22:B=0,A=M,i.label=23;case 23:return B<A.length?(P=A[B]).constructor.name!==h.ImageSheet.name&&P.constructor.name!==u.ImagePage.name&&P.constructor.name!==r.default.name?[3,25]:[4,P.load(this.docInfo,this.eventObserver)]:[3,27];case 24:return i.sent(),[3,26];case 25:P.load(this.docInfo,this.eventObserver),i.label=26;case 26:return B++,[3,23];case 27:return this.eventObserver.initLoadAfter.notify(),a.Util.isHtmlSkin(this.docInfo)||"cell"===this.docInfo.skinType||(U=this.eventObserver.resizeWindow.observers,L=U[1],U.splice(1,1),U.splice(2,0,L)),this.localSynapSetting(),a.Util.isCellSkin(this.docInfo)?this.eventObserver.sheet.subscribe(this.movePage):this.eventObserver.page.subscribe(this.movePage),this.eventObserver.scroll.subscribe(this.scroll),this.eventObserver.keyPress.subscribe(this.keyPress),this.eventObserver.keyUp.subscribe(this.keyUp),a.Util.isDocslive()&&(this.eventObserver.saveAnnotCb.subscribe(this.saveAnnot),this.eventObserver.moveLaserCb.subscribe(this.moveLaser)),this.optionSettings(),this.loadDocument(),[2,!0]}}))}))},this.eventObserver=t};t.Init=B}).call(this,n(5))},,function(e,t,n){"use strict";(function(e){var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.DrawingInk=t.getInkSize=void 0;var r,a=n(39),s=n(8),l=n(31),c=n(1),d=n(0),u=n(60),h=n(29);function f(e,t){var n=e,o=n.split("M").join("M ");n.indexOf("C")>-1&&(o=o.split("C").join(" C ")),n.indexOf("L")>-1&&(o=o.split("L").join(" L "));for(var i="",r=0,a=(o=o.split(",").join(" ")).trim().split(" ");r<a.length;r++){var s=a[r],l=parseFloat(parseFloat(s).toFixed(2));isNaN(l)||(s=(l/t).toFixed(2)),i+=s+" "}return i}function m(e,t,n){for(var o=[],i=[],r=!0,a=0,s=f(e,n).trim().split(" ");a<s.length;a++){var c=s[a],d=parseFloat(c);isNaN(d)||(r?(r=!1,o.push(d)):(r=!0,i.push(d)))}var u=Math.min.apply(null,o),h=Math.max.apply(null,o),m=Math.min.apply(null,i),p=Math.max.apply(null,i),g=t/n;return l.getAnnotSizeWithStroke(u,m,h-u,p-m,g)}!function(e){e[e.ADD=0]="ADD",e[e.REMOVE=1]="REMOVE",e[e.MOVE_AND_STYLE=2]="MOVE_AND_STYLE"}(r||(r={})),t.getInkSize=m;var p=function(t){function n(n,o,i,p,g){var v=t.call(this,n,o,i,p,g)||this;return v.tempPath=null,v.reducePathRange=3,v.line=a.line().curve(a.curveCardinal).x((function(e){return e.x})).y((function(e){return e.y})),v.markerPath="",v.markerDrawTmp=function(e,t){var n=event;n.touches&&n.touches.length>1||(c.Browser.instance.isMobile?(t||2===v.reducePathRange)&&(v.reducePathRange=0,v._drawMarkerInTemp(a.mouse(e))):(t||3===v.reducePathRange)&&(v.reducePathRange=0,v._drawMarkerInTemp(a.mouse(e))),v.reducePathRange++)},v._drawMarkerInTemp=function(e){if(null!=v.newSvg){var t=v.line;v.tempPath.push({x:e[0],y:e[1]}),v.newSvg.attr("d",(function(e){return t(e)}))}},v.markerListen=function(e,t){var n=event;if(!(n.touches&&n.touches.length>1)){var o=e,i=d.Util.getParentElement(o._groups[0][0]).id,r=d.Util.getIdxFromElmId(i,"marker-section");s.default.isDrawingMode=!0,v.tempPath=[],v.newSvg=e.append("path").data([v.tempPath]).style("stroke",l.DrawingTool.hexToRgb(u.default.getTypeToHexColor(v.attr.color))).style("stroke-width",v.attr.thickness*h.default.instance.getPageOrCurrentSheetRatio(r,v.isCell)).style("opacity",v.attr.transparency).style("fill","none").attr("d",v.line).attr("class","tmp-marker-path").attr("id","tmp-marker-path"),v.markerDrawTmp(t,!0),v.markerDrawBind(e,v.markerEnd,(function(){v.markerDrawTmp(t,!1)}))}},v.correctPath=function(e){var t=e;if(null!==e&&e.indexOf("Z")>-1){var n=e.replace("Z","").replace("M","");t="M"+n+"L"+n}return t},v.markerEnd=function(e,t){if(s.default.isDrawingMode){var n=event;if((!n.touches||0===n.touches.length)&&null!=v.tempPath&&0!==v.tempPath.length){e.on("mousemove",null),e.on("pointermove",null),e.on("touchmove",null);var o=d.Util.getTmpPathElem(t);if(o){var i=o.getAttribute("d");if(""!==i){d.Util.isDocslive()||v.getCurMarkerSection()&&v.getCurMarkerSection()!=d.Util.getParentElement(t)&&(v.funcSaveDrawing(),v.markerPath="");var r=v.correctPath(i);a.select(o).attr("d",r),v.tempPath=[],v.markerPath+=r+" ",v.curMarkerSection=d.Util.getParentElement(t),v.eventObserver.editedAnnotation.notify(v.marker.getPageIdxWhenInAnnotationMode()),d.Util.isDocslive()&&v.funcSaveDrawing()}}}}},v.markerEventBind=function(e,t){var n=v.markerListen,o=v.markerEnd;e.on(d.Util.getClickStartEventName(),(function(){t()&&n(e,this)})),e.on(d.Util.getClickEndEventName(),(function(){o(e,this)})),c.Browser.instance.isMobile||e.on("mouseleave pointerleave",(function(){o(e,this)}))},v.getAnnotSize=function(e,t){return m(v.markerPath,parseFloat(e.style.strokeWidth),t)},v.createSvg=function(e,t,n){for(var o=t,i=l.getViewBox(o.l,o.t,o.w,o.h),r=i.left,s=i.top,c=i.width,d=i.height,u=a.select(e).append("svg").attr("id",n).attr("class","marker-svg").attr("viewBox",r+" "+s+" "+c+" "+d).attr("focusable","false").style("left",r+"px").style("width",c+"px").style("top",s+"px").style("height",d+"px").style("stroke",l.DrawingTool.hexToRgb(l.getAnnotInfoColor(o.c))).style("stroke-width",l.getAnnotInfoStrokeWidth(o.path)).style("opacity",l.getAnnotInfoAlpha(o.a)),h=l.getPathList(l.getAnnotInfoPathText(o.path)),f=0;f<h.length;f++)u.append("path").attr("class","marker-svg__path").attr("d",""+h[f]);return u},v.createAnnotInfo=function(e,t,n,o,i,r){var a=v.createAnnotBaseInfo(e,t,o,i,r),s=(parseFloat(i.style.strokeWidth)/r).toFixed(2),l=f(v.markerPath,r),c=a.annot;return c.type="ink",c.path={w:s,text:l},a},v.setAnnotInfoThickness=function(e,t){var n=e.annot;n.path||(n.path={w:"",text:""}),n.path.w=t.toString()},v.setAnnotInfoPath=function(e,t){var n=e.annot;n.path||(n.path={w:"",text:""}),n.path.text=t},v.redrawPath=function(t,n){var o=new Set;l.getPathList(n).forEach((function(e){o.add(e)}));for(var i=new e,s=d.Util.getChildren(t),c=0;c<s.length;c++)i.set(s[c].getAttribute("d"),s[c]);switch(o.size>i.size?r.ADD:o.size<i.size?r.REMOVE:r.MOVE_AND_STYLE){case r.ADD:var u=a.select(t);o.forEach((function(e){i.has(e)||u.append("path").attr("class","marker-svg__path").attr("d",""+e)}));break;case r.REMOVE:i.forEach((function(e,t){o.has(t)||d.Util.removeElem(e)}));break;case r.MOVE_AND_STYLE:var h=0;o.forEach((function(e){s[h++].setAttribute("d",e)}))}},v.redrawAttr=function(e,t){var n=t.annot;v.redrawMoveAttr(e,t);var o={};o.color=l.getAnnotInfoColor(n.c),o.thickness=l.getAnnotInfoStrokeWidth(n.path),o.transparency=l.getAnnotInfoAlpha(n.a),v.redrawPath(e,n.path.text),v.setSvgStyle(e,o)},v.redrawAttrEl=function(e,t,n){var o={};o[""+t]=n,v.setSvgStyle(e,o)},v.getMarkerStyleAttr=function(e,t){var n=e.annot,o=l.getAnnotInfoColor(n.c),i=l.getAnnotInfoStrokeWidth(n.path),r=l.getAnnotInfoAlpha(n.a);return{color:o,thickness:parseFloat(i)*t,transparency:parseFloat(r)}},v.clear=function(){v.newSvg=null,v.curMarkerSection=null,v.markerPath=""},v.moveMarker=function(e,t,n){var o=e.path.text;if(!o)return null;for(var i="",r=!0,a=0,s=o.trim().split(" ");a<s.length;a++){var l=s[a],c=parseFloat(l);if(!isNaN(c)){var d=r?t:n;r=!r,l=(c-d).toFixed(2)}l.length&&(i+=l+" ")}return i},v}return i(n,t),n}(l.DrawingTool);t.DrawingInk=p}).call(this,n(49))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ANNOTLIST_FLAG=void 0;var o,i=n(0),r=n(17),a=n(18),s=n(8),l=n(31),c=n(1),d=n(61),u=n(19),h=n(268);!function(e){e[e.ON=0]="ON",e[e.OFF=1]="OFF"}(o=t.ANNOTLIST_FLAG||(t.ANNOTLIST_FLAG={}));var f=function(){function e(){var t=this;this.eventObserver=null,this.docInfo=null,this.statusBeforeMemo=o.OFF,this.funcgetAnnotationInfos=null,this.pageOrSheetStr=void 0,this.annotList_id="annotation-list",this.annotListItems_id="annotation-list__items",this.searchInputDiv_id="annotation-list__search",this.searchInput_id="annotation-list__search__input",this.searchResult_id="annotation-list__search-result",this.searchResultCnt_id="annotation-list__search-result__cnt",this.searchBtn_id="annotation-list__search_btn",this.annotListEl=document.getElementById(this.annotList_id),this.searchInputDiv=document.getElementById(this.searchInputDiv_id),this.annotListItemsEl=document.getElementById(this.annotListItems_id),this.searchInputEl=document.getElementById(this.searchInput_id),this.searchResultEl=document.getElementById(this.searchResult_id),this.searchResultCntEl=document.getElementById(this.searchResultCnt_id),this.annotListBtn=document.getElementById(this.annotList_id+"-btn"),this.menuSelect="marker-menu--select",this.activeClassName="annot-page-li-active",this.getAnnotPageId=function(e){return"annot-page"+e},this.getAnnotArrowBtnId=function(e){return"annot-page"+e+"-btn"},this.getAnnotPageUlId=function(e){return"annot-page"+e+"-ul"},this.getMarkerListId=function(e,t){return"annotli-"+e+"-"+t},this.getColorId=function(e,t){return"color-"+e+"-"+t},this.getAuthorId=function(e,t){return"author-"+e+"-"+t},this.getDateId=function(e,t){return"date-"+e+"-"+t},this.getNoteBtnId=function(e,t){return"noteBtn-"+e+"-"+t},this.getDelBtnId=function(e,t){return"delBtn-"+e+"-"+t},this.annotationListIsOn=function(){return!i.Util.containClassName(t.annotListEl,"hide")},this.annotListOn=function(n){void 0===n&&(n=!0),i.Util.removeClass(t.annotListEl,"hide"),i.Util.addClass(t.annotListBtn,t.menuSelect),n&&(e.STATUS=o.ON)},this.annotListOff=function(n){void 0===n&&(n=!0),i.Util.addClass(t.annotListEl,"hide"),i.Util.removeClass(t.annotListBtn,t.menuSelect),n&&(e.STATUS=o.OFF)},this.setColor=function(e,t){e.style.backgroundColor=l.DrawingTool.hexToRgb(l.getAnnotInfoColor(t))},this.setAuthor=function(e,n,o){document.getElementById(t.getAuthorId(e,n)).value=o&&o.t?o.t:""},this.setNoteIcon=function(e,n,o){var r,a="marker-memo-btn__img--list",s=t.getMarkerListId(e,n);o&&o.text&&o.text.length>0?(r=document.getElementById(s).getElementsByClassName(""+a)).length>0&&(i.Util.addClass(r.item(0),a+"--set"),i.Util.removeClass(r.item(0),""+a)):(r=document.getElementById(s).getElementsByClassName(a+"--set")).length>0&&(i.Util.addClass(r.item(0),""+a),i.Util.removeClass(r.item(0),a+"--set"))},this.createPageEl=function(e,n){var o=parseInt(e),r=document.createElement("div");r.id=t.getAnnotArrowBtnId(o),r.className="annot-page-btn annot-list-btn__img",i.Util.setTabIndex(r,t.annotListBtn.tabIndex),r.title=a.LocaleMessage.getMessage("annot-list-off");var s=document.createElement("div");s.className="annot-page-totalNum",s.innerText=String(n);var l=document.createElement("span");l.innerText=t.pageOrSheetStr+" "+(o+1).toString();var c=document.createElement("div");return c.className="annot-page-nav",c.appendChild(r),c.appendChild(l),c.appendChild(s),i.Util.bindClickEvent(c,(function(){i.Util.containClassName(document.getElementById(t.getAnnotPageUlId(o)),"hide")?(i.Util.removeClass(document.getElementById(t.getAnnotPageUlId(o)),"hide"),i.Util.removeClass(document.getElementById(t.getAnnotArrowBtnId(o)),"annot-list-btn__img--off"),r.title=a.LocaleMessage.getMessage("annot-list-off")):(i.Util.addClass(document.getElementById(t.getAnnotPageUlId(o)),"hide"),i.Util.addClass(document.getElementById(t.getAnnotArrowBtnId(o)),"annot-list-btn__img--off"),r.title=a.LocaleMessage.getMessage("annot-list-on"))})),i.Util.bindFocus(r),c},this.getLocalMessage=function(e){return"ink"===e&&(e="pen"),a.LocaleMessage.getMessage(e)},this.toggleEditMode=function(e){var t=document.getElementById(e);return!!t&&(i.Util.containClassName(t,"annot-page-li-info-authorInput--readonly")?(i.Util.removeClass(t,"annot-page-li-info-authorInput--readonly"),t.readOnly=!1,t.focus()):(i.Util.addClass(t,"annot-page-li-info-authorInput--readonly"),t.readOnly=!0,c.Browser.instance.isIE&&(t.setSelectionRange(0,0),t.blur())),t.readOnly)},this.modifyAuthor=function(e){var n=document.getElementById(e);if(!n)return!1;var o=r.default.parseTextId(e),i=r.default.getAnnotData(t.funcgetAnnotationInfos(),o.pageNum,o.idx),a=i.annot.contents&&i.annot.contents.t?i.annot.contents.t:"";if(a===n.value)return!0;var s={author:a=n.value};return t.eventObserver.modifyMarkerAttr.notify({elemId:e,attr:s}),!0},this.getTimeStr=function(e){if(!e||!e.d)return"";var t=e.d;return t.substr(2,4)+"/"+t.substr(6,2)+"/"+t.substr(8,2)+" "+t.substr(10,2)+":"+t.substr(12,2)+":"+t.substr(14,2)},this.createAnnotInfo=function(e,n,o){var s=document.createElement("div");s.className="tb";var l=document.createElement("div");l.className="tc annot-page-li-info-color",l.id=t.getColorId(n,o),t.setColor(l,e.c);var c=document.createElement("div");c.className="tc annot-page-li-info-type",c.innerText=t.getLocalMessage(r.getAnnotType(e));var d=document.createElement("div");d.appendChild(l),d.appendChild(c),s.appendChild(d);var u=e.contents&&e.contents.t?e.contents.t:"",h=t.getAuthorId(n,o),f=document.createElement("input");f.className="annot-page-li-info-authorInput annot-page-li-info-authorInput--readonly",f.type="text",f.id=h,f.value=u,f.maxLength=128,f.readOnly=!0,f.title=a.LocaleMessage.getMessage("author"),f.tabIndex=-1;var m=document.createElement("label");m.className="hide",m.setAttribute("for",h),m.innerText=a.LocaleMessage.getMessage("author"),f.addEventListener("keydown",(function(e){13==e.keyCode&&f.blur()})),f.addEventListener("blur",(function(e){var n=e.target;!n.readOnly&&t.modifyAuthor(n.id)&&t.toggleEditMode(n.id)})),i.Util.disableKeyEventForPageMove(f);var p=document.createElement("div");p.className="tc annot-page-li-info-author",p.appendChild(m);var g=function(){if(r.default.isAbleToEditAuthor()){var e=document.createElement("div");return e.className="author-modify-btn__img annot-page-li-info-authorEditBtn",e.title=a.LocaleMessage.getMessage("icon_author_edit"),e}}();g&&p.appendChild(g),p.appendChild(f);var v=document.createElement("div");if(v.className="annot-page-li-info-left annot-page-li-info-authorDiv",v.appendChild(p),s.appendChild(v),e.contents){var b=document.createElement("div");b.id=t.getDateId(n,o),b.className="annot-page-li-info-left",b.innerText=t.getTimeStr(e.contents),s.appendChild(b)}var E=document.createElement("div");return E.className="annot-page-li-info",E.appendChild(s),E},this.createAnnotBtnGroup=function(e,n){var o=document.createElement("div");e.contents&&e.contents.text&&e.contents.text.length>0?o.className="marker-memo-btn__img--list--set":o.className="marker-memo-btn__img--list";var r=s.default.parseMarkerId(n);o.title=a.LocaleMessage.getMessage("icon_memo");var l=document.createElement("div");l.id=t.getNoteBtnId(r.pageOrSheetIdx,r.annotId),l.className="annot-page-li-btnGroup-btn",l.title=a.LocaleMessage.getMessage("icon_memo"),l.addEventListener("click",(function(){t.selectAnnotListItem(String(r.pageOrSheetIdx),n,(function(){t.eventObserver.newMemo.notify({pageOrSheetIdx:r.pageOrSheetIdx,annotId:r.annotId})}))}),!1),l.appendChild(o);var c=document.createElement("div");c.className="marker-delete-btn__img marker-delete-btn",c.title=a.LocaleMessage.getMessage("icon_delete");var d=document.createElement("div");d.id=t.getDelBtnId(r.pageOrSheetIdx,r.annotId),d.className="annot-page-li-btnGroup-btn marker-delete-btn",d.title=a.LocaleMessage.getMessage("icon_delete"),d.addEventListener("click",(function(e){var n=e.target,o=n.id?n.id:i.Util.getParentElement(n).id;t.eventObserver.deleteMarker.notify(o)}),!1),d.appendChild(c);var u=document.createElement("div");return u.className="annot-page-li-btnGroup",u.appendChild(l),u.appendChild(d),u},this.removeSelectActive=function(){var e=document.getElementsByClassName(t.activeClassName);0!==e.length&&i.Util.removeClass(e.item(0),t.activeClassName)},this.selectAnnotation=function(e){if(t.removeSelectActive(),s.default.isAnnotMode&&e){var n=document.getElementById(t.getMarkerListId(e.page,e.annotId));if(n){if(t.annotationListIsOn()){var o=n.offsetTop+n.offsetHeight,r=t.annotListEl.scrollTop+t.annotListEl.offsetHeight,a=n.offsetTop<t.annotListEl.scrollTop?n.offsetTop-4:o<r?0:o+4-t.annotListEl.offsetHeight;a>0&&(t.annotListEl.scrollTop=a)}i.Util.addClass(n,t.activeClassName)}}},this.selectAnnotListItem=function(e,n,o){var r=i.Util.isCellSkin(t.docInfo),a=Number(e),l=function(){s.annotScrollMove(document.getElementById(n).getAttribute("data-id"),a,r),o()};(r?t.docInfo.currentSheet:t.docInfo.currentPage)!=a?r?t.eventObserver.sheet.notify({sheetIdx:a,afterFunc:l}):t.eventObserver.page.notify({pageNum:a,isScroll:!1,afterFunc:l}):l()},this.createAnnotElement=function(t,n){var o=this,a=document.createElement("li");a.className="annot-page-li";var l=this.getMarkerListId(n,t.id);a.id=l;a.setAttribute("data-id",function(e){return"memo"===r.getAnnotType(e.annot)?d.MemoIcon.getMemoId(n,e.id):s.default.createtMarkerId(Number(n),e.id)}(t));var c=t.annot;return i.Util.bindClickEvent(a,(function(e){var r=e.target;if(!i.Util.hasClassForEventTargetEl(r,"annot-page-li-btnGroup-btn",2)){var a="";if(i.Util.hasClassForEventTargetEl(r,"annot-page-li-info-authorEditBtn",2)){var s=e.target;a=s.nextElementSibling.id}o.selectAnnotListItem(n,l,(function(){if(o.eventObserver.selectAnnotation.notify({page:n,annotId:t.id,showMemo:!1,showPopup:!0}),a){i.Util.syncTimer((function(){o.toggleEditMode(a)&&o.modifyAuthor(a)}),100)}}))}}),!1),a.appendChild(this.createAnnotInfo(c,n,t.id)),a.appendChild(this.createAnnotBtnGroup(c,l)),i.Util.setTabIndex(a,this.annotListBtn.tabIndex),a.title=this.getLocalMessage(r.getAnnotType(c)),e.searchText&&!this.filterNoteWithSearch(c)&&i.Util.addClass(a,"hide"),a},this.createAnnotationList=function(e,n){var o=t.getAnnotPageUlId(parseInt(e)),i=document.getElementById(o);return i||((i=document.createElement("ul")).id=o,i.className="annot-page-ul"),n&&n.forEach((function(n){i.appendChild(t.createAnnotElement(n,e))})),i},this.createAnnotPage=function(e,n,o,i){var r=document.createElement("div");r.id=t.getAnnotPageId(parseInt(n)),r.className="annot-page",r.appendChild(t.createPageEl(n,i)),r.appendChild(t.createAnnotationList(n,o)),e.appendChild(r)},this.renderAnnotationList=function(){for(;t.annotListItemsEl.hasChildNodes();)t.annotListItemsEl.removeChild(t.annotListItemsEl.firstChild);for(var n=document.createDocumentFragment(),o=t.funcgetAnnotationInfos(),i=0,a=0,s=Object.keys(o);a<s.length;a++){var l=s[a],c=r.default.getAnnotInfoPerPage(o,parseInt(l));if(c){var d=c.length;0!=d&&(e.searchText?i+=t.notesToRender(c).length:i+=c.length,t.createAnnotPage(n,l,c,d))}}e.searchText?(t.showSearchResult(),t.searchResultCntEl.innerText=i.toString(10)):t.hideSearchResult(),n.hasChildNodes()?t.showSearchInput():(t.noneAnnotPage(n),t.hideSearchInput()),t.annotListItemsEl.appendChild(n)},this.loadAnnotList=function(){t.renderAnnotationList()},this.findBeforeElement=function(e){for(var n=parseInt(e)-1,o=null;n>=0;){var i=t.getAnnotPageId(n);if(o=document.getElementById(i))return o.nextSibling;n-=1}},this.addAnnotByDate=function(e,n,o){for(var i=n.lastElementChild.childNodes,a=t.createAnnotElement(e,o),l=i.length-1;l>=0;--l){var c=i.item(l),d=s.default.parseMarkerId(c.id),u=d.pageOrSheetIdx,h=d.annotId,f=r.default.getAnnotData(t.funcgetAnnotationInfos(),u,h);if(new Date(f.annot.contents&&f.annot.contents.d?parseInt(f.annot.contents.d.substr(2)):99999999999999)<=new Date(e.annot.contents&&e.annot.contents.d?parseInt(e.annot.contents.d.substr(2)):99999999999999))return void c.parentNode.insertBefore(a,c.nextSibling)}n.lastElementChild.insertBefore(a,n.lastElementChild.firstChild)},this.addAnnotList=function(e,n){var o=document.getElementById("annot-page-no");i.Util.removeElem(o),t.showSearchInput(),t.filterNote(e.annot)&&(t.searchResultCntEl.innerText=String(Number(t.searchResultCntEl.innerText)+1));var r=t.getAnnotPageId(parseInt(n)),a=document.getElementById(r);if(a){t.addAnnotByDate(e,a,n);var s=a.getElementsByClassName("annot-page-totalNum")[0],l=parseInt(s.innerText)+1;s.innerText=l.toString()}else{var c=document.createDocumentFragment();if(t.createAnnotPage(c,n,[e],1),c.hasChildNodes()){var d=t.findBeforeElement(n);if(d)d.parentNode.insertBefore(c,d);else{var u=document.getElementById(t.annotListItems_id);void 0!==d?u.appendChild(c):u.insertBefore(c,u.firstChild)}}}},this.modifyAnnotList=function(e,n){var o=parseInt(n),r=t.getAnnotPageId(o);if(document.getElementById(r)){var a=document.getElementById(t.getColorId(o,e.id));if(t.setColor(a,e.annot.c),t.setAuthor(o,e.id,e.annot.contents),t.setNoteIcon(o,e.id,e.annot.contents),!i.Util.hasClass(t.searchResultEl,"hide")){var s=document.getElementById(t.getMarkerListId(Number(n),e.id));t.filterNote(e.annot)?i.Util.hasClass(s,"hide")&&(i.Util.removeClass(s,"hide"),t.searchResultCntEl.innerText=String(Number(t.searchResultCntEl.innerText)+1)):i.Util.hasClass(s,"hide")||(i.Util.addClass(s,"hide"),t.searchResultCntEl.innerText=String(Number(t.searchResultCntEl.innerText)-1))}}},this.noneAnnotPage=function(e){var t=document.createElement("div");t.id="annot-page-no",t.className="annot-page";var n=document.createElement("div");n.className="annot-page-nav";var o=document.createElement("span");o.id="annot-no-msg",o.innerText=a.LocaleMessage.getMessage("annot-no-msg"),n.appendChild(o),t.appendChild(n),e.appendChild(t)},this.deleteAnnotList=function(e,n){var o=parseInt(n),r=t.getAnnotPageId(o),a=document.getElementById(r);if(a){var s=t.getMarkerListId(o,e.id),l=document.getElementById(s);i.Util.removeElem(l);var c=t.getAnnotPageUlId(o),d=document.getElementById(c);if(d){t.filterNote(e.annot)&&(t.searchResultCntEl.innerText=String(Number(t.searchResultCntEl.innerText)-1));var u=d.getElementsByTagName("li").length;if(0!==u){var h=a.getElementsByClassName("annot-page-totalNum");h.length>0&&(h[0].innerText=String(u))}else{i.Util.removeElem(a);var f=document.getElementById("annotation-list");if(0===f.getElementsByClassName("annot-page").length){var m=document.createDocumentFragment();t.noneAnnotPage(m),f.appendChild(m),t.hideSearchInput()}}}}},this.updateAnnotList=function(e){e.status===s.ANNOT_STATUS_TYPE.ADD?t.addAnnotList(e.annot,e.page.toString()):e.status===s.ANNOT_STATUS_TYPE.MODIFY?t.modifyAnnotList(e.annot,e.page.toString()):e.status===s.ANNOT_STATUS_TYPE.DELETE&&t.deleteAnnotList(e.annot,e.page.toString())},this.annotMode=function(){if(e.STATUS==o.ON){t.annotListOff(!0);var n=document.getElementById("contents");i.Util.removeClass(n,"wrap__contents--annot-on")}t.eventObserver.resizeContents.notify()},this.hideAnnotListInMobile=function(n){n?(t.statusBeforeMemo=e.STATUS,t.annotListOff(!1)):(t.statusBeforeMemo==o.ON&&t.annotListOn(!1),t.statusBeforeMemo=o.OFF)},this.resizeWindow=function(){if(i.Util.isMobileMode()||e.STATUS!=o.ON||t.annotationListIsOn()){if(i.Util.isMobileMode()){var n=u.ScaleEvent.getBrowserScale();u.ScaleEvent._doScaleSkinThumbsAndAnnot(i.Util.isUseAnnotation(t.docInfo),n)}}else t.annotListOn(!1)},this.startViewportScroll=function(){s.default.isAnnotMode&&e.STATUS===o.ON&&i.Util.addClass(document.getElementById("annotation-list"),"hide")},this.endViewportScroll=function(){s.default.isAnnotMode&&e.STATUS===o.ON&&i.Util.removeClass(document.getElementById("annotation-list"),"hide")},this.eventBind=function(e){t.eventObserver=e,t.eventObserver.annotMode.subscribe(t.annotMode),t.eventObserver.updateAnnotList.subscribe(t.updateAnnotList),t.eventObserver.hideAnnotListInMobile.subscribe(t.hideAnnotListInMobile),t.eventObserver.selectAnnotation.subscribe(t.selectAnnotation),t.eventObserver.unSelectAnnotation.subscribe(t.removeSelectActive),t.eventObserver.resizeWindow.subscribe(t.resizeWindow),c.Browser.instance.isSupportVisualViewport()&&(t.eventObserver.startViewportScroll.subscribe(t.startViewportScroll),t.eventObserver.endViewportScroll.subscribe(t.endViewportScroll)),t.searchEvent()},this.load=function(e,n,o){t.docInfo=e,t.eventBind(n),t.funcgetAnnotationInfos=o,t.pageOrSheetStr=i.Util.isCellSkin(e)?a.LocaleMessage.getMessage("sheet"):a.LocaleMessage.getMessage("page")}}return e.prototype.showSearchInput=function(){i.Util.hasClass(this.searchInputDiv,"hide")&&i.Util.removeClass(this.searchInputDiv,"hide")},e.prototype.hideSearchInput=function(){i.Util.hasClass(this.searchInputDiv,"hide")||i.Util.addClass(this.searchInputDiv,"hide")},e.prototype.showSearchResult=function(){i.Util.hasClass(this.searchResultEl,"hide")&&(i.Util.removeClass(this.searchResultEl,"hide"),i.Util.addClass(this.searchInputDiv,"annotation-list__search--result"))},e.prototype.hideSearchResult=function(){i.Util.hasClass(this.searchResultEl,"hide")||(i.Util.addClass(this.searchResultEl,"hide"),i.Util.removeClass(this.searchInputDiv,"annotation-list__search--result"))},e.prototype.filterNoteWithSearch=function(t){var n;return(null===(n=t.contents.text)||void 0===n?void 0:n.toLowerCase().indexOf(e.searchText))>=0},e.prototype.filterNote=function(t){return e.searchText&&this.filterNoteWithSearch(t)},e.prototype.notesToRender=function(e){var t=this;return e.filter((function(e){return t.filterNote(e.annot)}))},e.prototype.searchAnnot=function(){var t;e.searchText=null===(t=this.searchInputEl.value)||void 0===t?void 0:t.toLocaleLowerCase(),this.renderAnnotationList()},e.prototype.searchEvent=function(){i.Util.disableKeyEventForPageMove(this.searchInputEl),i.Util.bindEnterKey(this.searchInputEl,this.searchAnnot.bind(this)),document.getElementById(this.searchBtn_id).addEventListener(i.Util.getClickOrTouchEventName(),this.searchAnnot.bind(this)),this.bindSearchMaxLength()},e.prototype.bindSearchMaxLength=function(){this.searchInputEl.addEventListener("input",(function(){var t=this;this.value.length<e.DEFAULT_SEARCH_LENGTH||(h.DialogFactory.instance.confirmDialog("input_limit_searchword","msg_submit",(function(){t.focus(),h.DialogFactory.instance.remove()})),this.value=this.value.slice(0,e.DEFAULT_SEARCH_LENGTH))}))},e.STATUS=o.OFF,e.searchText="",e.DEFAULT_SEARCH_LENGTH=50,e.STATUS_TOGGLE=function(){e.STATUS==o.OFF?e.STATUS=o.ON:e.STATUS=o.OFF},e.getAnnotListWidth=function(){var e=document.getElementById("annotation-list").getBoundingClientRect().width;return i.Util.isMobileMode()?0:e},e}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MouseScroll=void 0;var o=n(74),i=n(8),r=n(1),a=n(0),s=function(){function e(){var e=this;this.desktopElem=null,this.mobileElem=null,this.active=!1,this.mouseOut=function(){e.active||(e.desktopElem&&a.Util.removeClass(e.desktopElem.elem,e.desktopElem.selector),e.mobileElem&&a.Util.removeClass(e.mobileElem.elem,e.mobileElem.selector))},this.toggle=function(){e.active=!e.active,e.active?(e.desktopElem&&a.Util.addClass(e.desktopElem.elem,e.desktopElem.selector),e.mobileElem&&a.Util.addClass(e.mobileElem.elem,e.mobileElem.selector),e.enableHandScroll()):(e.desktopElem&&a.Util.removeClass(e.desktopElem.elem,e.desktopElem.selector),e.mobileElem&&a.Util.removeClass(e.mobileElem.elem,e.mobileElem.selector),e.disableHandScroll())}}return Object.defineProperty(e,"instance",{get:function(){return this.mouseScroll},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isActive",{get:function(){return this.active},enumerable:!1,configurable:!0}),e.prototype.bindDesktopControlbar=function(e){return this.desktopElem=e,this.toggle},e.prototype.bindMobileControlbar=function(e){return this.mobileElem=e,this.toggle},e.prototype.enableHandScroll=function(){document.getElementById("contents").addEventListener(a.Util.getClickStartEventName(),this.handScroll)},e.prototype.disableHandScroll=function(){document.getElementById("contents").removeEventListener(a.Util.getClickStartEventName(),this.handScroll)},e.prototype.handScroll=function(e){if(n=document.getElementsByClassName("active").length>0,s=e.target instanceof HTMLElement&&(null===(t=e.target.className)||void 0===t?void 0:t.indexOf("memo-icon"))>-1&&i.default.isAnnotMode,l=document.getElementsByClassName("memo-icon--on").length>0,c=a.Util.isFullScreen(),!(i.default.isDrawingMode||o.DrawingEraser.isActive||n||s||l||c)){var t,n,s,l,c,d=document.getElementById("contents"),u=e.clientX,h=e.clientY,f=d.scrollLeft,m=d.scrollTop,p=function(e){return e>20?2:e>15?1.8:e>10?1.5:e>5?1.2:1},g=function(e){var t=e.clientX-u,n=e.clientY-h;u=e.clientX,h=e.clientY,f-=t*p(Math.abs(t)),m-=n*p(Math.abs(n)),r.Browser.instance.isIE?(d.scrollLeft=f,d.scrollTop=m):d.scrollTo({left:f,top:m})};d.addEventListener(a.Util.getMoveEventName(),g),a.Util.addEventListenerOnce(d,a.Util.getClickEndEventName(),(function(){d.removeEventListener(a.Util.getMoveEventName(),g)})),a.Util.addEventListenerOnce(d,"mouseleave",(function(){d.removeEventListener(a.Util.getMoveEventName(),g)}))}},e.mouseScroll=new e,e}();t.MouseScroll=s},function(e,t,n){"use strict";(function(e){var o=this&&this.__awaiter||function(t,n,o,i){return new(o||(o=e))((function(e,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}l((i=i.apply(t,n||[])).next())}))},i=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.MobileEvent=t.TOUCH_DISTANCE=t.EVENT_INTERVAL=t.VK_MODE=t.SWIPE_DIRECTION=void 0;var r,a,s,l,c=n(0),d=n(1),u=n(19),h=n(25),f=n(3),m=n(8),p=n(36),g=n(30);!function(e){e[e.UP=0]="UP",e[e.RIGHT=1]="RIGHT",e[e.DOWN=2]="DOWN",e[e.LEFT=3]="LEFT"}(r=t.SWIPE_DIRECTION||(t.SWIPE_DIRECTION={})),function(e){e[e.active=0]="active",e[e.changeStatus=1]="changeStatus",e[e.deactive=2]="deactive"}(a=t.VK_MODE||(t.VK_MODE={})),function(e){e[e.SINGLE_TAP_INTERVAL=550]="SINGLE_TAP_INTERVAL",e[e.DOUBLE_TAP_INTERVAL=500]="DOUBLE_TAP_INTERVAL",e[e.SWIPE_INTERVAL=3e3]="SWIPE_INTERVAL",e[e.MULTI_TOUCH_INTERVAL=100]="MULTI_TOUCH_INTERVAL"}(s=t.EVENT_INTERVAL||(t.EVENT_INTERVAL={})),function(e){e[e.MOVE=5]="MOVE",e[e.DOUBLETAB=30]="DOUBLETAB",e[e.SWIPE=50]="SWIPE"}(l=t.TOUCH_DISTANCE||(t.TOUCH_DISTANCE={}));var v=function(){function t(){var n=this;this.docInfo=null,this.eventObserver=null,this.isGenTouchStart=!1,this.isGenTouchMove=!1,this.isGenMultiTouch=!1,this.touchInfo={type:null,x:-1,y:-1,time:0},this.doubleTapThreshold=l.DOUBLETAB,this.doubleTapInterval=s.DOUBLE_TAP_INTERVAL,this.singleTapInterval=s.SINGLE_TAP_INTERVAL,this.swipeThreshold=l.SWIPE,this.swipeInterval=s.SWIPE_INTERVAL,this.multiTouchInterval=s.MULTI_TOUCH_INTERVAL,this.ticking=!1,this.ticknum=0,this.DelayTickCount=20,this.stopScroll=!1,this.objThumbnail=document.getElementById("thumbnail"),this.objAnnotation=document.getElementById("annotation-list"),this.onTouchStart=function(e){m.default.isDrawingMode||(e.targetTouches.length>=2?n.isGenMultiTouch=!0:(n.isGenTouchStart=!0,n.startX=e.changedTouches[0].pageX,n.startY=e.changedTouches[0].pageY,n.startTime=e.timeStamp))},this.onTouchMove=function(e){m.default.isDrawingMode||(!n.isGenTouchStart||e.targetTouches.length>=2?n.isGenMultiTouch=!0:u.ScaleEvent.saveViewportStatus())},this.isTouchMove=function(e){return Math.abs(n.startX-e.changedTouches[0].pageX)>l.MOVE||Math.abs(n.startY-e.changedTouches[0].pageY)>l.MOVE},this.onTouchEnd=function(e){if(!m.default.isDrawingMode){if(n.isGenTouchMove=n.isTouchMove(e),u.ScaleEvent.saveViewportStatus(),n.isGenMultiTouch)return clearTimeout(n.multiTouchTimer),void(n.multiTouchTimer=setTimeout((function(){n.isGenMultiTouch=!1}),n.multiTouchInterval));n.isSwipeEvent(e)?"cell"!==n.docInfo.skinType&&c.Util.isFullScreen()&&h.Page.RESIZE_OBJ.type===h.RESIZE_TYPE.PageFit&&!c.Util.isHtmlWordSkin(n.docInfo)&&n.swipeEvent(e):n.isDoubleTapEvent(e)?n.doubleTapEvent(e):n.isSingleTapEvent()?n.singleTapEvent(e):n.touchInfo.type=null,n.isGenTouchStart=!1,n.isGenTouchMove=!1}},this.isSingleTapEvent=function(){return!n.touchInfo.type&&n.isGenTouchStart&&!n.isGenTouchMove&&!m.default.isAnnotMode},this.singleTapEvent=function(e){n.touchInfo.type="tap",n.touchInfo.x=e.changedTouches[0].pageX,n.touchInfo.y=e.changedTouches[0].pageY,n.touchInfo.time=e.timeStamp,n.singleTapTimer=setTimeout((function(){n.touchInfo.type=null,c.Util.isFullScreen()?n.eventObserver.fullscreenSingleTap.notify():n.eventObserver.singleTap.notify()}),n.singleTapInterval)},this.isDoubleTapEvent=function(e){return"tap"===n.touchInfo.type&&n.isGenTouchStart&&!n.isGenTouchMove&&e.timeStamp-n.touchInfo.time<=n.doubleTapInterval&&Math.abs(n.touchInfo.x-e.changedTouches[0].pageX)<=n.doubleTapThreshold&&Math.abs(n.touchInfo.y-e.changedTouches[0].pageY)<=n.doubleTapThreshold},this.doubleTapEvent=function(e){clearTimeout(n.singleTapTimer),n.touchInfo.type=null,n.eventObserver.doubleTap.notify(e),e.preventDefault(),e.stopImmediatePropagation()},this.isSwipeEvent=function(e){return!1!==(!n.touchInfo.type&&n.isGenTouchStart&&e.timeStamp-n.startTime<=n.swipeInterval)&&(n.distX=e.changedTouches[0].pageX-n.startX,n.distY=e.changedTouches[0].pageY-n.startY,n.dist=Math.sqrt(Math.pow(n.distX,2)+Math.pow(n.distY,2)),n.dist>=n.swipeThreshold)},this.swipeEvent=function(e){var t,o=180*Math.atan2(-n.distY,n.distX)/Math.PI;o>=45&&o<=135?t=r.UP:o<45&&o>-45?t=r.RIGHT:o<=-45&&o>=-135?t=r.DOWN:(o<-135&&o>=-180||o>135&&o<=180)&&(t=r.LEFT),n.eventObserver.swipe.notify(t),e.preventDefault(),e.stopImmediatePropagation()},this.scrollMove=function(e){if(u.ScaleEvent.isChangePageOffset())u.ScaleEvent.isChangePageOffset()&&n.eventObserver.startViewportScroll.notify(),n.ticknum=0;else{if(n.ticknum>n.DelayTickCount)return n.eventObserver.endViewportScroll.notify(e),u.ScaleEvent.saveViewportStatus(),void window.requestAnimationFrame((function(){n.ticknum=0,n.ticking=!1}));n.ticknum=n.ticknum+1}u.ScaleEvent.saveViewportStatus(),window.requestAnimationFrame((function(){n.scrollMove(e)}))},this.viewportScroll=function(){if(!n.ticking){var e=!1;!m.default.isAnnotMode&&c.Util.hasClass(document.getElementById("header"),"wrap__header--hide")&&g.Thumbnail.THUMB_STATUS===g.THUMB_FLAG.off&&(e=!0),n.ticking=!0,n.ticknum=0,u.ScaleEvent.isChangePageOffset()&&n.eventObserver.startViewportScroll.notify(),window.requestAnimationFrame((function(){n.scrollMove(e)}))}},this.thumbnailScrollStart=function(e){u.ScaleEvent.isDefaultBrowserScale()||(n.startX=e.changedTouches[0].pageX,n.startY=e.changedTouches[0].pageY,n.stopScroll=!1)},this.baseScrollMove=function(e,t){if(!u.ScaleEvent.isDefaultBrowserScale()){if(n.stopScroll)return e.preventDefault(),void e.stopPropagation();var o=t.scrollTop,i=t.scrollHeight,r=o<1&&n.startY<e.changedTouches[0].pageY,a=i-f(window).height()<=o&&n.startY>e.changedTouches[0].pageY;(r||a)&&(n.stopScroll=!1,e.preventDefault(),e.stopPropagation())}},this.thumbnailScrollMove=function(e){n.baseScrollMove(e,n.objThumbnail)},this.annotationScrollMove=function(e){n.baseScrollMove(e,n.objAnnotation)},this.disableScrollEvent=function(){n.eventObserver.mobileHeader.notify(p.ShowActionType.SHOW),u.ScaleEvent.disableScrollEvent()},this.enableScrollEvent=function(){m.default.isAnnotMode||n.eventObserver.mobileHeader.notify(p.ShowActionType.HIDE3SEC),u.ScaleEvent.enableScrollEvent()},this.disallowEvent=function(e){var t=e.target;return t.id.indexOf("pagelist")>-1||t.id.indexOf("mobileTablist")>-1||t.id.indexOf("more-submenu")>-1||c.Util.hasClassForEventTargetEl(t,"metabox",6)||c.Util.hasClassForEventTargetEl(t,"more-content",6)||(e.preventDefault(),e.stopPropagation()),!1},this.eventBind=function(){var e="cell"===n.docInfo.skinType?"contents":"contents-area",o=document.getElementById(e),i={passive:!d.Browser.instance.isIOS&&!u.ScaleEvent.isSupportScale()};if(o.addEventListener("touchstart",n.onTouchStart,i),o.addEventListener("touchmove",n.onTouchMove,i),o.addEventListener("touchend",n.onTouchEnd,i),d.Browser.instance.isSupportVisualViewport()&&window.visualViewport.addEventListener("scroll",n.viewportScroll,i),document.getElementById("modal").addEventListener("touchmove",n.disallowEvent,i),document.getElementById("loading-dimmed").addEventListener("touchmove",n.disallowEvent,i),!c.Util.isHtmlWordSkin(n.docInfo)&&d.Browser.instance.isIOS){var r="cell"!==n.docInfo.skinType?"page__input":"header-tablist__input",s="cell"!==n.docInfo.skinType?"select-arrow":"cell-select-arrow",l="cell"!==n.docInfo.skinType?"page__input":"header-tablist__select";document.getElementById(r).addEventListener("touchstart",n.disableScrollEvent,i),document.getElementById(s).addEventListener("touchstart",n.disableScrollEvent,i);var h=document.getElementById(l);h&&h.addEventListener("blur",n.enableScrollEvent,i);var m=document.getElementById("annotation-list__search__input");m.addEventListener("touchstart",n.disableScrollEvent,i),m.addEventListener("blur",n.enableScrollEvent,i)}if(d.Browser.instance.isAndroid){var p=document.getElementById("wrap__index");p.addEventListener("touchstart",n.thumbnailScrollStart,i),p.addEventListener("touchmove",n.thumbnailScrollMove,i);var g=document.getElementById("annotation-list");g.addEventListener("touchstart",n.thumbnailScrollStart,i),g.addEventListener("touchmove",n.annotationScrollMove,i),document.getElementById("header").addEventListener("touchmove",n.disallowEvent,i),document.getElementById("marker-header").addEventListener("touchmove",n.disallowEvent,i);var v=null;f(document.body).on("focus","textarea, input",(function(){clearTimeout(v),t.virtualKeyboardMode=a.changeStatus,v=setTimeout((function(){t.virtualKeyboardMode=a.active}),500)})).on("blur","textarea, input",(function(){t.virtualKeyboardMode=a.changeStatus,v=setTimeout((function(){t.virtualKeyboardMode=a.deactive}),500)}))}d.Browser.instance.isMobile&&f(window).on("orientationchange",(function(e){n.eventObserver.orientationchange.notify(e)}))},this.preventCopyForIos=function(){c.Util.addClass(document.getElementById("wrap"),"notAllowCopyForIOS"),d.Browser.instance.version>=9&&d.Browser.instance.version<13&&document.body.addEventListener("touchforcechange",n.preventTouchFor3DTouchIos,!1)},this.enableCopyForIos=function(){c.Util.removeClass(document.getElementById("wrap"),"notAllowCopyForIOS"),d.Browser.instance.version>=9&&d.Browser.instance.version<13&&document.body.removeEventListener("touchforcechange",n.preventTouchFor3DTouchIos,!1)},this.preventTouchFor3DTouchIos=function(e){e.changedTouches[0].force>=.1&&e.preventDefault()},this.annotMode=function(e){e?n.preventCopyForIos():n.enableCopyForIos()},this.load=function(t,r){return o(n,void 0,e,(function(){return i(this,(function(e){return this.docInfo=t,this.eventObserver=r,this.eventBind(),d.Browser.instance.isIOS&&(c.Util.allowCopy()?this.eventObserver.annotMode.subscribe(this.annotMode):this.preventCopyForIos()),[2]}))}))}}return t.virtualKeyboardMode=a.deactive,t}();t.MobileEvent=v}).call(this,n(5))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BUTTON_COLOR=void 0,function(e){e.BLACK="black",e.WHITE="white"}(t.BUTTON_COLOR||(t.BUTTON_COLOR={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.modalElSelector="modal",e.dialogWrapperElSelector="modal__dialog",e.dialogElSelector="dialog",e.dimmedElSelector="modal__dimmed",e}();t.default=o},function(e,t,n){"use strict";(function(e){var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__awaiter||function(t,n,o,i){return new(o||(o=e))((function(e,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}l((i=i.apply(t,n||[])).next())}))},a=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Slide=void 0;var s=n(1),l=n(0),c=n(3),d=n(296),u=n(297),h=n(51),f=n(25),m=function(e){function t(){var n=e.call(this)||this;return n.initPageNum=5,n.SlidePageFitAction=new u.SlidePageFit,n.SlidePageScrollFitAction=new d.SlidePageScrollFit,n.loadTimeout=null,n.getDimensionHtml=function(e){return r(n,void 0,void 0,(function(){var n,o,i;return a(this,(function(r){switch(r.label){case 0:return n=e.resultPath+"/"+e.status.fileName+".xml",o=[],[4,l.Util.getXml(n)];case 1:return i=r.sent(),t.SLIDE_INFO.start=parseInt(i.index.startPage),t.SLIDE_INFO.end=parseInt(i.index.endPage),t.SLIDE_INFO.total=parseInt(i.index.slide_cnt),1===t.SLIDE_INFO.total?(o[0]=[],o[0].index=parseInt(i.index.slide_list.slide.id)-1,o[0].path=i.index.slide_list.slide.path_xhtml,o[0].width=i.index.width,o[0].height=i.index.height,t.SLIDE_LIST[0]={path:i.index.slide_list.slide.path_xhtml},[2,o]):(c.each(i.index.slide_list.slide,(function(e,n){var r=parseInt(n.id)-1,a={index:r,width:i.index.width,height:i.index.height};o[e]=a,t.SLIDE_LIST[r]={path:n.path_xhtml}})),[2,o])}}))}))},n.createContentDivInMobile=function(e){return r(n,void 0,void 0,(function(){var n,o,i,r,s,d,u;return a(this,(function(a){for(n=document.createDocumentFragment(),o=0,i=e;o<i.length;o++)r=i[o],t.ORIGIN_SIZE[r.index]={width:r.width,height:r.height},(s=document.createElement("iframe")).id="page"+r.index,s.name=r.index,l.Util.removeContentsAreaTooltip()||(s.title="page"+(r.index+1)),s.scrolling="no",s.frameBorder="no",(d=document.createElement("div")).id="page-alpha"+r.index,d.className="thumb-slide-alpha",r.index<this.initPageNum&&this.onLoadImg(s,r.index),(u=document.createElement("div")).id="page-area"+r.index,u.className="contents-page",u.appendChild(s),u.appendChild(d),n.appendChild(u);return c("#contents-area").append(n),t.ORIGIN_MARGIN={marginTop:parseInt(c(".contents-page").css("margin-top")),marginBottom:parseInt(c(".contents-page").css("margin-bottom"))},c("#page-area0").addClass("contents-page--start"),c("#page-area"+(t.SLIDE_INFO.total-1)).addClass("contents-page--end"),this.pageResizeAction.resizePage(1,null,0,this.initPageNum),[2]}))}))},n.iframeEventBindInDesktop=function(){return r(n,void 0,void 0,(function(){return a(this,(function(e){return c("#page0").on("load",(function(){c(this).contents().on("mousewheel DOMMouseScroll",(function(e){!0!==e.ctrlKey&&(clearTimeout(t.wheelStopHandler),t.wheelStopHandler=setTimeout((function(){t.mousewheelInDesktop(e)}),300))}));var e=document.getElementById("contents-area"),n=document.getElementById("page0"),o=function(e){if(l.Util.isFullScreen())return e.preventDefault(),!1};n.contentDocument.addEventListener("contextmenu",o),n.contentDocument.addEventListener("contextmenu.fullscreen",o);n.contentDocument.addEventListener("mousemove",l.Util.getMouseHandlerDispatch(e)),n.contentDocument.addEventListener("mousedown",l.Util.getMouseHandlerDispatch(e,(function(){return l.Util.isFullScreen()}))),n.contentDocument.addEventListener("mouseup",l.Util.getMouseHandlerDispatch(e)),n.contentDocument.addEventListener("click",l.Util.getMouseHandlerDispatch(e)),c(this).contents().on("keydown keyup",(function(e){c("#contents-area").trigger(e)}))})),[2]}))}))},n.createContentDivInDesktop=function(e){return r(n,void 0,void 0,(function(){var n,o,i,r,s,l;return a(this,(function(a){for(n=document.createDocumentFragment(),o=0,i=e;o<i.length;o++)r=i[o],t.ORIGIN_SIZE[r.index]={width:r.width,height:r.height};return(s=document.createElement("div")).id="page-area0",(l=document.createElement("iframe")).id="page0",l.name="0",l.title="content",l.scrolling="no",l.frameBorder="no",this.onLoadImg(l,0),s.appendChild(l),n.appendChild(s),c("#contents-area").append(n),this.iframeEventBindInDesktop(),[2]}))}))},n.createContentDiv=function(e){return r(n,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return t=null,[4,this.getDimensionHtml(e)];case 1:return t=n.sent(),s.Browser.instance.isMobile?[4,this.createContentDivInMobile(t)]:[3,3];case 2:return n.sent(),[3,5];case 3:return[4,this.createContentDivInDesktop(t)];case 4:n.sent(),n.label=5;case 5:return[2]}}))}))},n.getPageElem=function(e){return document.getElementById("page"+e)},n.loadPageImg=function(e){if(s.Browser.instance.isMobile){var t=n.getDefaultLoadingCnt(),o=e-t<0?0:e-t,i=e+t>n.docInfo.status.pageNum?n.docInfo.status.pageNum:e+t;null!=n.loadTimeout&&clearTimeout(n.loadTimeout),n.loadTimeout=window.setTimeout((function(){for(var e=0;e<o;e++){-1===(t=n.getPageElem(e)).contentWindow.location.href.indexOf("about:blank")&&t.contentWindow.location.replace("about:blank")}for(e=o;e<i;e++){0===(t=n.getPageElem(e)).contentWindow.location.href.indexOf("about:blank")&&n.onLoadImg(t,e)}for(e=i+1;e<n.docInfo.status.pageNum;e++){var t;-1===(t=n.getPageElem(e)).contentWindow.location.href.indexOf("about:blank")&&t.contentWindow.location.replace("about:blank")}}),200)}else{var r=n.getPageElem(0);n.onLoadImg(r,e)}},n.checkResizeControlBar=function(){},n.bindControlbarEvent=function(){l.Util.bindClickOrTouchEvent(c("#page-prev"),"controlbar-prev--hover",n.moveBackPage),l.Util.bindClickOrTouchEvent(c("#page-next"),"controlbar-next--hover",n.moveNextPage),n.checkMoveControlbar()},n.onLoadImg=function(e,o){l.Util.isFullScreen()?e.className=" contents-page__img img-loading-black":e.className=h.Head.bgColorMode===h.BGCOLOR_MODE.darkScreen?" contents-page__img img-loading":" contents-page__img img-loading-bright",e.src=""+l.Util.getResultPath(n.docInfo,t.SLIDE_LIST[o].path)},n.isFitAction=function(){return n.pageResizeAction===n.SlidePageScrollFitAction},n.setFitAction=function(){n.preResizeObj=f.Page.RESIZE_OBJ,n.prePageAction=n.pageResizeAction,s.Browser.instance.isMobile?(f.Page.RESIZE_OBJ={type:f.RESIZE_TYPE.PageFit,percent:0},n.pageResizeAction=n.SlidePageScrollFitAction):(f.Page.RESIZE_OBJ={type:f.RESIZE_TYPE.SlidePageFit,percent:0},n.pageResizeAction=n.SlidePageFitAction)},n.getRotateMap=function(){return null},n._innerResizeWindow=function(){c(".contents-page").removeAttr("style"),f.Page.ORIGIN_MARGIN={marginTop:parseInt(c(".contents-page").css("margin-top")),marginBottom:parseInt(c(".contents-page").css("margin-bottom"))},n.pageResizeAction.resizePage(1,null)},n.fullscreenAfterEvent=function(){s.Browser.instance.isIE&&11===s.Browser.instance.version&&n.resizeWindow()},n.pageMouseEventBind=function(){c("#contents-area").on("mousewheel DOMMouseScroll",(function(e){!0!==e.ctrlKey&&(clearTimeout(t.wheelStopHandler),t.wheelStopHandler=setTimeout((function(){t.mousewheelInDesktop(e)}),300))}))},n.eventBind=function(e){n.eventObserver=e,n.eventObserver.page.subscribe(n.focusPage),n.eventObserver.resizeWindow.subscribe(n.resizeWindow),n.eventObserver.fullScreen.subscribe(n.fullScreen),n.eventObserver.singleTap.subscribe(n.singleTap),n.eventObserver.orientationchange.subscribe(n.orientationchange),n.eventObserver.moveBtn.subscribe(n.checkMoveControlbar),s.Browser.instance.isMobile?n.scrollEventBind():n.pageMouseEventBind(),n.mouseEventBind()},n.setTabIndex=function(){var e=l.Util.setTabIndexList();l.Util.setTabIndex(document.getElementById("page-area0"),e)},n.load=function(t,o){return r(n,void 0,void 0,(function(){var n=this;return a(this,(function(i){switch(i.label){case 0:return e.prototype.load.call(this,t,o),s.Browser.instance.isMobile?this.pageResizeAction=this.SlidePageScrollFitAction:this.pageResizeAction=this.SlidePageFitAction,this.bindControlbarEvent(),[4,this.createContentDiv(this.docInfo)];case 1:return i.sent(),this.setTabIndex(),this.eventBind(o),this.eventObserver.resizeContents.notify(),this.resizeWindow(),this.docInfo.status.pageNum>this.initPageNum&&setTimeout((function(){n.pageResizeAction.resizePage(1,null,n.initPageNum,n.docInfo.status.pageNum-n.initPageNum)}),30),[2]}}))}))},n.setDefaultLoadingCnt(3),n}return i(t,e),t.SLIDE_LIST=[],t.SLIDE_INFO={start:0,end:0,total:0},t.mousewheelInDesktop=function(e){(e.originalEvent.deltaY||-e.originalEvent.wheelDelta)<0?window.localSynap.movePrev():window.localSynap.moveNext()},t}(f.Page);t.Slide=m}).call(this,n(5))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=function(){"use strict";function e(e,t){var n,o=document.createElement(e||"div");for(n in t)o[n]=t[n];return o}function t(e){for(var t=1,n=arguments.length;n>t;t++)e.appendChild(arguments[t]);return e}function n(e,t,n,o){var i=["opacity",t,~~(100*e),n,o].join("-"),r=.01+n/o*100,a=Math.max(1-(1-e)/t*(100-r),e),s=l.substring(0,l.indexOf("Animation")).toLowerCase(),d=s&&"-"+s+"-"||"";return u[i]||(c.insertRule("@"+d+"keyframes "+i+"{0%{opacity:"+a+"}"+r+"%{opacity:"+e+"}"+(r+.01)+"%{opacity:1}"+(r+t)%100+"%{opacity:"+e+"}100%{opacity:"+a+"}}",c.cssRules.length),u[i]=1),i}function o(e,t){var n,o,i=e.style;if(void 0!==i[t=t.charAt(0).toUpperCase()+t.slice(1)])return t;for(o=0;o<d.length;o++)if(void 0!==i[n=d[o]+t])return n}function i(e,t){for(var n in t)e.style[o(e,n)||n]=t[n];return e}function r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)void 0===e[o]&&(e[o]=n[o])}return e}function a(e,t){return"string"==typeof e?e:e[t%e.length]}function s(e){this.opts=r(e||{},s.defaults,h)}var l,c,d=["webkit","Moz","ms","O"],u={},h={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};if(s.defaults={},r(s.prototype,{spin:function(t){this.stop();var n=this,o=n.opts,r=n.el=e(null,{className:o.className});if(i(r,{position:o.position,width:0,zIndex:o.zIndex,left:o.left,top:o.top}),t&&t.insertBefore(r,t.firstChild||null),r.setAttribute("role","progressbar"),n.lines(r,n.opts),!l){var a,s=0,c=(o.lines-1)*(1-o.direction)/2,d=o.fps,u=d/o.speed,h=(1-o.opacity)/(u*o.trail/100),f=u/o.lines;!function e(){s++;for(var t=0;t<o.lines;t++)a=Math.max(1-(s+(o.lines-t)*f)%u*h,o.opacity),n.opacity(r,t*o.direction+c,a,o);n.timeout=n.el&&setTimeout(e,~~(1e3/d))}()}return n},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(o,r){function s(t,n){return i(e(),{position:"absolute",width:r.scale*(r.length+r.width)+"px",height:r.scale*r.width+"px",background:t,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/r.lines*d+r.rotate)+"deg) translate("+r.scale*r.radius+"px,0)",borderRadius:(r.corners*r.scale*r.width>>1)+"px"})}for(var c,d=0,u=(r.lines-1)*(1-r.direction)/2;d<r.lines;d++)c=i(e(),{position:"absolute",top:1+~(r.scale*r.width/2)+"px",transform:r.hwaccel?"translate3d(0,0,0)":"",opacity:r.opacity,animation:l&&n(r.opacity,r.trail,u+d*r.direction,r.lines)+" "+1/r.speed+"s linear infinite"}),r.shadow&&t(c,i(s("#000","0 0 4px #000"),{top:"2px"})),t(o,t(c,s(a(r.color,d),"0 0 1px rgba(0,0,0,.1)")));return o},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}}),"undefined"!=typeof document){c=function(){var n=e("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}();var f=i(e("group"),{behavior:"url(#default#VML)"});!o(f,"transform")&&f.adj?function(){function n(t,n){return e("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}c.addRule(".spin-vml","behavior:url(#default#VML)"),s.prototype.lines=function(e,o){function r(){return i(n("group",{coordsize:d+" "+d,coordorigin:-c+" "+-c}),{width:d,height:d})}function s(e,s,l){t(h,t(i(r(),{rotation:360/o.lines*e+"deg",left:~~s}),t(i(n("roundrect",{arcsize:o.corners}),{width:c,height:o.scale*o.width,left:o.scale*o.radius,top:-o.scale*o.width>>1,filter:l}),n("fill",{color:a(o.color,e),opacity:o.opacity}),n("stroke",{opacity:0}))))}var l,c=o.scale*(o.length+o.width),d=2*o.scale*c,u=-(o.width+o.length)*o.scale*2+"px",h=i(r(),{position:"absolute",top:u,left:u});if(o.shadow)for(l=1;l<=o.lines;l++)s(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=o.lines;l++)s(l);return t(e,h)},s.prototype.opacity=function(e,t,n,o){var i=e.firstChild;o=o.shadow&&o.lines||0,i&&t+o<i.childNodes.length&&(i=(i=(i=i.childNodes[t+o])&&i.firstChild)&&i.firstChild)&&(i.opacity=n)}}():l=o(f,"animation")}return s}()},function(e,t,n){"use strict";(function(e){var o=this&&this.__awaiter||function(t,n,o,i){return new(o||(o=e))((function(e,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}l((i=i.apply(t,n||[])).next())}))},i=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayer=void 0;var r=n(3),a=n(1),s=n(0),l=n(25),c=n(58),d=n(29),u=n(17),h=n(8),f=n(74),m=function(){function e(){var t=this;this.docInfo=null,this.eventObserver=null,this.parseTextInfo=function(e){var t=e["@attributes"],n=t.l,o=t.t,i=t.w,r=t.h;return{text:e.text,left:parseFloat(n),top:parseFloat(o),width:parseFloat(i),height:parseFloat(r)}},this.setCorrectValueToTextObjEl=function(e,n){var o=function(e){return!!e&&!/[,._]/.test(e.text)&&!!e.height},i=t.parseTextInfo(e.text[n]),r=i.left,a=i.width,s=i.top,l=i.height,c=i.text;if(l)if(a){if(/[\s]/.test(c)){d=n>0?t.parseTextInfo(e.text[n-1]):null,u=n+1<e.text.length?t.parseTextInfo(e.text[n+1]):null;o(d)&&d.left<r?r=d.left+d.width:o(u)&&r<u.left&&(r=u.left-u.width),e.text[n]["@attributes"].l=r}}else e.text[n]["@attributes"].w=l/3;else{var d=n>0?t.parseTextInfo(e.text[n-1]):null,u=n+1<e.text.length?t.parseTextInfo(e.text[n+1]):null;o(d)&&d.left<r?((l=s-d.top)<=0&&(l=d.height),s=d.top,r=d.left+d.width):o(u)&&r<u.left?((l=s-u.top)<=0&&(l=u.height),s=u.top,r=u.left-u.width):(l=5,s-=2/3*5),a=l/3,e.text[n]["@attributes"].h=l,e.text[n]["@attributes"].w=a,e.text[n]["@attributes"].t=s,e.text[n]["@attributes"].l=r}},this.createTextDiv=function(n,l){return o(t,void 0,void 0,(function(){var t,o,c,u,m,p,g,v,b,E,y;return i(this,(function(i){for(t=d.default.instance.getRatio(l),o=document.getElementById("annotationlayer"+l),a.Browser.instance.isMobile&&(o.oncontextmenu=function(){return!1}),document.getElementById("startOfContent"+l)||((c=document.createElement("div")).id="startOfContent"+l,c.className="startOfContent",o.appendChild(c)),(u=document.createElement("div")).id="textLayer"+l,u.className="textLayer",(h.default.isScrollMode||f.DrawingEraser.isActive)&&s.Util.addClass(u,"disableEvent"),m=0;m<n.text.length;m++)this.setCorrectValueToTextObjEl(n,m),p=this.parseTextInfo(n.text[m]),g=p.text,v=p.left,b=p.top,E=p.height,(y=document.createElement("span")).id=e.getTextId(l,m),y.className=s.Util.allowCopy()?"text":"text text--disable-copy",y.textContent=g,y.style.cssText="left:"+v*t+"px;top:"+b*t+"px;font-size:"+E*t+"px;line-height:"+E*t+"px",y.setAttribute("data-char",g),y.setAttribute("data-hl-order","[]"),u.appendChild(y);return o.firstChild?o.insertBefore(u,o.firstChild):o.appendChild(u),r("#page-area"+l).append(o),[2]}))}))},this._loadTextXml=function(n,r){return o(t,void 0,void 0,(function(){var t;return i(this,(function(o){switch(o.label){case 0:return[4,this.setTextObjectAndLocalStorage(n,r)];case 1:return o.sent(),s.Util.removeContentsAreaTooltip()||(document.getElementById("page-area"+n).title=r[n]),s.Util.isUseSearch(this.docInfo)&&this.textObj[n].text.length&&(document.getElementById(""+e.getTextId(n,0))?(t=document.getElementById("annotationlayer"+n),this.updatePosition(t,n)):this.createTextDiv(this.textObj[n],n)),[2]}}))}))},this.loadTextXml=function(n){return o(t,void 0,void 0,(function(){var t,o,r;return i(this,(function(i){switch(i.label){case 0:return t=u.default.getAnnotLoadingRange(this.docInfo,n),o=e.getLocalStorageText(this.docInfo.jobId),[4,this._loadTextXml(n,o)];case 1:for(i.sent(),r=t.startIdx;r<t.endIdx;r++)n!==r&&this._loadTextXml(r,o);return[2]}}))}))},this.setTextObjectAndLocalStorage=function(n,r){return o(t,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return null!=this.textObj&&null!=this.textObj[n]?[3,2]:[4,this.setTextObj(n)];case 1:t.sent(),t.label=2;case 2:return r[n]||(r[n.toString()]=this.textObj[n].allText.toLowerCase(),e.setLocalStorageText(this.docInfo.jobId,r)),[2]}}))}))},this.setTextObj=function(e){return o(t,void 0,void 0,(function(){var t,n;return i(this,(function(o){switch(o.label){case 0:return[4,u.default.getXml(this.docInfo,e,this.docInfo.dpi)];case 1:return t=o.sent(),null==(n=t.result)&&(n=""),this.textObj[e]={"@attributes":t.page,text:t.text,link:t.link,allText:n},[2]}}))}))},this.fullScreen=function(e){e.isFullScreen?(u.default.isFullScreen=!0,r(".text").addClass("text--hide")):window.setTimeout((function(){return o(t,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return u.default.isFullScreen=!1,s.Util.isActiveSearch()?[4,this.loadTextXml(this.docInfo.currentPage)]:[3,2];case 1:e.sent(),this.eventObserver.searchText.notify(this.docInfo.currentPage),r(".text").removeClass("text--hide"),e.label=2;case 2:return[2]}}))}))}),l.Page.IOS_WAITTIME_FOR_PREVENT_RELOAD)},this.updatePosition=function(e,n){var o=Array.prototype.slice.call(e.getElementsByClassName("text"));if(0!==o.length){var i=d.default.instance.getRatio(n);if(Math.round(100*parseFloat(o[0].style.left))/100!==Math.round(t.textObj[n].text[0]["@attributes"].l*i*100)/100)for(var r in o){var s=t.textObj[n].text[r]["@attributes"],l=s.l,c=s.t,u=s.h,h=o[r],f=getComputedStyle(h).getPropertyValue("--var-th-color");!a.Browser.instance.isIE&&f?h.style.cssText="left:"+l*i+"px;top:"+c*i+"px;font-size:"+u*i+"px;line-height:"+u*i+"px;--var-th-color: "+f+";":h.style.cssText="left:"+l*i+"px;top:"+c*i+"px;font-size:"+u*i+"px;line-height:"+u*i+"px"}}},this.eventBind=function(e){t.eventObserver=e,t.eventObserver.fullScreen.subscribe(t.fullScreen)},this.load=function(n,r,a,s){return o(t,void 0,void 0,(function(){var t,o,l,d;return i(this,(function(i){switch(i.label){case 0:if(this.docInfo=n,this.textObj=r,this.createAnnotationLayer=s,this.eventBind(a),e.hasLocalStorage()&&(t=e.getLocalStorageText(this.docInfo.jobId),0==Object.keys(t).length))for(o=/^synap_/,l=Object.keys(localStorage),d=0;d<l.length;d++)o.test(l[d])&&localStorage.removeItem(l[d]);return[4,this.loadTextXml(this.docInfo.currentPage)];case 1:return i.sent(),(new c.default).load(n,a,this.setTextObjectAndLocalStorage,this.createAnnotationLayer,this.loadTextXml),[2]}}))}))}}return e.loadedText=null,e.getTextId=function(e,t){return"text-"+e+"-"+t},e.hasLocalStorage=function(){try{var e="has_Synap_LocalStorage_Test_Key";localStorage.setItem(e,e);var t=localStorage.getItem(e)==e;return localStorage.removeItem(e),t&&localStorage}catch(e){return!1}},e.getStorageId=function(e){return"synap_"+e},e.getLocalStorageText=function(t){var n=null;return(n=e.hasLocalStorage()?JSON.parse(localStorage.getItem(e.getStorageId(t))):e.loadedText)||(n={}),n},e.setLocalStorageText=function(t,n){return o(void 0,void 0,void 0,(function(){return i(this,(function(o){return e.hasLocalStorage()?localStorage.setItem(e.getStorageId(t),JSON.stringify(n)):e.loadedText=n,[2]}))}))},e}();t.TextLayer=m}).call(this,n(5))},function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.DrawingFillShape=void 0;var r=n(1),a=n(0),s=n(31),l=function(e){function t(t,n,o,i,l){var c=e.call(this,t,n,o,i,l)||this;return c.markerEventBind=function(e,t){var n=c.markerStart,o=c.markerEnd;e.on(a.Util.getClickStartEventName(),(function(){t()&&n(e,this)})),e.on(a.Util.getClickEndEventName(),(function(){o(e,this)})),r.Browser.instance.isMobile||e.on("mouseleave pointerleave",(function(){o(e,this)}))},c.markerEnd=function(e,t){e.on(a.Util.getMoveEventName(),null),c.curMarkerSection=a.Util.getParentElement(t),c.newSvg&&(c.eventObserver.editedAnnotation.notify(c.marker.getPageIdxWhenInAnnotationMode()),c.funcSaveDrawing())},c.getReNewValue=function(e,t,n,o,i){return{left:e/i,width:n/i,top:t/i,height:o/i}},c.getAnnotSize=function(e,t){var n=e.getBBox(),o=c.getPosition(e),i=o.left,r=o.top,s=0===n.width?120:n.width,l=0===n.height?50:n.height,d=c.getReNewValue(i,r,s,l,t);c.applyValidRect(d,a.Util.getParentElement(e),t);var u=parseFloat(e.style.strokeWidth)/t;return c.getAnnotSizeWithStroke(d,u)},c.applyValidRect=function(e,t,n){var o=parseFloat(t.style.width)/n,i=parseFloat(t.style.height)/n;e.left=e.left+e.width>o?o-e.width:e.left,e.top=e.top+e.height>i?i-e.height:e.top},c.setAnnotInfoThickness=function(e,t){var n=e.annot;n.border||(n.border={w:"",s:"",d:""}),n.border.w=t.toString()},c.getFillshapeAttr=function(e){var t=e.annot,n={};return n.color=s.getAnnotInfoColor(t.c),n.thickness=s.getAnnotInfoStrokeWidth(t.border),n.transparency=s.getAnnotInfoAlpha(t.a),n.innerColor=s.getAnnotInfoInnerColor(t.ic),n},c.getMarkerStyleAttr=function(e,t){var n=e.annot,o=s.getAnnotInfoColor(n.c),i=s.getAnnotInfoAlpha(n.a),r=s.getAnnotInfoStrokeWidth(n.border);return{color:o,innerColor:s.getAnnotInfoInnerColor(n.ic),thickness:parseFloat(r)*t,transparency:parseFloat(i)}},c.setAnnotInfoInnerColor=function(e,t){var n=e.annot;n.ic="none"!==t?t:""},c.setAnnotInfoPath=function(e,t){},c}return i(t,e),t}(s.DrawingTool);t.DrawingFillShape=l},,,,,function(e,t,n){"use strict";(function(e){var o=this&&this.__awaiter||function(t,n,o,i){return new(o||(o=e))((function(e,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}l((i=i.apply(t,n||[])).next())}))},i=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.getPdfPrintUrl=t.getPdfDownUrl=t.redirectUserGateway=t.uploadPdf=t.modifyAnnot=t.removeAnnot=t.addAnnot=t.getAnnotList=void 0;var r=n(0);function a(e){return e.contextPath+"/annotations/"+e.jobId}t.getAnnotList=function(e){return o(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,r.Util.getJson(a(e)+"?"+r.Util.setAnnotQueryString(e))];case 1:return[2,t.sent()]}}))}))},t.addAnnot=function(e,t){return r.Util.postJsonAjax(a(e)+"/add?"+r.Util.setAnnotQueryString(e),t)},t.removeAnnot=function(e,t){return o(void 0,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,r.Util.getJson(a(e)+"/remove/"+t+"?"+r.Util.setAnnotQueryString(e))];case 1:return[2,n.sent()]}}))}))},t.modifyAnnot=function(e,t,n){return r.Util.postJsonAjax(a(e)+"/modify/"+t+"?"+r.Util.setAnnotQueryString(e),n)},t.uploadPdf=function(e){return o(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,r.Util.getJson(a(e)+"/upload?"+r.Util.setAnnotQueryString(e))];case 1:return[2,t.sent()]}}))}))},t.redirectUserGateway=function(e,t){var n=e+"/userGateway.cmd?returnUrl="+encodeURIComponent(t);window.open(r.Util.getUrlWithExtraParam(n),"_self")},t.getPdfDownUrl=function(e,t,n){var o=a(e)+"/export?filename="+t+"&dispAnnot="+n+"&"+r.Util.setAnnotQueryString(e);return r.Util.getUrlWithExtraParam(o)},t.getPdfPrintUrl=function(e,t){var n=e.contextPath;!n&&r.Util.isConvHtml(e)&&void 0!==window.localSynap&&window.localSynap.config.contextPath&&(n=window.localSynap.config.contextPath.trim());var o=r.Util.setExtraParam("filename="+e.jobId+".pdf&printable=true&dispAnnot="+t+"&"+r.Util.setAnnotQueryString(e));return n+"/annotations/"+e.jobId+"/export?"+o}}).call(this,n(5))},function(e,t,n){"use strict";(function(e){var o=this&&this.__awaiter||function(t,n,o,i){return new(o||(o=e))((function(e,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}l((i=i.apply(t,n||[])).next())}))},i=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Sheet=void 0;var r=n(1),a=n(0),s=n(36),l=n(3),c=n(51),d=n(8),u=n(19),h=function(){var t=this;this.docInfo=null,this.eventObserver=null,this.defaultSheetTabWidth=115,this.sheetTabWidth=60,this.maxPage=null,this.showSheetTabIdx=0,this.startTabIdx=0,this.endTabIdx=null,this.sheetTabEventBind=function(){l(document).on("click",(function(e){l("#tablist-popup").has(e.target).length||"tabmore"===e.target.id||e.target.parentElement&&"tabmore"===e.target.parentElement.id||l("#tablist-popup").hide(),"header-tablist__input"!==e.target.id&&"cell-select-arrow-img"!==e.target.id&&"cell-select-arrow"!==e.target.id&&l("#tab-content").hide()})),a.Util.bindClickOrTouchEvent(l("#tabmore"),"tabmore--hover",t.sheetTabPopup),a.Util.bindClickOrTouchEvent(l("#sheet-prev"),"sheet-move--hover",t.moveSheetTab),a.Util.bindClickOrTouchEvent(l("#sheet-next"),"sheet-move--hover",t.moveSheetTab);for(var e=r.Browser.instance.isIOS&&!a.Util.isTabletInCSS(),n=0;n<t.maxPage;n++)a.Util.bindClickEvent(document.getElementById("sheet"+n),t.moveSheetEvent),a.Util.bindClickEvent(document.getElementById("tablist"+n),t.moveSheetEvent),!e&&a.Util.bindClickOrTouchEvent(l("#mobileTablist"+n),"tab-scroll-blind__li--hover",(function(e){t.moveSheetEvent(e),t.eventObserver.mobileHeader.notify(s.ShowActionType.HIDE3SEC)}));if(e)l("#header-tablist__input, #cell-select-arrow").on("click",(function(){document.getElementById("header-tablist__select").focus()})),document.getElementById("header-tablist__select").addEventListener("change",(function(){t.eventObserver.sheet.notify({sheetIdx:document.getElementById("header-tablist__select").selectedIndex}),t.eventObserver.mobileHeader.notify(s.ShowActionType.HIDE3SEC)}));else{var o=function(){if(l("#tab-content").toggle(),!l("#tab-content").is(":hidden")){var e=a.Util.isHtmlSkin(t.docInfo)?a.Util.getHeadScale(".wrap__header__container"):1;l("#tab-scroll-blind__ul").scrollTop((l("#mobileTablist"+t.docInfo.currentSheet).position().top-l("#mobileTablist0").position().top)/e),l(".tab-scroll-blind__li").removeClass("tab-scroll-blind--focus"),l("#mobileTablist"+t.docInfo.currentSheet).addClass("tab-scroll-blind--focus")}};a.Util.bindClickEvent(document.getElementById("header-tablist__input"),o),l("#cell-select-arrow").on("click",o)}a.Util.isTabletInCSS()&&r.Browser.instance.isSupportVisualViewport()&&(t.eventObserver.startViewportScroll.subscribe(t.startViewportScroll),t.eventObserver.endViewportScroll.subscribe(t.endViewportScroll),t.eventObserver.resizeWindow.subscribe(t.scaleSheetTabPostion))},this.startViewportScroll=function(){a.Util.isFullScreen()||(a.Util.addClass(document.getElementById("footer"),"hide"),a.Util.addClass(document.getElementById("tablist-popup"),"hide"))},this.endViewportScroll=function(){t.scaleSheetTabPostion(),a.Util.isFullScreen()||a.Util.removeClass(document.getElementById("footer"),"hide")},this.scaleSheetTabPostion=function(){u.ScaleEvent.scaleWithPosition(document.getElementById("footer"),u.TransformOriginType.LEFT_BOTTOM,0,40*u.ScaleEvent.getBrowserScale());var e=30*Math.min(t.maxPage,6)+20+2+40;u.ScaleEvent.scaleWithPosition(document.getElementById("tablist-popup"),u.TransformOriginType.LEFT_BOTTOM,23*u.ScaleEvent.getBrowserScale(),e*u.ScaleEvent.getBrowserScale())},this.createSheetTab=function(n){return o(t,void 0,e,(function(){var e,t,o,s,c,d,u,h,f,m,p,g;return i(this,(function(i){switch(i.label){case 0:e=document.createDocumentFragment(),t=document.createDocumentFragment(),(o=document.createElement("ul")).id="tablist-popup__ul",o.className="tablist-popup__ul",s=r.Browser.instance.isIOS,g=0,i.label=1;case 1:return g<this.maxPage?[4,this.getTitle(n.contextPath,n.status.id,g)]:[3,4];case 2:c=i.sent(),""===(d=c)&&(d="Sheet "+(g+1)),(u=document.createElement("div")).id="sheet"+g,u.className="sheet-list__sheet-tab",a.Util.removeContentsAreaTooltip()||(u.title=d),u.textContent=d,u.setAttribute("data-index",g.toString()),e.appendChild(u),(h=document.createElement("li")).id="tablist"+g,h.className="tablist-popup__li",a.Util.removeContentsAreaTooltip()||(h.title=d),h.textContent=d,h.setAttribute("data-index",g.toString()),o.appendChild(h),s?((f=document.createElement("option")).id="mobileTablist"+g,f.value=g,f.innerHTML=d,t.appendChild(f)):((m=document.createElement("li")).id="mobileTablist"+g,m.className="tab-scroll-blind__li",a.Util.removeContentsAreaTooltip()||(m.title=d),m.textContent=d,m.setAttribute("data-index",g.toString()),t.appendChild(m)),i.label=3;case 3:return g++,[3,1];case 4:for(document.getElementById("sheet-list").appendChild(e),document.getElementById("sheet-content").appendChild(o),s?((p=document.createElement("select")).id="header-tablist__select",p.className="header-tablist__select",p.appendChild(t),document.getElementById("header-tablist").appendChild(p)):document.getElementById("tab-scroll-blind__ul").appendChild(t),this.updateShowSheetTabIdx(),g=0;g<this.maxPage;g++)g>=this.showSheetTabIdx&&l("#sheet"+g).hide();return this.endTabIdx=this.showSheetTabIdx,[2]}}))}))},this.updateShowSheetTabIdx=function(){t.showSheetTabIdx=t.calcUpdateTabIdx(),t.endTabIdx=t.showSheetTabIdx},this.sheetTabPopup=function(){l("#tablist-popup").toggle(),l("#sheet-arrow").css("top",l("#sheet-content").height()+20),l("#sheet-content").is(":hidden")||(l("#tablist-popup__ul").scrollTop(l("#tablist"+t.docInfo.currentSheet).position().top-l("#tablist0").position().top),l(".tablist-popup__li").removeClass("tablist-popup--focus"),l("#tablist"+t.docInfo.currentSheet).addClass("tablist-popup--focus"))},this.moveSheetEvent=function(e){var n=parseInt(e.currentTarget.getAttribute("data-index"));t.eventObserver.sheet.notify({sheetIdx:n})},this.moveSheet=function(n){return o(t,void 0,e,(function(){return i(this,(function(e){switch(e.label){case 0:return this.validCheckSheet(n.sheetIdx)&&this.docInfo.currentSheet!==n.sheetIdx?[4,this.loadSheet(n.sheetIdx)]:[2];case 1:return e.sent(),this.sheetTabActive(n.sheetIdx),this.eventObserver.moveBtn.notify(),[2]}}))}))},this.validCheckSheet=function(e){if(e<0||e>=t.maxPage)return!1;if(!l("#sheet"+e).is(":visible")){if(e>=t.startTabIdx){for(var n=e-t.showSheetTabIdx,o=0;o<=n;o++)l("#sheet"+(o+t.showSheetTabIdx)).show(),l("#sheet"+o).hide();t.startTabIdx=n+1,t.endTabIdx=n+t.showSheetTabIdx}else{for(o=e;o<t.docInfo.currentSheet;o++)l("#sheet"+o).is(":visible")||l("#sheet"+o).show();var i=e+t.showSheetTabIdx;for(o=i;o<t.maxPage;o++)l("#sheet"+o).is(":visible")&&l("#sheet"+o).hide();t.startTabIdx=e,t.endTabIdx=i}l("#sheet"+e).show()}return!0},this.moveSheetTab=function(e){var n;n="sheet-next"===e.target.parentElement.id||"sheet-next"===e.target.id?t.docInfo.currentSheet+1:t.docInfo.currentSheet-1,t.eventObserver.sheet.notify({sheetIdx:n})},this.sheetTabActive=function(e){l(".sheet-list__sheet-tab").removeClass("sheet-list__sheet-tab--on"),l("#sheet"+e).addClass("sheet-list__sheet-tab--on"),document.getElementById("header-tablist__input").textContent=l("#mobileTablist"+e).text(),r.Browser.instance.isIOS&&l("#header-tablist__select option:eq("+e+")").prop("selected",!0),l("#tablist-popup").hide()},this.loadSheetTab=function(n){return o(t,void 0,e,(function(){var e=this;return i(this,(function(t){switch(t.label){case 0:return[4,this.createSheetTab(this.docInfo)];case 1:return t.sent(),l("#container").addClass("wrap__container--cell"),l("#footer").addClass("wrap__footer--cell"),this.showSheetTabIdx<this.maxPage&&l(".sheet-move").css("display","inline-block"),document.getElementById("header-tablist__input").textContent=l("#sheet0").text(),l("#header-tablist").addClass("cell-mobile"),l("#sheet"+n).addClass("sheet-list__sheet-tab--on"),this.sheetTabEventBind(),a.Util.isTabletInCSS()&&r.Browser.instance.isSupportVisualViewport()&&setTimeout((function(){e.scaleSheetTabPostion()}),500),[2]}}))}))},this.checkMoveControlbar=function(){0===t.docInfo.currentSheet?(l("#cell-first").removeClass("controlbar--enable"),l("#cell-first").removeClass("controlbar-first--hover"),l("#cell-first").prop("disabled",!0),l("#cell-prev").removeClass("controlbar--enable"),l("#cell-prev").removeClass("controlbar-prev--hover"),l("#cell-prev").prop("disabled",!0),l("#mobile-controlbar-prev__btn").addClass("mobile-controlbar-floating__btn--disabled"),l("#mobile-controlbar-prev__btn").prop("disabled",!0)):(l("#cell-first").addClass("controlbar--enable"),l("#cell-first").prop("disabled",!1),l("#cell-prev").addClass("controlbar--enable"),l("#cell-prev").prop("disabled",!1),l("#mobile-controlbar-prev__btn").removeClass("mobile-controlbar-floating__btn--disabled"),l("#mobile-controlbar-prev__btn").prop("disabled",!1)),t.docInfo.currentSheet===t.maxPage-1?(l("#cell-end").removeClass("controlbar--enable"),l("#cell-end").removeClass("controlbar-end--hover"),l("#cell-end").prop("disabled",!0),l("#cell-next").removeClass("controlbar--enable"),l("#cell-next").removeClass("controlbar-next--hover"),l("#cell-next").prop("disabled",!0),l("#mobile-controlbar-next__btn").addClass("mobile-controlbar-floating__btn--disabled"),l("#mobile-controlbar-next__btn").prop("disabled",!0)):(l("#cell-end").addClass("controlbar--enable"),l("#cell-end").prop("disabled",!1),l("#cell-next").addClass("controlbar--enable"),l("#cell-next").prop("disabled",!1),l("#mobile-controlbar-next__btn").removeClass("mobile-controlbar-floating__btn--disabled"),l("#mobile-controlbar-next__btn").prop("disabled",!1))},this.fullScreen=function(e){"cell"===e.skinType&&(e.isFullScreen?(l(document.body).addClass("wrap__contents--cell-fullscreen"),e.isSupport||(l(".wrap__header").addClass("wrap__header--presentation"),l(".wrap__footer").addClass("wrap__footer--presentation")),l("#container").addClass("wrap__container--presentation"),l("#container").removeClass("wrap__container--cell"),l("#contents").addClass("wrap__contents--cell-fullscreen")):(l(document.body).removeClass("wrap__contents--cell-fullscreen"),t.eventObserver.bgColor.notify(c.Head.bgColorMode),e.isSupport||(l(".wrap__header").removeClass("wrap__header--presentation"),l(".wrap__footer").removeClass("wrap__footer--presentation")),l("#container").removeClass("wrap__container--presentation"),l("#container").addClass("wrap__container--cell"),l("#contents").removeClass("wrap__contents--cell-fullscreen"),a.Util.isMobileMode()&&t.eventObserver.mobileHeader.notify(s.ShowActionType.HIDE3SEC)))},this.calcUpdateTabIdx=function(){var e=document.body.clientWidth;return Math.floor((e-t.defaultSheetTabWidth)/t.sheetTabWidth)},this.sheetTabResize=function(){var e=t.calcUpdateTabIdx();if(e>=t.maxPage)return l(".sheet-move").hide(),l(".sheet-list__sheet-tab").removeAttr("style"),t.showSheetTabIdx=t.maxPage,void(t.startTabIdx=0);if(e!==t.showSheetTabIdx){if(l(".sheet-move").css("display","inline-block"),e>t.showSheetTabIdx){var n=t.startTabIdx+e;if(t.maxPage>=n)for(var o=t.startTabIdx;o<n;o++)l("#sheet"+o).show();else{for(r=(r=t.startTabIdx-n)-t.maxPage<0?r+t.maxPage:r-t.maxPage,o=t.startTabIdx;o>=r;o--)l("#sheet"+o).show();t.startTabIdx=r}}else if(e<t.showSheetTabIdx){var i=t.startTabIdx+e-1;if(t.docInfo.currentSheet>=i){var r;for(o=r=t.showSheetTabIdx-e+t.startTabIdx-1;o>=0;o--)l("#sheet"+o).hide();t.startTabIdx=r}else{var a=t.startTabIdx+e;for(o=a;o<=t.maxPage;o++)l("#sheet"+o).hide();t.endTabIdx=a}}t.showSheetTabIdx=e}},this.toggleMobileHeader=function(){d.default.isAnnotMode||a.Util.isMobileMode()&&!a.Util.isFullScreen()&&("none"===l(".wrap__header").css("display")?t.eventObserver.mobileHeader.notify(s.ShowActionType.HIDE3SEC):t.eventObserver.mobileHeader.notify(s.ShowActionType.HIDE))}};t.Sheet=h}).call(this,n(5))},function(e,t,n){"use strict";(function(e){var o=this&&this.__awaiter||function(t,n,o,i){return new(o||(o=e))((function(e,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}l((i=i.apply(t,n||[])).next())}))},i=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Presentation=void 0;var r=n(280),a=n(281),s=n(3),l=n(0),c=n(35),d=n(25),u=n(106),h=n(1),f=n(50),m=n(8),p=n(19),g=function(){function e(){var t=this;this.docInfo=null,this.eventObserver=null,this.maxPage=null,this.scrollContentAreaEl=h.Browser.instance.isIOS?s(document):s("#contents"),this.isSupport=!1,this.isPage=!0,this.isSheet=!1,this.isClickedFullscreenCloseBtn=!1,this.supportFullscreen=new a.SupportFullscreen,this.notSupportFullscreen=new r.NotSupportFullscreen,this.fullScreenChangeEvent=function(){["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"].forEach((function(e){return document.addEventListener(e,(function(){if(!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)){var e=t.isSupport;t.isSupport=!1,t.isClickedFullscreenCloseBtn||t.fullScreenCloseBtnEvent(),t.isSupport=e,t.isClickedFullscreenCloseBtn=!1}}),!1)}))},this.isFullScreenSupport=function(){return!(l.Util.isHtmlSkin(t.docInfo)&&h.Browser.instance.isMobile)},this.fullScreenBtnEvent=function(e){if(!m.default.isAnnotMode){document.getElementById("contents").style.top="0",s(".fullscreen-close").show();var n=h.Browser.instance;n.isMobile&&t.isPage||l.Util.isHtmlWordSkin(t.docInfo)||(s(".fullscreen-move").show(),t.pageScrollEventBind(),t.checkFullscreenMoveBtn()),t.isFullScreenSupport()&&"keydown"===e.type&&n.isIE&&11===n.version&&(t.isSupport=!1),t.isPage&&!l.Util.isHtmlWordSkin(t.docInfo)&&(!n.isMobile&&t.pageMouseEventBind(),!t.isSupport&&t.changePageDocScrollStyle(),n.isIOS&&t.iosMobileEventBind()),t.beforeFullscreen(),t.presentationActions.fullscreenON(t.docInfo.skinType,t.isSupport);var o=t.scrollContentAreaEl.scrollTop(),i=t.scrollContentAreaEl.scrollLeft();"cell"===t.docInfo.skinType&&(document.getElementById("contents-area").focus(),t.scrollContentAreaEl.scrollTop(o),t.scrollContentAreaEl.scrollLeft(i))}},this.fullScreenCloseBtnEvent=function(){return o(t,void 0,void 0,(function(){var t,n,o;return i(this,(function(i){switch(i.label){case 0:return e.doingFullScreenCloseEvent=!0,this.afterFullscreen(),s(".fullscreen-close").removeAttr("style"),(t=h.Browser.instance).isMobile&&this.isPage||(s(".fullscreen-move").removeAttr("style"),this.pageScrollEventUnbind()),!t.isIOS&&s("#contents").css({"overflow-x":"","overflow-y":"","-ms-overflow-x":"","-ms-overflow-y":""}),this.isPage&&(!t.isMobile&&this.pageMouseEventUnbind(),t.isIOS&&this.iosMobileEventUnbind()),n=this.scrollContentAreaEl.scrollTop(),o=this.scrollContentAreaEl.scrollLeft(),[4,this.presentationActions.fullscreenOFF(this.docInfo.skinType,this.isSupport)];case 1:return i.sent(),"cell"===this.docInfo.skinType&&(document.getElementById("contents-area").focus(),this.scrollContentAreaEl.scrollTop(n),this.scrollContentAreaEl.scrollLeft(o)),e.doingFullScreenCloseEvent=!1,p.ScaleEvent.doScaleSkinContents(p.ScaleEvent.getBrowserScale()),[2]}}))}))},this.fullScreenEventBind=function(){l.Util.bindClickEvent(document.getElementById("presentation-btn"),t.fullScreenBtnEvent,!0),t.fullScreenChangeEvent(),l.Util.bindClickEvent(document.getElementById("fullscreen"),t.fullScreenBtnEvent,!0);s(".fullscreen-close").on(l.Util.getClickOrTouchEventName(),(function(e){t.isClickedFullscreenCloseBtn=!0,t.fullScreenCloseBtnEvent(),e.preventDefault()})),l.Util.bindEnterKey(document.getElementById("fullscreen-close")),l.Util.bindFocus(document.getElementById("fullscreen-close")),t.isActiveFullscreenMoveBtn()&&(l.Util.bindClickOrTouchEvent(s("#fullscreen-prev"),"fullscreen-prev--hover",(function(){if("cell"===t.docInfo.skinType)t.eventObserver.sheet.notify({sheetIdx:t.docInfo.currentSheet-1});else{if(0===t.docInfo.currentPage)return;t.eventObserver.page.notify({pageNum:t.docInfo.currentPage-1,isScroll:!1})}})),l.Util.bindClickOrTouchEvent(s("#fullscreen-next"),"fullscreen-next--hover",(function(){if("cell"===t.docInfo.skinType)t.eventObserver.sheet.notify({sheetIdx:t.docInfo.currentSheet+1});else{if(t.docInfo.currentPage===t.docInfo.status.pageNum-1)return;t.eventObserver.page.notify({pageNum:t.docInfo.currentPage+1,isScroll:!1})}}))),s(window).on("keydown",(function(e){return t.fullScreenKeyDownEvent(e.originalEvent)}))},this.fullScreenKeyDownEvent=function(e){e.keyCode===f.keyMap.F11&&(e.preventDefault(),e.stopPropagation(),l.Util.isFullScreen()?(t.isClickedFullscreenCloseBtn=!0,t.fullScreenCloseBtnEvent()):t.fullScreenBtnEvent(e)),e.keyCode===f.keyMap.ESC&&l.Util.isFullScreen()&&(e.preventDefault(),e.stopPropagation(),t.fullScreenCloseBtnEvent())},this.checkFullscreenMoveBtn=function(){var e="cell"===t.docInfo.skinType?t.docInfo.currentSheet:t.docInfo.currentPage,n=s("#fullscreen-prev");0===e?(n.removeClass("fullscreen-prev--enable"),n.removeClass("fullscreen-prev--hover"),n.prop("disabled",!0)):(n.addClass("fullscreen-prev--enable"),n.prop("disabled",!1));var o=s("#fullscreen-next");e===t.docInfo.status.pageNum-1?(o.removeClass("fullscreen-next--enable"),o.removeClass("fullscreen-next--hover"),o.prop("disabled",!0)):(o.addClass("fullscreen-next--enable"),o.prop("disabled",!1))},this.isActiveFullscreenMoveBtn=function(){return!(h.Browser.instance.isMobile&&"cell"!==t.docInfo.skinType||l.Util.isHtmlWordSkin(t.docInfo)||l.Util.useSingle(t.docInfo))},this.pageMouseEventBind=function(){document.oncontextmenu=function(){return!1};var e=s("#contents-area");e.on("mousedown.fullscreen",(function(e){if(l.Util.isHtmlSlideSkin(t.docInfo)||l.Util.fixedPageFit()||!c.DetectZoom||100===c.DetectZoom.getRatio()){var n=-1;if(e&&e instanceof Object&&void 0!==e.button?n=e.button:window.event&&void 0!==window.event.button&&(n=window.event.button),0===n||2===n){var o=-1;switch(n){case 0:o=t.docInfo.currentPage+1;break;case 2:o=t.docInfo.currentPage-1}t.movePage(o)}}})),l.Util.isHtmlSlideSkin(t.docInfo)||e.on("wheel.fullscreen",(function(e){if(l.Util.fixedPageFit()||!c.DetectZoom||100===c.DetectZoom.getRatio()){var n=-1;n=e.originalEvent.deltaY<0?t.docInfo.currentPage-1:t.docInfo.currentPage+1,t.movePage(n)}}))},this.pageMouseEventUnbind=function(){l.Util.allowCopy()&&(document.oncontextmenu=function(){return!0});var e=s("#contents-area");e.off("mousedown.fullscreen"),e.off("wheel.fullscreen"),e.off("scroll.fullscreen")},this.pageScrollEventBind=function(){var e;"cell"!==t.docInfo.skinType&&t.scrollContentAreaEl.on("scroll.fullscreen",(function(){l.Util.isFullScreen()&&(clearTimeout(e),e=setTimeout(t.checkFullscreenMoveBtn,80))}))},this.pageScrollEventUnbind=function(){t.scrollContentAreaEl.off("scroll.fullscreen")},this.movePage=function(e){isNaN(e)||e<0||e>t.maxPage-1||t.eventObserver.page.notify({pageNum:e,isScroll:!1})},this.resizeWindow=function(){(!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled)&&!h.Browser.instance.isEdge?!!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement):l.Util.isFullScreen())&&t.changePageDocScrollStyle(),d.Page.updateFullscreenCloseBtn(t.docInfo)},this.changePageDocScrollStyle=function(){if("cell"!==t.docInfo.skinType&&!l.Util.isHtmlWordSkin(t.docInfo))return!h.Browser.instance.isMobile&&(l.Util.fixedPageFit()||void 0===c.DetectZoom||100===c.DetectZoom.getRatio())||h.Browser.instance.isMobile&&d.Page.RESIZE_OBJ.type===d.RESIZE_TYPE.PageFit?(!h.Browser.instance.isIOS&&s("#contents").css({"overflow-y":"hidden","overflow-x":"auto"}),void t.movePage(t.docInfo.currentPage)):void(h.Browser.instance.isIOS||!h.Browser.instance.isMobile&&l.Util.isHtmlSlideSkin(t.docInfo)||(s("#contents").css({"overflow-y":"auto","overflow-x":"auto"}),s(".contents-page > img").css("overflow-x","scroll")))},this.doubleTap=function(){l.Util.isFullScreen()&&"cell"!==t.docInfo.skinType&&(h.Browser.instance.isIOS||d.Page.RESIZE_OBJ.type!==d.RESIZE_TYPE.PageFit||t.scrollContentAreaEl.scrollTop(document.getElementById("page-area"+t.docInfo.currentPage).offsetTop),t.changePageDocScrollStyle())},this.swipe=function(e){switch(e){case u.SWIPE_DIRECTION.LEFT:case u.SWIPE_DIRECTION.UP:t.movePage(t.docInfo.currentPage+1);break;case u.SWIPE_DIRECTION.RIGHT:case u.SWIPE_DIRECTION.DOWN:t.movePage(t.docInfo.currentPage-1)}},this.fullscreenSingleTap=function(){"cell"===t.docInfo.skinType?t.eventObserver.sheet.notify({sheetIdx:t.docInfo.currentSheet+1}):t.movePage(t.docInfo.currentPage+1)},this.iosMobileEventBind=function(){document.documentElement.addEventListener("touchmove",t.iosTouchMoveEvent,l.Util.nonPassiveEventListenerOption)},this.iosMobileEventUnbind=function(){document.documentElement.removeEventListener("touchmove",t.iosTouchMoveEvent,l.Util.nonPassiveEventListenerOption)},this.iosTouchMoveEvent=function(e){d.Page.RESIZE_OBJ.type===d.RESIZE_TYPE.PageFit&&e.preventDefault()},this.beforeFullscreen=function(){if(t.isSupport&&!l.Util.isCellSkin(t.docInfo)&&l.Util.isConvImg(t.docInfo)){var e=document.documentElement.clientHeight;document.getElementById("contents-area").style.paddingBottom=e+"px"}},this.afterFullscreen=function(){document.getElementById("contents-area").style.paddingBottom=""},this.eventBind=function(e){t.eventObserver=e,t.eventObserver.resizeWindow.subscribe(t.resizeWindow),t.eventObserver.doubleTap.subscribe(t.doubleTap),t.eventObserver.swipe.subscribe(t.swipe),t.eventObserver.fullscreenSingleTap.subscribe(t.fullscreenSingleTap),t.eventObserver.moveBtn.subscribe(t.checkFullscreenMoveBtn),t.fullScreenEventBind(),t.presentationActions.eventBind(t.eventObserver)},this.load=function(e,n){t.docInfo=e,t.maxPage=t.docInfo.status.pageNum;var o=h.Browser.instance;(o.isChrome||o.isFirefox||o.isSafari||o.isAndroid||o.isEdge||o.isIE&&11===o.version)&&t.isFullScreenSupport()?(t.isSupport=!0,t.presentationActions=t.supportFullscreen):t.presentationActions=t.notSupportFullscreen,"cell"===t.docInfo.skinType&&(t.isPage=!1,t.isSheet=!0),t.eventBind(n)}}return e.doingFullScreenCloseEvent=!1,e}();t.Presentation=g}).call(this,n(5))},function(e,t,n){"use strict";(function(e,o){var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__awaiter||function(t,n,o,i){return new(o||(o=e))((function(e,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}l((i=i.apply(t,n||[])).next())}))},s=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ImagePage=void 0;var l=n(1),c=n(0),d=n(3),u=n(76),h=n(284),f=n(285),m=n(286),p=n(51),g=n(25),v=n(8),b=n(287),E=n(105),y=function(t){function n(){var i=t.call(this)||this;return i.rotateMap=new o,i.pageFitAction=new h.PageFit,i.pageWidthFitAction=new f.PageWidthFit,i.pageZoomAction=new m.PageZoom,i.dpiPage=null,i.setOriginMargin=function(){var e=g.Page.ORIGIN_SIZE[0].height?1141/g.Page.ORIGIN_SIZE[0].height:1;g.Page.ORIGIN_MARGIN={marginTop:parseInt(d(".contents-page").css("margin-top"))/e,marginBottom:parseInt(d(".contents-page").css("margin-bottom"))/e}},i.getDimensionImg=function(t,n,o,r){return a(i,void 0,e,(function(){var e,i,a;return s(this,(function(s){switch(s.label){case 0:return n=void 0!==n?n:0,e=t.contextPath+"/dimension/"+t.status.id+"/"+n+"-"+o+"?dpi="+r,this.docInfo.status.imageConverting&&(e=t.contextPath+"/dimension/"+n+"-"+o+".js?dpi="+r),i=[],[4,c.Util.getJson(e)];case 1:return a=s.sent(),d.each(a,(function(e,t){var n={index:t.p,width:t.w,height:t.h,origin_width:t.w_o,origin_height:t.h_o};i[t.p]=n})),[2,i]}}))}))},i.getDimensionHtml=function(e){return a(i,void 0,void 0,(function(){var t,n;return s(this,(function(o){switch(o.label){case 0:return t=e.resultPath+"/"+e.status.fileName+".xml",[4,c.Util.getXml(t)];case 1:return n=o.sent(),"image"===e.skinType?[2,c.Util.getDimensionHtmlForImage(n)]:[2,c.Util.getDimensionHtmlForPDF(n)]}}))}))},i.createContentDiv=function(e){return a(i,void 0,void 0,(function(){var t,o,i,r,a,l,u;return s(this,(function(s){switch(s.label){case 0:return t=null,c.Util.isConvHtml(this.docInfo)?[4,this.getDimensionHtml(e)]:[3,2];case 1:return t=s.sent(),[3,4];case 2:return[4,this.getDimensionImg(e,0,e.status.pageNum,this.dpiPage.ORIGINAL_DPI)];case 3:t=s.sent(),this.fitSmallImage(t),s.label=4;case 4:for(o=document.createDocumentFragment(),i=0,r=t;i<r.length;i++)a=r[i],g.Page.ORIGIN_SIZE[a.index]={width:a.width,height:a.height,origin_width:a.origin_width,origin_height:a.origin_height},(l=document.createElement("img")).className="contents-page__img img-loading",l.src=this.transparentImg,l.alt="page "+a.index,c.Util.isConvHtml(this.docInfo)&&(g.Page.ORIGIN_SIZE[a.index].path=a.path),a.index<n.initPageNum&&this.onLoadImg(l,a.index),(u=document.createElement("div")).id="page-area"+a.index,u.className="contents-page",l.id="page"+a.index,c.Util.removeContentsAreaTooltip()||(l.title="page"+(a.index+1)),l.setAttribute("data-index",a.index.toString()),u.appendChild(l),o.appendChild(u);return d("#contents-area").append(o),this.setOriginMargin(),d("#page-area0").addClass("contents-page--start"),d("#page-area"+(this.docInfo.status.pageNum-1)).addClass("contents-page--end"),this.pageResizeAction.resizePage(g.Page.RESIZE_OBJ.percent,this.rotateMap,0,n.initPageNum),this.checkResizeControlBar(),[2]}}))}))},i._zoomCalculation=function(e,t){for(var n=Number(document.getElementById("page0").style.width.replace("px","")),o=g.Page.RESIZE_OBJ.percent,r=l.Browser.instance.isMobile||100===i.curZoomFactor?1:i.curZoomFactor/100,a=0,s=e;a<s.length;a++){var c=s[a],d=c/100*g.Page.ORIGIN_SIZE[0].width*r;if(t(d,n)&&!(Math.abs(d-n)<1)){o=c;break}}return o},i._zoomCalculationForPrint=function(){var e=l.Browser.instance.isMobile||100===i.curZoomFactor?1:i.curZoomFactor/100;return 794/(g.Page.ORIGIN_SIZE[0].width*e)*100},i.zoomPage=function(e){var t=null;switch(e){case u.ZOOM_TYPE.ZoomOut:t=i._zoomCalculation(u.Controlbar.ZOOM_LIST.slice().reverse(),(function(e,t){return e<t}));break;case u.ZOOM_TYPE.ZoomIn:t=i._zoomCalculation(u.Controlbar.ZOOM_LIST,(function(e,t){return e>t}));break;case u.ZOOM_TYPE.OriginSize:t=100;break;case u.ZOOM_TYPE.PrintA4:t=i._zoomCalculationForPrint()}t!==g.Page.RESIZE_OBJ.percent&&(g.Page.RESIZE_OBJ={type:g.RESIZE_TYPE.PageZoom,percent:t},i.changeDPIContentDiv(i.docInfo.currentPage),i.pageResizeAction=i.pageZoomAction,i.pageResizeAction.resizePage(t,i.rotateMap),i.eventObserver.resizePage.notify(),i.checkResizeControlBar(),i.lastTop=null)},i.changeDPIContentDiv=function(e){return a(i,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return c.Util.isServer(this.docInfo)&&c.Util.isConvImg(this.docInfo)?this.dpiPage.hasHighDPIRatio()?[3,2]:[4,this.getDimensionImg(this.docInfo,0,1,this.dpiPage.HIGH_DPI)]:[2];case 1:t=n.sent(),this.dpiPage.setHighDPIRatio(g.Page.ORIGIN_SIZE[0].width,t[0].width),n.label=2;case 2:return this.dpiPage.changeDPI(g.Page.RESIZE_OBJ.percent)?(this.loadPageImg(e),[2]):[2]}}))}))},i.loadPageImg=function(e){for(var t=i.getDefaultLoadingCnt(),n=e-t<0?e:e-t,o=e+t>i.docInfo.status.pageNum?i.docInfo.status.pageNum:e+t,r=i.getLoadingClassSelector(),a=n;a<o;a++){var s=document.getElementById("page"+a);if(s.className.indexOf(r)>-1)i.onLoadImg(s,a);else if(c.Util.isServer(i.docInfo)&&c.Util.isConvImg(i.docInfo)){if(i.dpiPage.isEqualDPI(s.src))continue;var l={idx:a,width:g.Page.ORIGIN_SIZE[e].width,height:g.Page.ORIGIN_SIZE[e].height};s.src=i.dpiPage.getNewPath(l)}}},i.getLoadingClassSelector=function(){return p.Head.bgColorMode===p.BGCOLOR_MODE.lightScreen?"img-loading-bright":"img-loading"},i.rotatePage=function(){var e=i.docInfo.currentPage,t=i.rotateMap.get(e);i.rotateMap.set(e,void 0===t?90:(t+90)%360);var n=i.rotateMap.get(e);d("#page"+e).removeClass("transform0 transform90 transform180 transform270"),d("#page"+e).css({margin:"",marginTop:"",marginBottom:""}),d("#page"+e).addClass("transform"+n),i.pageResizeAction.resizePage(g.Page.RESIZE_OBJ.percent,i.rotateMap,e,1),i.checkResizeControlBar(),i.lastTop=null},i.rotateEvent=function(){c.Util.bindClickOrTouchEvent(d("#page-rotate"),"controlbar-rotate--hover",(function(){i.rotatePage(),g.Page.RESIZE_OBJ.type===g.RESIZE_TYPE.PageFit&&i.scrollContentAreaEl.scrollTop(g.Page.getPageScrollTop(i.docInfo.currentPage))}))},i.checkResizeControlBar=function(){var e=g.Page.RESIZE_OBJ.percent;g.Page.RESIZE_OBJ.type!==g.RESIZE_TYPE.PageFit&&g.Page.RESIZE_OBJ.type!==g.RESIZE_TYPE.PageWidthFit||(e=Number(document.getElementById("page0").style.width.replace("px",""))/g.Page.ORIGIN_SIZE[0].width*100);e<=u.Controlbar.ZOOM_LIST[0]?(d("#page-zoomout").removeClass("controlbar--enable"),d("#page-zoomout").removeClass("controlbar-zoomout--hover"),d("#page-zoomout").prop("disabled",!0),d("#mobile-controlbar-zoomout__btn").addClass("mobile-controlbar-floating__btn--disabled"),d("#mobile-controlbar-zoomout__btn").prop("disabled",!0)):(d("#page-zoomout").addClass("controlbar--enable"),d("#page-zoomout").prop("disabled",!1),d("#mobile-controlbar-zoomout__btn").removeClass("mobile-controlbar-floating__btn--disabled"),d("#mobile-controlbar-zoomout__btn").prop("disabled",!1)),e>=u.Controlbar.ZOOM_LIST[u.Controlbar.ZOOM_LIST.length-1]?(d("#page-zoomin").removeClass("controlbar--enable"),d("#page-zoomin").removeClass("controlbar-zoomin--hover"),d("#page-zoomin").prop("disabled",!0),d("#mobile-controlbar-zoomin__btn").addClass("mobile-controlbar-floating__btn--disabled"),d("#mobile-controlbar-zoomin__btn").prop("disabled",!0)):(d("#page-zoomin").addClass("controlbar--enable"),d("#page-zoomin").prop("disabled",!1),d("#mobile-controlbar-zoomin__btn").removeClass("mobile-controlbar-floating__btn--disabled"),d("#mobile-controlbar-zoomin__btn").prop("disabled",!1)),g.Page.RESIZE_OBJ.type!==g.RESIZE_TYPE.PageFit&&g.Page.RESIZE_OBJ.type!==g.RESIZE_TYPE.PageWidthFit&&100===e?(d("#page-originsize").addClass("controlbar-originsize--hover"),d("#page-originsize").prop("disabled",!0)):(d("#page-originsize").removeClass("controlbar-originsize--hover"),d("#page-originsize").prop("disabled",!1)),g.Page.RESIZE_OBJ.type===g.RESIZE_TYPE.PageFit?(d("#page-pagefit").addClass("controlbar-pagefit--hover"),d("#page-pagefit").prop("disabled",!0)):(d("#page-pagefit").removeClass("controlbar-pagefit--hover"),d("#page-pagefit").prop("disabled",!1)),g.Page.RESIZE_OBJ.type===g.RESIZE_TYPE.PageWidthFit?(d("#page-pagewidthfit").addClass("controlbar-pagewidthfit--hover"),d("#page-pagewidthfit").prop("disabled",!0)):(d("#page-pagewidthfit").removeClass("controlbar-pagewidthfit--hover"),d("#page-pagewidthfit").prop("disabled",!1))},i.bindControlbarEvent=function(){c.Util.bindClickOrTouchEvent(d("#page-pagefit"),"controlbar-pagefit--hover",(function(){g.Page.RESIZE_OBJ={type:g.RESIZE_TYPE.PageFit,percent:0},i.changeDPIContentDiv(i.docInfo.currentPage),i.pageResizeAction=i.pageFitAction,i.pageResizeAction.resizePage(0,i.rotateMap),i.checkResizeControlBar(),i.lastTop=null,i.scrollContentAreaEl.scrollTop(g.Page.getPageScrollTop(i.docInfo.currentPage)),i.eventObserver.resizePage.notify()}),(function(){i.checkResizeControlBar()})),c.Util.bindClickOrTouchEvent(d("#page-pagewidthfit"),"controlbar-pagewidthfit--hover",(function(){g.Page.RESIZE_OBJ={type:g.RESIZE_TYPE.PageWidthFit,percent:0},i.changeDPIContentDiv(i.docInfo.currentPage),i.pageResizeAction=i.pageWidthFitAction,i.pageResizeAction.resizePage(0,i.rotateMap),i.checkResizeControlBar(),i.lastTop=null,i.eventObserver.resizePage.notify()}),(function(){i.checkResizeControlBar()})),c.Util.bindClickOrTouchEvent(d("#page-originsize"),"controlbar-originsize--hover",(function(){i.zoomPage(u.ZOOM_TYPE.OriginSize)}),(function(){i.checkResizeControlBar()})),c.Util.bindClickOrTouchEvent(d("#page-zoomout"),"controlbar-zoomout--hover",(function(){i.zoomPage(u.ZOOM_TYPE.ZoomOut)})),c.Util.bindClickOrTouchEvent(d("#page-zoomin"),"controlbar-zoomin--hover",(function(){i.zoomPage(u.ZOOM_TYPE.ZoomIn)})),c.Util.bindClickOrTouchEvent(d("#page-prev"),"controlbar-prev--hover",i.moveBackPage),c.Util.bindClickOrTouchEvent(d("#page-next"),"controlbar-next--hover",i.moveNextPage),c.Util.bindClickOrTouchEvent(d("#page-hand-scroll"),"controlbar-hand-scroll--hover",E.MouseScroll.instance.bindDesktopControlbar({elem:document.getElementById("page-hand-scroll"),selector:"controlbar-hand-scroll--hover"}),E.MouseScroll.instance.mouseOut),i.checkMoveControlbar(),(c.Util.rotateImage(i.docInfo)||c.Util.rotatePdf(i.docInfo))&&(d("#page-docfit").removeClass("controlbar__end-block").addClass("controlbar__block"),d("#rotate-seperator").removeClass("controlbar--hide"),d("#page-rotate").removeClass("controlbar--hide"),i.rotateEvent())},i.onLoadImg=function(e,t){var n=new Image;if(c.Util.isConvHtml(i.docInfo))n.src=""+c.Util.getResultPath(i.docInfo,g.Page.ORIGIN_SIZE[t].path);else{var o={idx:t,imgEl:n,width:g.Page.ORIGIN_SIZE[t].width,height:g.Page.ORIGIN_SIZE[t].height};n.src=i.dpiPage.getNewPath(o)}n.onload=function(){c.Util.removeClass(e.parentElement,i.getLoadingClassSelector()),e.className="contents-page__img";var n=document.getElementById("annotationlayer"+t);n&&c.Util.removeClass(n,"annotationlayer--hide")},e.removeEventListener("click",i.retry),n.onerror=function(){c.Util.removeClass(e.parentElement,i.getLoadingClassSelector()),e.src=i.transparentImg,e.className+=" img-retry contents-page__img--error",e.addEventListener("click",i.retry)},e.src=n.src},i.retry=function(e){var t=parseInt(e.target.getAttribute("data-index")),n=document.getElementById("page"+t);c.Util.addClass(n.parentElement,i.getLoadingClassSelector()),i.onLoadImg(n,t)},i.isFitAction=function(){return i.pageResizeAction===i.pageFitAction},i.setFitAction=function(){i.preResizeObj=g.Page.RESIZE_OBJ,i.prePageAction=i.pageResizeAction,g.Page.RESIZE_OBJ={type:g.RESIZE_TYPE.PageFit,percent:0},i.pageResizeAction=i.pageFitAction},i.getRotateMap=function(){return i.rotateMap},i._innerResizeWindow=function(){d(".contents-page").removeAttr("style"),i.setOriginMargin(),i.pageResizeAction.resizePage(g.Page.RESIZE_OBJ.percent,i.rotateMap)},i.doubleTap=function(){return a(i,void 0,void 0,(function(){var e,t=this;return s(this,(function(n){switch(n.label){case 0:return l.Browser.instance.isIOS&&c.Util.isFullScreen()&&g.Page.RESIZE_OBJ.type!==g.RESIZE_TYPE.PageFit&&document.body.clientWidth/window.innerWidth*100!=100||v.default.isAnnotMode?[2]:(g.Page.RESIZE_OBJ.type===g.RESIZE_TYPE.PageFit?(g.Page.RESIZE_OBJ={type:g.RESIZE_TYPE.PageWidthFit,percent:0},this.pageResizeAction=this.pageWidthFitAction):(g.Page.RESIZE_OBJ={type:g.RESIZE_TYPE.PageFit,percent:0},this.pageResizeAction=this.pageFitAction),l.Browser.instance.isIOS?(e=this.docInfo.currentPage,d("#contents-area").css("visibility","hidden"),d("#wrap__index").css("visibility","hidden"),d("#page__input").css("color","#333333"),this.scrollContentAreaEl.scrollTop(g.Page.getPageScrollTop("0")),[4,c.Util.syncTimer((function(){return t.pageResizeAction.resizePage(0,t.rotateMap)}),200)]):[3,3]);case 1:return n.sent(),this.eventObserver.page.notify({pageNum:e,isScroll:!1}),[4,c.Util.syncTimer((function(){d("#contents-area").css("visibility",""),d("#wrap__index").css("visibility",""),d("#page__input").css("color","")}),100)];case 2:return n.sent(),this.checkResizeControlBar(),this.lastTop=null,[3,4];case 3:this.pageResizeAction.resizePage(0,this.rotateMap),this.checkResizeControlBar(),this.lastTop=null,n.label=4;case 4:return this.eventObserver.resizePage.notify(),[2]}}))}))},i.fullscreenAfterEvent=function(){},i.printBeforeEvent=function(){i.setFitAction(),i.zoomPage(u.ZOOM_TYPE.PrintA4),i.eventObserver.resizePage.notify()},i.printAfterEvent=function(){g.Page.RESIZE_OBJ=i.preResizeObj,i.pageResizeAction=i.prePageAction,i.pageResizeAction.resizePage(g.Page.RESIZE_OBJ.percent,i.rotateMap),i.checkResizeControlBar(),i.eventObserver.resizePage.notify()},i.eventBind=function(e){i.eventObserver=e,i.eventObserver.page.subscribe(i.focusPage),i.eventObserver.resizeWindow.subscribe(i.resizeWindow),i.eventObserver.fullScreen.subscribe(i.fullScreen),i.eventObserver.singleTap.subscribe(i.singleTap),i.eventObserver.doubleTap.subscribe(i.doubleTap),i.eventObserver.orientationchange.subscribe(i.orientationchange),i.eventObserver.moveBtn.subscribe(i.checkMoveControlbar),i.eventObserver.annotMode.subscribe(i.annotMode),i.eventObserver.printbefore.subscribe(i.printBeforeEvent),i.eventObserver.printafter.subscribe(i.printAfterEvent),i.eventObserver.zoom.subscribe(i.zoomPage),i.docInfo.status.pageNum>n.initPageNum&&i.eventObserver.initLoadAfter.subscribe((function(){i.pageResizeAction.resizePage(g.Page.RESIZE_OBJ.percent,i.rotateMap,n.initPageNum,i.docInfo.status.pageNum-n.initPageNum)})),i.scrollEventBind(),i.mouseEventBind()},i.setTabIndex=function(){for(var e=c.Util.setTabIndexList(),t=document.getElementById("select-arrow").tabIndex,n=0;n<i.docInfo.status.pageNum;n++)c.Util.setTabIndex(document.getElementById("pagelist"+(n+1)),t),c.Util.setTabIndex(document.getElementById("page-area"+n),e)},i.setFitConfig=function(){switch(l.Browser.instance.isMobile?window.localSynap.config.loadingPageFitTypeForMobile:window.localSynap.config.loadingPageFitType){case 1:g.Page.RESIZE_OBJ={type:g.RESIZE_TYPE.PageWidthFit,percent:0},i.pageResizeAction=i.pageWidthFitAction;break;case 2:g.Page.RESIZE_OBJ={type:g.RESIZE_TYPE.PageZoom,percent:100},i.pageResizeAction=i.pageZoomAction;break;case 0:default:g.Page.RESIZE_OBJ={type:g.RESIZE_TYPE.PageFit,percent:0},i.pageResizeAction=i.pageFitAction}},i.fitSmallImage=function(e){var t;if(!l.Browser.instance.isMobile&&!c.Util.isConvHtml(i.docInfo)&&"image"===i.docInfo.skinType){var n=100!==i.curZoomFactor?i.curZoomFactor/100:1,o=l.Browser.instance.isIOS&&c.Util.isFullScreen()?window.innerHeight:d("#contents").height(),r=[d("#contents").width(),o],a=i.pageResizeAction.getResizeResult(!1,e[0].width,e[0].height,r),s=a[0],u=a[1];s=(t=[s*n,u*n])[0],u=t[1],"tiff"!==i.docInfo.fileType&&e[0].width<s&&e[0].height<u&&(g.Page.RESIZE_OBJ={type:g.RESIZE_TYPE.PageZoom,percent:100},i.pageResizeAction=i.pageZoomAction)}},i.load=function(e,n){return a(i,void 0,void 0,(function(){return s(this,(function(o){switch(o.label){case 0:return t.prototype.load.call(this,e,n),this.bindControlbarEvent(),this.setFitConfig(),this.dpiPage=new b.DPIPage(e),[4,this.createContentDiv(this.docInfo)];case 1:return o.sent(),this.setTabIndex(),this.eventBind(n),this.eventObserver.resizeContents.notify(),[2]}}))}))},i.setDefaultLoadingCnt(5),i}return r(n,t),n.initPageNum=5,n}(g.Page);t.ImagePage=y}).call(this,n(5),n(49))},function(e,t,n){"use strict";(function(e){var o=this&&this.__awaiter||function(t,n,o,i){return new(o||(o=e))((function(e,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}l((i=i.apply(t,n||[])).next())}))},i=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.FileExplorer=t.SORTING_STATUS=t.SORTING_FIELD=void 0;var r,a,s=n(3),l=n(0),c=n(298),d=n(1),u=n(25),h=n(18);!function(e){e.FILENAME="fileName",e.FILETYPE="fileType",e.FILESIZE="fileSize",e.NULL="null"}(r=t.SORTING_FIELD||(t.SORTING_FIELD={})),function(e){e[e.ASEC=0]="ASEC",e[e.DESC=1]="DESC",e[e.NULL=2]="NULL"}(a=t.SORTING_STATUS||(t.SORTING_STATUS={}));var f=function(t,n,f,m,p,g){var v=this;if(this.pathList=[],this.currentPathListIdx=0,this.selectedFilePath=null,this.selectedFileName=null,this.totalPathWidth=parseInt(window.getComputedStyle(document.getElementById("fileExplorer-path__filePath")).width),this.maxFileNamePx=94,this.viewMode=u.VIEW_MODE.desktop,this.childFolderList=[],this.childFileList=[],this.fileExtMap={},this.tabIndexList=["fileExplorer-header__closeBtn","fileExplorer-path__prevBtn","fileExplorer-path__nextBtn","fileExplorer-fileTree-sort__div-fileName","fileExplorer-fileTree-sort__div-fileType","fileExplorer-fileTree-sort__div-fileSize","fileExplorer-viewerBtn"],this.tabIdx=0,this.createFileExplorer=function(){var e;v.pathList.push(v.currentTree),document.getElementById("archiveFileName").textContent=""+v.fileTree.fileName,document.getElementById("archiveFileName").title=""+v.fileTree.fileName,v.createCurrentPath(v.pathList),e=v.devideToFolderAndFileList(v.fileTree.children),v.childFolderList=e[0],v.childFileList=e[1],v.currentTree.childSort.sortingStatus=a.ASEC,v.currentTree.childSort.sortingField=r.FILENAME,v.fileTreeSort(),v.setFileTreeSortArrow(),v.currentTree.children=[],v.currentTree.children=v.childFolderList.concat(v.childFileList),v.jqFileTreeFolderList.append(v.createFileTreeList(v.childFolderList)),v.jqFileTreeFileList.append(v.createFileTreeList(v.childFileList)),v.jqFolderTree.append(v.createFolderTreeList([v.fileTree]));var t=document.getElementsByClassName("fileExplorer-folderTree-div")[0];s(t).append(v.createFolderTreeList(v.childFolderList)),t.getElementsByClassName("fileExplorer-folderTree-div__name")[0].className+=" fileExplorer-folderTree-div__name--selected",v.allCountElm.textContent=""+v.fileTree.children.length},this.createCurrentPath=function(e){var t=s(".fileExplorer-path__filePath");t.empty();var n=0;n-=10;for(var o=0,i=v.currentPathListIdx;i>=0;i--){var r=s("<div/>",{class:"fileExplorer-path__filePath-name",id:"filePath"+o,text:e[i].fileName,title:e[i].fileName,"data-index":i});t.children().length>0?s(r).insertBefore("#arrow"+(o-1)):t.append(r);var a=Math.ceil(document.getElementById("filePath"+o).offsetWidth);if((n+=(a=a>v.maxFileNamePx?v.maxFileNamePx:a)+10)>v.totalPathWidth){s("#filePath"+o).remove(),s("#arrow"+(o-1)).remove();break}if(0!==i){var l=s("<div/>",{class:"fileExplorer-path__filePath-arrow",id:"arrow"+o});s(l).insertBefore("#filePath"+o)}o+=1}0===v.currentPathListIdx?v.jqPrevBtn.addClass("fileExplorer-path__prevBtn--deactivate"):v.jqPrevBtn.removeClass("fileExplorer-path__prevBtn--deactivate"),v.currentPathListIdx===v.pathList.length-1?v.jqNextBtn.addClass("fileExplorer-path__nextBtn--deactivate"):v.jqNextBtn.removeClass("fileExplorer-path__nextBtn--deactivate")},this.createFileTreeList=function(e){for(var t=document.createDocumentFragment(),n=function(e){var n=document.createElement("div");n.className="fileExplorer-fileTree-list__div",n.tabIndex=v.tabIdx;var o=document.createElement("div");o.className="fileExplorer-fileTree-list__div-icon";var i=void 0;i=e.directory?"fileExplorer-folder-icon":v.fileExtMap[e.fileType]?v.fileExtMap[e.fileType]:v.fileExtMap.default,o.className=o.className+" "+i;var r=document.createElement("div");r.className="fileExplorer-fileTree-list__div-name",r.textContent=e.fileName,r.title=e.fileName,l.Util.bindClickEvent(n,(function(t){if(!e.directory){s(".fileExplorer-fileTree-list__div--selected").removeClass("fileExplorer-fileTree-list__div--selected");var n=t.target.parentElement.className.indexOf("fileExplorer-fileTree-fileList")>-1?t.target:t.target.parentElement;n.className+=" fileExplorer-fileTree-list__div--selected",v.selectedFilePath=n.getElementsByClassName("fileExplorer-fileTree-list__div-path")[0].textContent,v.selectedFileName=n.getElementsByClassName("fileExplorer-fileTree-list__div-name")[0].title}}));var a=document.createElement("div");a.className="fileExplorer-fileTree-list__div-size",a.textContent="("+l.Util.getSize(e.fileSize,e.directory)+")";var c=document.createElement("div");c.className="fileExplorer-fileTree-list__div-path",c.textContent=e.filePath,n.appendChild(o),n.appendChild(r),n.appendChild(a),n.appendChild(c),t.appendChild(n)},o=0,i=e;o<i.length;o++)n(i[o]);return t},this.createFolderTreeList=function(e){var t=document.createDocumentFragment(),n=document.createElement("div");n.className="group";for(var o=0,i=e;o<i.length;o++){var r=i[o],a=document.createElement("div");a.className="fileExplorer-folderTree-div";var s=document.createElement("div");s.className="fileExplorer-folderTreeLine-div",s.id=r.filePath;var c=document.createElement("div");c.className="fileExplorer-folderTree-div__arrow fileExplorer-folderTree-div__arrow--hidden";for(var d=0,u=r.children;d<u.length;d++)if(!0===u[d].directory){c.className=" fileExplorer-folderTree-div__arrow",c.title=h.LocaleMessage.getMessage("fileExplore-arrow-up"),c.tabIndex=v.tabIdx;break}var f=function(e){var t=e.target;if(t.className.indexOf("fileExplorer-folderTree-div__arrow")>-1){if(v.folderTreeArrowClick(t),0!==t.parentElement.parentElement.getElementsByClassName("group").length)return;if("fileExplorer-folderTree-div__arrow"===t.className)return}var n=t.className.indexOf("fileExplorer-folderTreeLine-div")<=-1?t.parentElement:t;if(!(n.className.indexOf("fileExplorer-folderTreeLine-div")<=-1)){var o=v.getCurrentPathTree(n.id,v.fileTree.children);v.currentTree=o,v.pushCurrentTree(v.currentTree),v.updateTree()}},m=document.createElement("div");m.className="fileExplorer-folderTree-div__folder 'fileExplorer-folder-icon'";var p=document.createElement("div");p.className="fileExplorer-folderTree-div__name",p.textContent=r.fileName,p.title=r.fileName,p.tabIndex=v.tabIdx,l.Util.bindClickEvent(m,f),l.Util.bindClickEvent(p,f),l.Util.bindClickEvent(c,f),s.appendChild(c),s.appendChild(m),s.appendChild(p),a.appendChild(s),n.appendChild(a),t.appendChild(n)}return t},this.updateTree=function(){var e;v.selectedFilePath=null,v.allCountElm.textContent=""+v.currentTree.children.length,s(".fileExplorer-folderTree-div__name--selected").removeClass("fileExplorer-folderTree-div__name--selected"),e=v.devideToFolderAndFileList(v.currentTree.children),v.childFolderList=e[0],v.childFileList=e[1];var t=document.getElementById(v.currentTree.filePath);0===t.parentElement.getElementsByClassName("fileExplorer-folderTree-div").length&&(t.parentElement.appendChild(v.createFolderTreeList(v.childFolderList)),t.getElementsByClassName("fileExplorer-folderTree-div__arrow")[0].className+=" folderExplorer-arrow-down");for(var n=null===t.parentElement.getElementsByClassName("group").item(0)?t.parentElement:t.parentElement.getElementsByClassName("group").item(0),o=[];"fileExplorer-folderTree"!==n.id;)"none"===n.style.display&&o.push(n),n=n.parentElement;if(o)for(var i=0,c=o;i<c.length;i++){var d=c[i];d.parentElement.getElementsByClassName("fileExplorer-folderTreeLine-div").item(0).getElementsByClassName("fileExplorer-folderTree-div__arrow").item(0).className+=" folderExplorer-arrow-down",s(d).show()}var u=t.getElementsByClassName("fileExplorer-folderTree-div__name")[0];s(u).hasClass("fileExplorer-folderTree-div__name--selected")||(u.className+=" fileExplorer-folderTree-div__name--selected"),v.currentTree.childSort.sortingStatus===a.NULL&&(v.currentTree.childSort.sortingField=r.FILENAME,v.currentTree.childSort.sortingStatus=a.ASEC,v.fileTreeSort(),v.currentTree.children=[],v.currentTree.children=v.childFolderList.concat(v.childFileList)),v.setFileTreeSortArrow(),v.jqFileTreeFolderList.empty(),v.jqFileTreeFileList.empty(),v.jqFileTreeFolderList.append(v.createFileTreeList(v.childFolderList)),v.jqFileTreeFileList.append(v.createFileTreeList(v.childFileList)),v.createCurrentPath(v.pathList),l.Util.isMobileMode()&&v.setArchiveFileNameWidth()},this.filePathPrevBtnEventBind=function(){l.Util.bindClickOrTouchEvent(s(".fileExplorer-path__prevBtn"),"fileExplorer-path__prevBtn--hover",(function(e){e.target.classList.contains("fileExplorer-path__prevBtn--deactivate")||v.currentPathListIdx>0&&(v.currentPathListIdx-=1,v.currentTree=v.pathList[v.currentPathListIdx],v.updateTree())}),(function(e){s(e.target).removeClass("fileExplorer-path__prevBtn--hover")}),(function(e){e.target.classList.contains("fileExplorer-path__prevBtn--deactivate")||s(e.target).addClass("fileExplorer-path__prevBtn--hover")}))},this.filePathNextBtnEventBind=function(){l.Util.bindClickOrTouchEvent(s(".fileExplorer-path__nextBtn"),"fileExplorer-path__nextBtn--hover",(function(e){e.target.classList.contains("fileExplorer-path__nextBtn--deactivate")||v.currentPathListIdx<v.pathList.length-1&&(v.currentPathListIdx+=1,v.currentTree=v.pathList[v.currentPathListIdx],v.updateTree())}),(function(e){s(e.target).removeClass("fileExplorer-path__nextBtn--hover")}),(function(e){e.target.classList.contains("fileExplorer-path__nextBtn--deactivate")||s(e.target).addClass("fileExplorer-path__nextBtn--hover")}))},this.filePathEventBind=function(){s(".fileExplorer-path__filePath").on(d.Browser.instance.isMobile?"touchstart":"mouseover",(function(e){e.target.className.indexOf("fileExplorer-path__filePath-name")>-1&&s(e.target).addClass("fileExplorer-path__filePath-name--hover")})).on(d.Browser.instance.isMobile?"touchend click":"mouseout click",(function(e){"touchend"!==e.type&&"mouseout"!==e.type||e.target.className.indexOf("fileExplorer-path__filePath-name")>-1&&s(e.target).removeClass("fileExplorer-path__filePath-name--hover"),"click"===e.type&&(v.currentPathListIdx=parseInt(e.target.getAttribute("data-index")),v.currentTree=v.pathList[v.currentPathListIdx],v.updateTree())}))},this.fileTreeSortDivEventBind=function(){l.Util.bindClickOrTouchEvent(v.jqFileTreeSortDiv,"fileExplorer-fileTree-sort__div--hover",(function(e){v.fileTreeSortDivClick(e)}),(function(){s(".fileExplorer-fileTree-sort__div--hover").removeClass("fileExplorer-fileTree-sort__div--hover")}),(function(e){var t=e.target.className.indexOf("fileExplorer-fileTree-sort__div-arrow")>-1||e.target.className.indexOf("fileExplorer-fileTree-sort__div-type")>-1?e.target.parentElement:e.target.className.indexOf("fileExplorer-fileTree-sort__div")>-1?e.target:null;t.className.indexOf("fileExplorer-fileTree-sort__div")>-1&&(t.className+=" fileExplorer-fileTree-sort__div--hover")}))},this.fileTreeSortDivClick=function(e){var t=e.target.className.indexOf("fileExplorer-fileTree-sort__div-arrow")>-1||e.target.className.indexOf("fileExplorer-fileTree-sort__div-type")>-1?e.target.parentElement:e.target.className.indexOf("fileExplorer-fileTree-sort__div")>-1?e.target:null;if(null!==t){var n=null;if("fileExplorer-fileTree-sort__div-fileName"===t.id)n=r.FILENAME;else if("fileExplorer-fileTree-sort__div-fileType"===t.id)n=r.FILETYPE;else{if("fileExplorer-fileTree-sort__div-fileSize"!==t.id)return;n=r.FILESIZE}v.currentTree.childSort.sortingField!==n?v.currentTree.childSort.sortingStatus=a.ASEC:v.currentTree.childSort.sortingStatus=v.currentTree.childSort.sortingStatus===a.ASEC?a.DESC:a.ASEC,v.currentTree.childSort.sortingField=n,v.fileTreeSort(),v.setFileTreeSortArrow(),v.currentTree.children=[],v.currentTree.children=v.childFolderList.concat(v.childFileList),v.jqFileTreeFolderList.empty(),v.jqFileTreeFileList.empty(),v.jqFileTreeFolderList.append(v.createFileTreeList(v.childFolderList)),v.jqFileTreeFileList.append(v.createFileTreeList(v.childFileList)),l.Util.isMobileMode()&&v.setArchiveFileNameWidth()}},this.fileTreeSort=function(){var e=v.currentTree.childSort.sortingField;switch(v.currentTree.childSort.sortingStatus){case a.ASEC:v.childFileList.sort((function(t,n){return t[e]<n[e]?-1:t[e]==n[e]?0:1})),v.childFolderList.sort((function(t,n){return t[e]<n[e]?-1:t[e]==n[e]?0:1}));break;case a.DESC:v.childFileList.sort((function(t,n){return n[e]<t[e]?-1:n[e]==t[e]?0:1})),v.childFolderList.sort((function(t,n){return n[e]<t[e]?-1:n[e]==t[e]?0:1}))}},this.setFileTreeSortArrow=function(){s(".fileExplorer-fileTree-sort__div-arrow").css("display","none"),s(".fileTree-sort__div-arrow-down").removeClass("fileTree-sort__div-arrow-down");var e=null;switch(v.currentTree.childSort.sortingField){case r.FILENAME:e=document.getElementById("fileExplorer-fileTree-sort__div-fileName-arrow");break;case r.FILETYPE:e=document.getElementById("fileExplorer-fileTree-sort__div-fileType-arrow");break;case r.FILESIZE:e=document.getElementById("fileExplorer-fileTree-sort__div-fileSize-arrow")}switch(v.currentTree.childSort.sortingStatus){case a.ASEC:e.className="fileExplorer-fileTree-sort__div-arrow";break;case a.DESC:e.className+=" fileTree-sort__div-arrow-down"}e.style.display="inline-block"},this.fileTreeFolderListEventBind=function(){var e=0;v.jqFileTreeFolderList.on("click",(function(t){var n=(new Date).getTime();e+250>n&&v.fileTreeFolderListDoubleClick(t),e=n}))},this.fileTreeFolderListDoubleClick=function(e){var t=e.target.parentElement.className.indexOf("fileExplorer-fileTree-folderList")>-1?e.target:e.target.parentElement,n=v.getCurrentPathTree(t.getElementsByClassName("fileExplorer-fileTree-list__div-path")[0].textContent,v.currentTree.children);v.currentTree=n,v.pushCurrentTree(v.currentTree),v.updateTree()},this.pushCurrentTree=function(e){for(var t=v.pathList.length,n=t-1;n>=0;n--){if(null===e.parent&&e===v.pathList[n])return void(v.currentPathListIdx=n);if(v.pathList[n]===e.parent){if(e===v.pathList[n+1])return void(v.currentPathListIdx=n+1);for(var o=n+1;o<t;o++)v.pathList.pop();return v.pathList.push(e),void(v.currentPathListIdx=v.pathList.length-1)}}v.pathList=[],v.currentPathListIdx=-1;for(var i=e;null!==i;)v.pathList.unshift(i),v.currentPathListIdx+=1,i=i.parent},this.folderTreeArrowClick=function(e){e.className.indexOf("folderExplorer-arrow-down")>-1?(e.className="fileExplorer-folderTree-div__arrow",s(e.parentElement.parentElement.getElementsByClassName("group").item(0)).hide(),e.title=h.LocaleMessage.getMessage("fileExplore-arrow-up")):(e.className+=" folderExplorer-arrow-down",s(e.parentElement.parentElement.getElementsByClassName("group").item(0)).show(),e.title=h.LocaleMessage.getMessage("fileExplore-arrow-down"))},this.viewFile=function(t){return o(v,void 0,e,(function(){var e,n,o;return i(this,(function(i){switch(i.label){case 0:return e=this.contextPath+"/viewArchiveFile/"+this.docId,(n={}).param={filePath:this.selectedFilePath,convertType:this.convertType,convertLocale:this.convLocale,title:this.selectedFileName},o=null,[4,l.Util.ajaxCall(e,"POST",n)];case 1:return o=i.sent(),t.location.href=o?l.Util.getUrlWithExtraParam(this.contextPath+"/view/"+JSON.parse(o).key):l.Util.getUrlWithExtraParam(this.contextPath+"/exception?convLocale="+this.convLocale),[2]}}))}))},this.viewFileEventBind=function(){l.Util.bindClickEvent(document.getElementById("fileExplorer-viewerBtn"),(function(){if(v.selectedFilePath){var e=window.open(l.Util.getUrlWithExtraParam(v.contextPath+"/loading"));v.viewFile(e)}}))},this.setFileTreeHeight=function(){s(".fileExplorer").css("height",s("#wrap").height()-parseInt(s(".modal__fileExplorer").css("padding-top")));var e=s(".fileExplorer").outerHeight(!0)-s(".fileExplorer-header").outerHeight(!0)-s(".fileExplorer-path").outerHeight(!0)-s(".fileExplorer-viewerBtn").outerHeight(!0);s(".fileExplorer-fileTree").css("height",e),s(".fileExplorer-fileTree-list").css("height",e-s(".fileExplorer-fileTree-sort").outerHeight(!0))},this.setFilePathWidth=function(){var e=s(".fileExplorer").outerWidth(!0)-2*s(".fileExplorer-path__prevBtn").outerWidth(!0)-28;s(".fileExplorer-path__filePath").css("width",e),v.totalPathWidth=e},this.setSortDivWidth=function(){var e=s(".fileExplorer-tree").outerWidth(!0)/3-parseInt(s(".fileExplorer-fileTree-sort__div").css("padding-left"))-parseInt(s(".fileExplorer-fileTree-sort__div").css("padding-right"))-parseInt(s(".fileExplorer-fileTree-sort__div").css("border-right-width"));s(".fileExplorer-fileTree-sort__div").css("width",e)},this.setArchiveFileHeaderWidth=function(){var e=s(".fileExplorer-header").outerWidth(!0)-parseInt(s(".fileExplorer-header").css("padding-right"))-parseInt(s(".fileExplorer-header").css("padding-left"))-parseInt(s(".fileExplorer-header__archiveFileName").css("padding-left"))-parseInt(s(".fileExplorer-header__archiveFileName").css("padding-right"))-s(".fileExplorer-header__closeBtn").outerWidth(!0);s(".fileExplorer-header__archiveFileName").css("width",e)},this.setArchiveFileNameWidth=function(){var e=s(".fileExplorer-tree").outerWidth()-s(".fileExplorer-fileTree-list__div-icon").outerWidth()-parseInt(s(".fileExplorer-fileTree-list__div").css("padding-left"))-parseInt(s(".fileExplorer-fileTree-list__div").css("padding-right"))-parseInt(s(".fileExplorer-fileTree-list__div-icon").css("margin-right"))-parseInt(s(".fileExplorer-fileTree-list__div-name").css("margin-right"))-68;s(".fileExplorer-fileTree-list__div-name").css("max-width",e)},this.resizeEvent=function(){l.Util.isMobileMode()&&v.viewMode!==u.VIEW_MODE.mobile?v.viewMode=u.VIEW_MODE.mobile:l.Util.isMobileMode()||v.viewMode===u.VIEW_MODE.desktop||(v.viewMode=u.VIEW_MODE.desktop,s(".fileExplorer").css("height",""),s(".fileExplorer-fileTree").css("height",""),s(".fileExplorer-fileTree-list").css("height",""),s(".fileExplorer-path__filePath").css("width",""),s(".fileExplorer-fileTree-sort__div").css("width",""),s(".fileExplorer-header__archiveFileName").css("width",""),s(".fileExplorer-fileTree-list__div-name").css("max-width",""),v.totalPathWidth=413),l.Util.isMobileMode()&&(v.setFileTreeHeight(),v.setFilePathWidth(),v.setSortDivWidth(),v.setArchiveFileHeaderWidth(),v.setArchiveFileNameWidth()),v.createCurrentPath(v.pathList)},this.resizeEventBind=function(){var e;s(window).on("resize",(function(){clearTimeout(e),e=setTimeout(v.resizeEvent,20)}))},this.closeEventBind=function(){l.Util.bindClickEvent(document.getElementById("fileExplorer-header__closeBtn"),(function(){self.close()}))},this.devideToFolderAndFileList=function(e){for(var t=[],n=[],o=0,i=e;o<i.length;o++){var r=i[o];!0===r.directory?t.push(l.Util.clone(r)):n.push(l.Util.clone(r))}return[t,n]},this.getCurrentPathTree=function(e,t){for(var n=e.replace(/^\/|\/$/g,"").split("/"),o=t,i=null,r=0;r<n.length;r++)for(var a=0;a<o.length;a++)if(o[a].fileName===n[r]){i=o[a],o=o[a].children;break}return null===i?v.fileTree:i},this.preventDragSelect=function(){v.jqFileExplorer.on("dragstart",(function(){return!1})),v.jqFileExplorer.on("selectstart",(function(){return!1}))},this.eventBind=function(){v.filePathEventBind(),v.fileTreeFolderListEventBind(),v.preventDragSelect(),v.viewFileEventBind(),v.resizeEventBind(),v.closeEventBind(),v.filePathPrevBtnEventBind(),v.filePathNextBtnEventBind(),v.fileTreeSortDivEventBind()},this.archiveFileViewDialog=function(){v.eventBind(),v.jqFileExplorer.show(),v.jqModal.show(),l.Util.isMobileMode()&&(v.setFileTreeHeight(),v.setFilePathWidth(),v.setSortDivWidth(),v.setArchiveFileHeaderWidth(),v.setArchiveFileNameWidth()),d.Browser.instance.isMobile&&s(".fileExplorer-header__closeBtn").hide()},this.hasChildDirectory=function(){return v.currentTree.children.reduce((function(e,t){return!(e||!t.directory)||e}),!1)},this.contextPath=f,this.docId=m,this.convertType=p,this.convLocale=g,this.fileTree=new c.ZipTree(t,n).getZipTree(),this.currentTree=this.fileTree,this.jqModal=s(".modal"),this.jqFileExplorer=s(".fileExplorer"),this.jqFolderTree=s("#fileExplorer-folderTree"),this.jqFileTree=s(".fileExplorer-fileTree"),this.jqFileTreeFolderList=s(".fileExplorer-fileTree-folderList"),this.jqFileTreeFileList=s(".fileExplorer-fileTree-fileList"),this.jqFileTreeFolderAndFileList=s(".fileExplorer-fileTree-folderList, .fileExplorer-fileTree-fileList"),this.allCountElm=document.getElementById("fileExplorer-allCount__num"),this.jqPrevBtn=s(".fileExplorer-path__prevBtn"),this.jqNextBtn=s(".fileExplorer-path__nextBtn"),this.jqFileTreeSort=s(".fileExplorer-fileTree-sort"),this.jqFileTreeSortDiv=s(".fileExplorer-fileTree-sort__div"),this.fileExtMap.xls="fileExplorer-cell-icon",this.fileExtMap.xlsb="fileExplorer-cell-icon",this.fileExtMap.xlsx="fileExplorer-cell-icon",this.fileExtMap.csv="fileExplorer-cell-icon",this.fileExtMap.nxls="fileExplorer-cell-icon",this.fileExtMap.ppt="fileExplorer-slide-icon",this.fileExtMap.pptx="fileExplorer-slide-icon",this.fileExtMap.nppt="fileExplorer-slide-icon",this.fileExtMap.doc="fileExplorer-word-icon",this.fileExtMap.docx="fileExplorer-word-icon",this.fileExtMap.ndoc="fileExplorer-word-icon",this.fileExtMap.hwp="fileExplorer-hwp-icon",this.fileExtMap.hml="fileExplorer-hwp-icon",this.fileExtMap.hwx="fileExplorer-hwp-icon",this.fileExtMap.hwpx="fileExplorer-hwp-icon",this.fileExtMap.odt="fileExplorer-odt-icon",this.fileExtMap.pdf="fileExplorer-pdf-icon",this.fileExtMap.bmp="fileExplorer-img-icon",this.fileExtMap.gif="fileExplorer-img-icon",this.fileExtMap.jpg="fileExplorer-img-icon",this.fileExtMap.jpeg="fileExplorer-img-icon",this.fileExtMap.png="fileExplorer-img-icon",this.fileExtMap.pbm="fileExplorer-img-icon",this.fileExtMap.tif="fileExplorer-img-icon",this.fileExtMap.tiff="fileExplorer-img-icon",this.fileExtMap.webp="fileExplorer-img-icon",this.fileExtMap.jp2="fileExplorer-img-icon",this.fileExtMap.j2c="fileExplorer-img-icon",this.fileExtMap.j2k="fileExplorer-img-icon",this.fileExtMap.jpc="fileExplorer-img-icon",this.fileExtMap.txt="fileExplorer-txt-icon",this.fileExtMap.htm="fileExplorer-html-icon",this.fileExtMap.html="fileExplorer-html-icon",this.fileExtMap.xmldart="fileExplorer-html-icon",this.fileExtMap.xml="fileExplorer-txt-icon",this.fileExtMap.mht="fileExplorer-mht-icon",this.fileExtMap.mhtml="fileExplorer-mht-icon",this.fileExtMap.zip="fileExplorer-zip-icon",this.fileExtMap.default="fileExplorer-nosupport-icon",this.tabIdx=l.Util.setTabIndexList(this.tabIndexList,1,!0),this.createFileExplorer(),this.hasChildDirectory()&&(document.getElementsByClassName("fileExplorer-folderTree-div__arrow")[0].className="fileExplorer-folderTree-div__arrow folderExplorer-arrow-down",document.getElementsByClassName("fileExplorer-folderTree-div__arrow")[0].title=h.LocaleMessage.getMessage("fileExplore-arrow-down"),document.getElementsByClassName("fileExplorer-folderTree-div__arrow")[0].tabIndex=this.tabIdx),l.Util.isMobileMode()){var b=function(){document.querySelector('meta[name="viewport"]').setAttribute("content",l.Util.getDefaultViewPortString())};window.addEventListener("orientationchange",b),b()}};t.FileExplorer=f}).call(this,n(5))},,function(e,t,n){n(163),n(304),n(319),n(323),n(325),e.exports=n(327)},function(e,t,n){"use strict";(function(e){var o=this&&this.__awaiter||function(t,n,o,i){return new(o||(o=e))((function(e,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}l((i=i.apply(t,n||[])).next())}))},i=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),a=n(101),s=n(302),l=n(1),c={page:new s.Observable,sheet:new s.Observable,resizeWindow:new s.Observable,resizePage:new s.Observable,resizeContents:new s.Observable,fullScreen:new s.Observable,mobileHeader:new s.Observable,mobileHeaderHover:new s.Observable,mobileThumb:new s.Observable,scroll:new s.Observable,singleTap:new s.Observable,fullscreenSingleTap:new s.Observable,doubleTap:new s.Observable,swipe:new s.Observable,bgColor:new s.Observable,moveBtn:new s.Observable,orientationchange:new s.Observable,printbefore:new s.Observable,printafter:new s.Observable,saveAnnotationServer:new s.Observable,updateAnnotList:new s.Observable,hideAnnotListInMobile:new s.Observable,exportPdf:new s.Observable,saveServerPdf:new s.Observable,editedAnnotation:new s.Observable,loadAnnotation:new s.Observable,reRenderAnnotation:new s.Observable,modifyMarkerAttr:new s.Observable,searchNext:new s.Observable,searchText:new s.Observable,searchDisplay:new s.Observable,sheetFail:new s.Observable,sheetChangeTile:new s.Observable,annotMode:new s.Observable,undoMarker:new s.Observable,redoMarker:new s.Observable,afterUndoRedoSheet:new s.Observable,selectAnnotation:new s.Observable,unSelectAnnotation:new s.Observable,dragAnnotStart:new s.Observable,dragAnnotEnd:new s.Observable,newMemo:new s.Observable,deleteMarker:new s.Observable,showProp:new s.Observable,closeProp:new s.Observable,changeMarkerStyle:new s.Observable,keyPress:new s.Observable,keyUp:new s.Observable,saveAnnotCb:new s.Observable,applyAnnot:new s.Observable,moveLaserCb:new s.Observable,zoom:new s.Observable,saveAnnotation:new s.Observable,startViewportScroll:new s.Observable,endViewportScroll:new s.Observable,initLoadAfter:new s.Observable},d=function(){var e,t,n,o;NodeList.prototype.forEach||(NodeList.prototype.forEach=Array.prototype.forEach),String.prototype.padStart||(String.prototype.padStart=function(e,t){return e>>=0,t=String(void 0!==t?t:" "),this.length>e?String(this):((e-=this.length)>t.length&&(t+=t.repeat(e/t.length)),t.slice(0,e)+String(this))}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),o=n.length>>>0,i=arguments[1],r=0;r<o;r++)if(t=n[r],e.call(i,t,r,n))return r;return-1},enumerable:!1,configurable:!1,writable:!1}),Array.from||(Array.from=(e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},n=Math.pow(2,53)-1,o=function(e){var t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(t,0),n)},function(e){var n=this,i=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var r,a=arguments.length>1?arguments[1]:void 0;if(void 0!==a){if(!t(a))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(r=arguments[2])}for(var s,l=o(i.length),c=t(n)?Object(new n(l)):new Array(l),d=0;d<l;)s=i[d],c[d]=a?void 0===r?a(s,d):a.call(r,s,d):s,d+=1;return c.length=l,c})),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var o=arguments[1],i=0;i<n;){var r=t[i];if(e.call(o,r,i,t))return r;i++}},configurable:!0,writable:!0})};r((function(){return o(void 0,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return d(),function(){var e=window.macKeys={cmdKey:!1,ctrlKey:!1,shiftKey:!1,altKey:!1,reset:function(){this.cmdKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.altKey=!1}};if(l.Browser.instance.isMac){var t=l.Browser.instance,n=t.isChrome,o=t.isSafari,i=t.isFirefox,r=t.isOpera,a=n||o;window.onkeydown=function(t){var n=t.keyCode;(a||r)&&(91===n||93===n)||i&&224===n?e.cmdKey=!0:16===n?e.shiftKey=!0:17===n?e.ctrlKey=!0:18===n&&(e.altKey=!0)},window.onkeyup=function(t){var n=t.keyCode;(a||r)&&(91===n||93===n)||i&&224===n?e.cmdKey=!1:16===n?e.shiftKey=!1:17===n?e.ctrlKey=!1:18===n&&(e.altKey=!1)},window.onblur=function(){e.reset()}}}(),[4,new a.Init(c).load()];case 1:return e.sent(),window.localSynap.complete="complete",[2]}}))}))}))}).call(this,n(5))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThumbnailMobile=void 0;var o=n(3),i=n(0),r=n(18),a=n(36),s=n(30),l=n(1),c=n(8),d=n(19),u=function(e){var t=this;this.isThumbnailButton=null,this.eventObserver=null,this.protectedObj=null,this.eventBind=function(e,n){t.docInfo=n,l.Browser.instance.isMobile&&(o("#web-thumbnailbar").addClass("thumbnailbar--touch-expand"),o("#mobile-thumbnailbar").addClass("thumbnailbar--touch-expand")),t.eventObserver=e,t.eventObserver.mobileThumb.subscribe(t.mobileThumb),t.mouseoverEventBind(),l.Browser.instance.isMobile&&t.eventObserver.resizeWindow.subscribe(t.resizeWindow),l.Browser.instance.isSupportVisualViewport()&&(t.eventObserver.startViewportScroll.subscribe(t.startViewportScroll),t.eventObserver.endViewportScroll.subscribe(t.endViewportScroll))},this.toggleAction=function(){s.Thumbnail.THUMB_STATUS===s.THUMB_FLAG.off?(s.Thumbnail.THUMB_STATUS=s.THUMB_FLAG.on,t.showThumb(),t.actionMobileThumbBtn(a.ShowActionType.SHOW),t.eventObserver.mobileHeader.notify(a.ShowActionType.SHOW)):(s.Thumbnail.THUMB_STATUS=s.THUMB_FLAG.off,t.hideThumb(),t.actionMobileThumbBtn(a.ShowActionType.HIDE3SEC),t.eventObserver.mobileHeader.notify(a.ShowActionType.HIDE3SEC)),d.ScaleEvent._doScaleSkinThumbnail()},this.initThumb=function(){null===t.isThumbnailButton&&(t.isThumbnailButton=t.jqThumbnailButton.is(":visible")),o("#mobile-thumbnailbar").removeClass("mobile-thumbnailbar__img--close"),t.jqThumbnail.css("display",""),t.jqThumbnailBar.removeClass("wrap__thumbnailbar--mobile-on"),document.getElementById("mobile-thumbnailbar").title=r.LocaleMessage.getMessage("icon_thumbnail_close"),t.isThumbnailButton&&t.jqThumbnailButton.removeClass("thumbnail-btn__img--on")},this.showThumb=function(){t.jqThumbnail.show(),o("#mobile-thumbnailbar").addClass("mobile-thumbnailbar__img--close"),t.jqThumbnailBar.addClass("wrap__thumbnailbar--mobile-on"),t.isThumbnailButton&&t.jqThumbnailButton.addClass("thumbnail-btn__img--on")},this.hideThumb=function(){t.initThumb(),document.getElementById("mobile-thumbnailbar").title=r.LocaleMessage.getMessage("icon_thumbnail_open")},this.changeMode=function(e){s.Thumbnail.THUMB_STATUS===s.THUMB_FLAG.on?(t.showThumb(),t.actionMobileThumbBtn(a.ShowActionType.SHOW),t.eventObserver.mobileHeader.notify(a.ShowActionType.SHOW)):(t.hideThumb(),t.actionMobileThumbBtn(a.ShowActionType.HIDE3SEC),t.eventObserver.mobileHeader.notify(a.ShowActionType.HIDE3SEC)),t.eventObserver.page.notify({pageNum:e,isScroll:!1}),setTimeout((function(){document.getElementById("thumbnail").scrollTop=document.getElementById("thumb-content"+e).offsetTop-1}),150)},this.resizeWindow=function(){d.ScaleEvent._doScaleSkinThumbnail()},this.mobileThumb=function(e){switch(e){case a.ShowActionType.SHOW:t.jqThumbnail.show(),t.actionMobileThumbBtn(a.ShowActionType.SHOW);break;case a.ShowActionType.HIDE3SEC:case a.ShowActionType.HIDE:t.jqThumbnail.css("display",""),t.actionMobileThumbBtn(e)}},this.mouseoverEventBind=function(){o(".wrap__header").on("mouseover.head",(function(){i.Util.isMobileMode()&&!i.Util.isFullScreen()&&"none"===t.jqThumbnail.css("display")&&t.mobileHeaderHover("mouseover")})).on("mouseleave.head",(function(){i.Util.isMobileMode()&&!i.Util.isFullScreen()&&"none"===t.jqThumbnail.css("display")&&t.mobileHeaderHover("mouseleave")}))},this.mobileHeaderHover=function(e){if(!i.Util.isFullScreen()&&"none"===t.jqThumbnail.css("display"))switch(e){case"mouseover":t.actionMobileThumbBtn(a.ShowActionType.SHOW),t.jqThumbnailBar.show();break;case"mouseleave":t.actionMobileThumbBtn(a.ShowActionType.HIDE3SEC)}},this.actionMobileThumbBtn=function(e){switch(clearTimeout(t.protectedObj.timer),e){case a.ShowActionType.SHOW:t.jqThumbnailBar.show();break;case a.ShowActionType.HIDE:t.jqThumbnailBar.hide();break;case a.ShowActionType.HIDE3SEC:t.jqThumbnailBar.show(),t.protectedObj.timer=window.setTimeout((function(){t.jqThumbnailBar.hide()}),3e3)}},this.startViewportScroll=function(){t.eventObserver.mobileThumb.notify(a.ShowActionType.HIDE)},this.endViewportScroll=function(e){if(!e){var n=c.default.isAnnotMode||s.Thumbnail.THUMB_STATUS===s.THUMB_FLAG.on;t.eventObserver.mobileThumb.notify(n?a.ShowActionType.SHOW:a.ShowActionType.HIDE3SEC)}},this.protectedObj=e,this.jqThumbnail=o("#thumbnail"),this.jqThumbnailButton=o("#thumbnail-btn"),this.jqThumbnailBar=o("#thumbnailbar")};t.ThumbnailMobile=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThumbnailDesktop=void 0;var o=n(3),i=n(18),r=n(30),a=function(e){var t=this;this.eventObserver=null,this.protectedObj=null,this.eventBind=function(e){t.eventObserver=e,o("#web-thumbnailbar").on("dragstart",(function(){return!1}))},this.toggleAction=function(){r.Thumbnail.THUMB_STATUS===r.THUMB_FLAG.off?(r.Thumbnail.THUMB_STATUS=r.THUMB_FLAG.on,t.showThumb()):(r.Thumbnail.THUMB_STATUS=r.THUMB_FLAG.off,t.hideThumb()),t.eventObserver.resizeContents.notify(),t.eventObserver.resizeWindow.notify()},this.initThumb=function(){t.jqThumbnailButton.removeClass("thumbnail-btn__img--on"),document.getElementById("thumbnailview-btn").title=i.LocaleMessage.getMessage("icon_thumbnail_open"),document.getElementById("thumbnail-btn").title=i.LocaleMessage.getMessage("icon_thumbnail_open"),t.jqThumbnail.removeClass("wrap__thumbnail--on"),t.jqThumbnailBar.removeClass("wrap__thumbnailbar--on"),t.jqContents.removeClass("wrap__contents--thumb-on"),t.jqThumbnail.css({width:"","overflow-y":""}),t.jqThumbnailBar.css("left",""),t.jqContents.css("left","")},this.showThumb=function(){t.jqThumbnailButton.addClass("thumbnail-btn__img--on"),t.jqThumbnail.css("overflow-y","scroll"),t.jqThumbnail.addClass("wrap__thumbnail--on"),t.jqThumbnailBar.addClass("wrap__thumbnailbar--on"),t.jqContents.addClass("wrap__contents--thumb-on"),document.getElementById("thumbnailview-btn").title=i.LocaleMessage.getMessage("icon_thumbnail_close"),document.getElementById("thumbnail-btn").title=i.LocaleMessage.getMessage("icon_thumbnail_close")},this.hideThumb=function(){t.initThumb()},this.changeMode=function(e){clearTimeout(t.protectedObj.timer),t.jqThumbnail.css("display",""),t.jqThumbnailBar.show(),r.Thumbnail.THUMB_STATUS===r.THUMB_FLAG.on?t.showThumb():t.hideThumb(),t.eventObserver.page.notify({pageNum:e,isScroll:!1}),setTimeout((function(){document.getElementById("thumbnail").scrollTop=document.getElementById("thumb-content"+e).offsetTop-1}),150)},this.protectedObj=e,this.jqThumbnail=o("#thumbnail"),this.jqThumbnailButton=o("#thumbnail-btn"),this.jqThumbnailBar=o("#thumbnailbar"),this.jqContents=o("#contents")};t.ThumbnailDesktop=a},function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.DrawingSquare=void 0;var r=n(39),a=n(0),s=n(31),l=n(60),c=n(151),d=n(29),u=function(e){function t(t,n,o,i,c){var u=e.call(this,t,n,o,i,c)||this;return u.markerStart=function(e,t){var n=event;if(!(n.touches&&n.touches.length>1)){var o=a.Util.getParentElement(e.node()).id,i=a.Util.getIdxFromElmId(o,"marker-section"),c=r.mouse(t),h=l.default.getTypeToHexColor(u.attr.innerColor);u.newSvg=e.append("rect").style("stroke",s.DrawingTool.hexToRgb(l.default.getTypeToHexColor(u.attr.color))).style("stroke-width",u.attr.thickness*d.default.instance.getPageOrCurrentSheetRatio(i,u.isCell)).style("opacity",u.attr.transparency).style("fill","none"===h?"none":s.DrawingTool.hexToRgb(h)).attr("x",c[0]).attr("y",c[1]).attr("width",0).attr("height",0).attr("class","tmp-marker-path").attr("id","tmp-marker-path"),u.markerDrawBind(e,u.markerEnd,(function(){u.markerDrawTmp(t,c[0],c[1])}))}},u.markerDrawTmp=function(e,t,n){var o=r.mouse(e),i=Math.max(0,Math.abs(o[0]-t)),a=Math.max(0,Math.abs(o[1]-n));o[0]-t>=0&&o[1]-n>=0?u.newSvg.attr("width",i).attr("height",a):o[0]-t>=0&&o[1]-n<0?u.newSvg.attr("y",o[1]).attr("width",i).attr("height",a):o[0]-t<0&&o[1]-n>=0?u.newSvg.attr("x",o[0]).attr("width",i).attr("height",a):o[0]-t<0&&o[1]-n<0&&u.newSvg.attr("x",o[0]).attr("y",o[1]).attr("width",i).attr("height",a)},u.createSvg=function(e,t,n){var o=t,i=s.getViewBox(o.l,o.t,o.w,o.h),a=i.left,l=i.top,c=i.width,d=i.height,h=r.select(e).append("svg").attr("id",n).attr("class","marker-svg").attr("viewBox",a+" "+l+" "+c+" "+d).style("left",a+"px").style("width",c+"px").style("top",l+"px").style("height",d+"px").attr("focusable","false"),f=s.getAnnotInfoStrokeWidth(o.border),m=u.getRectAttribute(o.l,o.t,o.w,o.h,f);return h.append("rect").attr("class","marker-svg__path").attr("x",""+m.x).attr("y",""+m.y).attr("width",""+m.width).attr("height",""+m.height).style("stroke",s.DrawingTool.hexToRgb(s.getAnnotInfoColor(o.c))).style("stroke-width",f).style("opacity",s.getAnnotInfoAlpha(o.a)).style("fill",s.DrawingTool.hexToRgb(s.getAnnotInfoInnerColor(o.ic))),h},u.createAnnotInfo=function(e,t,n,o,i,r){var a=(parseFloat(i.style.strokeWidth)/r).toFixed(2),s=u.createAnnotBaseInfo(e,t,o,i,r),l=s.annot;return l.type="square",l.border={w:a},l.ic=n,s},u.redrawAttr=function(e,t){var n=t.annot;u.redrawMoveAttr(e,t);var o=u.getRectAttribute(n.l,n.t,n.w,n.h,s.getAnnotInfoStrokeWidth(n.border));r.select(e).select("rect").attr("x",""+o.x).attr("y",""+o.y).attr("width",""+o.width).attr("height",""+o.height);var i=u.getFillshapeAttr(t);u.setSvgStyle(r.select(e).select("rect").node(),i)},u.redrawAttrEl=function(e,t,n){var o={};o[""+t]=n;var i=r.select(e).select("rect");if("thickness"===t){var a=Number(n)-parseFloat(i.style("stroke-width"));i.attr("x",""+(Number(i.attr("x"))+a/2)).attr("y",""+(Number(i.attr("y"))+a/2)).attr("width",""+(Number(i.attr("width"))-a)).attr("height",""+(Number(i.attr("height"))-a))}u.setSvgStyle(i.node(),o)},u.getPosition=function(e){var t=e.getBBox();return{left:0===t.width&&0===t.x?parseInt(e.getAttribute("x")):t.x,top:0===t.height&&0===t.y?parseInt(e.getAttribute("y")):t.y}},u.getAnnotSizeWithStroke=function(e,t){return s.getAnnotSizeWithStroke(e.left,e.top,e.width,e.height,2*t)},u.setAnnotInfoThickness=function(e,t){var n=e.annot;n.border||(n.border={w:"",s:"",d:""});var o=Number(n.border.w)-t;n.border.w=t.toString(),n.l=""+(Number(n.l)+o/2),n.t=""+(Number(n.t)+o/2),n.w=""+(Number(n.w)-o),n.h=""+(Number(n.h)-o)},u.getRectAttribute=function(e,t,n,o,i){var r=Number(i);return{x:Number(e)+r,width:Number(n)-2*r,y:Number(t)+r,height:Number(o)-2*r}},u}return i(t,e),t}(c.DrawingFillShape);t.DrawingSquare=u},function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.DrawingMemo=void 0;var r=n(39),a=n(31),s=n(8),l=n(0),c=function(e){function t(t,n,o,i,c){var d=e.call(this,t,n,o,i,c)||this;return d.markerEventBind=function(e){var t=d.markerClick;e.on("click",(function(){t(e,this),r.event.stopPropagation()}))},d.markerClick=function(e,t){var n=r.mouse(t);d.newSvg=e.append("rect").attr("x",n[0]).attr("y",n[1]).attr("class","tmp-marker-path").attr("id","tmp-marker-path"),d.curMarkerSection=l.Util.getParentElement(t),d.eventObserver.editedAnnotation.notify(d.marker.getPageIdxWhenInAnnotationMode()),d.funcSaveDrawing()},d.getAnnotSize=function(e,t){var n={left:Number(e.getAttribute("x"))/t,top:Number(e.getAttribute("y"))/t};return{left:n.left.toFixed(2),width:"20",top:n.top.toFixed(2),height:"20"}},d.createSvg=function(e,t,n){var o=t,i=a.getViewBox(o.l,o.t,o.w,o.h),l=i.left,c=i.top,u=i.width,h=i.height,f=r.select(e).append("svg").attr("id",n).attr("class","marker-svg").attr("viewBox",l+" "+c+" "+u+" "+h).style("left",l+"px").style("width",u+"px").style("top",c+"px").style("height",h+"px").attr("focusable","false");f.append("rect");var m=s.default.parseMarkerId(n),p=m.pageOrSheetIdx,g=m.annotId;return d.eventObserver.newMemo.notify({pageOrSheetIdx:p,annotId:g}),f},d.createAnnotInfo=function(e,t,n,o,i,r){var a=d.createAnnotBaseInfo(e,"fff68f","1.0",i,r),s=a.annot;return s.type="memo",s.icon="Note",a},d.redrawAttr=function(e,t){var n=document.getElementById("annotation-memo");l.Util.containClassName(n,"annotation-memo--hide")||(document.getElementById("annotation-memo__author-input").value=t.annot.contents&&t.annot.contents.t?t.annot.contents.t:"")},d.setAnnotInfoThickness=function(e,t){},d.setAnnotInfoPath=function(e,t){},d}return i(t,e),t}(a.DrawingTool);t.DrawingMemo=c},function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.DrawingLine=void 0;var r=n(39),a=n(1),s=n(0),l=n(31),c=n(60),d=n(103),u=n(29),h=n(267);function f(e,t,n,o,i,r){void 0===r&&(r=1);var a=12*i*r,s=function(e){return{x:a*Math.cos(e)+n,y:a*Math.sin(e)+o}},l=h.MathUtil.getDegree(e,t,n,o),c=s(h.MathUtil.degreeToRadian(l+180+30)),d=c.x,u=c.y,f=s(h.MathUtil.degreeToRadian(l+180-30)),m=f.x,p=f.y;return"M "+d.toFixed(2)+" "+u.toFixed(2)+" L "+n.toFixed(2)+" "+o.toFixed(2)+" L "+m.toFixed(2)+" "+p.toFixed(2)}function m(e,t){var n=l.getPathList(e),o=n[0].split(" ").filter((function(e){return e.length>0})).slice(1,3),i=n[0].split(" ").filter((function(e){return e.length>0})).slice(4,6),r=n[0];return n[1]&&(r+=f(Number(o[0]),Number(o[1]),Number(i[0]),Number(i[1]),t)),n[2]&&(r+=f(Number(i[0]),Number(i[1]),Number(o[0]),Number(o[1]),t)),r}var p=function(e){function t(t,n,o,i,h,p){var g=e.call(this,t,n,o,i,h)||this;return g.isArrow=!1,g.tempPath=[],g.markerEventBind=function(e,t){var n=g.markerStart,o=g.markerEnd;e.on(s.Util.getClickStartEventName(),(function(){t()&&n(e,this)})),e.on(s.Util.getClickEndEventName(),(function(){o(e,this)})),a.Browser.instance.isMobile||e.on("mouseleave pointerleave",(function(){o(e,this)}))},g.markerStart=function(e,t){var n=event;if(!(n.touches&&n.touches.length>1)){var o=s.Util.getParentElement(e.node()).id,i=s.Util.getIdxFromElmId(o,"marker-section"),a=u.default.instance.getPageOrCurrentSheetRatio(i,g.isCell);g.newSvg=e.append("path").data([g.tempPath]).style("stroke",l.DrawingTool.hexToRgb(c.default.getTypeToHexColor(g.attr.color))).style("stroke-width",g.attr.thickness*a).style("opacity",g.attr.transparency).style("fill","transparent").attr("class","tmp-marker-path").attr("id","tmp-marker-path");var d=r.mouse(t),h=d[0],f=d[1];g.tempPath[0]=[h,f],g.markerDrawTmp(t,h,f,a),g.markerDrawBind(e,g.markerEnd,(function(){g.markerDrawTmp(t,h,f,a)}))}},g.markerDrawTmp=function(e,t,n,o){var i=r.mouse(e),a=i[0],s=i[1];if(g.tempPath[1]=[a,s],g.isArrow){var l=f(t,n,a,s,g.attr.thickness,o);g.newSvg.attr("d","M "+t+" "+n+" L "+a+" "+s+" "+l)}else g.newSvg.attr("d",r.line().x((function(e){return e[0]})).y((function(e){return e[1]})))},g.markerEnd=function(e,t){e.on(s.Util.getMoveEventName(),null),g.tempPath=[],g.curMarkerSection=s.Util.getParentElement(t),g.newSvg&&(g.eventObserver.editedAnnotation.notify(g.marker.getPageIdxWhenInAnnotationMode()),g.funcSaveDrawing())},g.getAnnotSize=function(e,t){var n=e.getBBox(),o=n.x,i=n.y,r={left:o/t,width:n.width/t,top:i/t,height:n.height/t},a=parseFloat(e.style.strokeWidth)/t;return l.getAnnotSizeWithStroke(r.left,r.top,r.width,r.height,a)},g.createSvg=function(e,t,n){var o=t,i=l.getViewBox(o.l,o.t,o.w,o.h),a=i.left,s=i.top,c=i.width,d=i.height,u=r.select(e).append("svg").attr("id",n).attr("class","marker-svg").attr("viewBox",a+" "+s+" "+c+" "+d).attr("focusable","false").style("left",a+"px").style("width",c+"px").style("top",s+"px").style("height",d+"px").style("stroke",l.DrawingTool.hexToRgb(l.getAnnotInfoColor(o.c))).style("stroke-width",l.getAnnotInfoStrokeWidth(o.path)).style("opacity",l.getAnnotInfoAlpha(o.a));return u.append("path").attr("class","marker-svg__path").attr("d",l.getAnnotInfoPathText(o.path)),u},g.getReNewValue=function(e,t){var n=e,o=n.split("M").join("M ");n.indexOf("C")>-1&&(o=o.split("C").join(" C ")),n.indexOf("L")>-1&&(o=o.split("L").join(" L "));for(var i="",r=0,a=(o=o.split(",").join(" ")).trim().split(" ");r<a.length;r++){var s=a[r],l=parseFloat(parseFloat(s).toFixed(2));isNaN(l)||(s=(l/t).toFixed(2)),i+=s+" "}return i},g.createAnnotInfo=function(e,t,n,o,i,r){var a=(parseFloat(i.style.strokeWidth)/r).toFixed(2),s=g.createAnnotBaseInfo(e,t,o,i,r),l=g.getReNewValue(i.getAttribute("d"),r),c=s.annot;return c.type="line",g.isArrow&&(c.le={head:"none",tail:"openarrow"}),c.path={w:a,text:l},s},g.setAnnotInfoThickness=function(e,t){var n=e.annot;if(n.path||(n.path={w:"",text:""}),n.path.w=t.toString(),g.isArrow&&n.path.text){var o=m(n.path.text,t);n.path.text=o;var i=d.getInkSize(o,Number(t),1);e.annot.l=i.left,e.annot.t=i.top,e.annot.w=i.width,e.annot.h=i.height}},g.setAnnotInfoPath=function(e,t){var n=e.annot;n.path||(n.path={w:"",text:""}),n.path.text=t},g.redrawAttr=function(e,t){var n=t.annot;g.redrawMoveAttr(e,t),r.select(e).select("path").attr("d",n.path.text);var o={};o.color=l.getAnnotInfoColor(n.c),o.thickness=l.getAnnotInfoStrokeWidth(n.path),o.transparency=l.getAnnotInfoAlpha(n.a),g.setSvgStyle(e,o)},g.redrawAttrEl=function(e,t,n){if(g.isArrow&&"thickness"===t){var o=m(r.select(e).select("path").attr("d"),Number(n)),i=d.getInkSize(o,Number(n),1),a=l.getViewBox(i.left,i.top,i.width,i.height),s=a.left,c=a.top,u=a.width,h=a.height;r.select(e).attr("viewBox",s+" "+c+" "+u+" "+h).style("left",parseFloat(i.left)-l.DrawingTool.VIEWBOX_RANGE+"px").style("top",parseFloat(i.top)-l.DrawingTool.VIEWBOX_RANGE+"px").style("width",u+"px").style("height",h+"px").select("path").attr("d",o)}var f={};f[""+t]=n,g.setSvgStyle(e,f)},g.getMarkerStyleAttr=function(e,t){var n=e.annot,o=l.getAnnotInfoColor(n.c),i=l.getAnnotInfoStrokeWidth(n.path),r=l.getAnnotInfoAlpha(n.a);return{color:o,thickness:parseFloat(i)*t,transparency:parseFloat(r)}},g.moveMarker=function(e,t,n){var o=e.path.text;if(!o)return null;for(var i="",r=!0,a=0,s=o.trim().split(" ");a<s.length;a++){var l=s[a],c=parseFloat(l);if(!isNaN(c)){var d=r?t:n;r=!r,l=(c-d).toFixed(2)}l.length&&(i+=l+" ")}return i},g.isArrow=p,g}return i(t,e),t}(l.DrawingTool);t.DrawingLine=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MathUtil=void 0;var o=function(){function e(){}return e.getDegree=function(e,t,n,o){var i=n-e,r=o-t;return Math.atan2(r,i)*(180/Math.PI)},e.degreeToRadian=function(e){return e*(Math.PI/180)},e}();t.MathUtil=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(41);Object.defineProperty(t,"DialogFactory",{enumerable:!0,get:function(){return o.default}})},function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.DrawingCircle=void 0;var r=n(39),a=n(0),s=n(29),l=n(31),c=n(60),d=function(e){function t(t,n,o,i,d){var u=e.call(this,t,n,o,i,d)||this;return u.markerStart=function(e,t){var n=event;if(!(n.touches&&n.touches.length>1)){var o=a.Util.getParentElement(e.node()).id,i=a.Util.getIdxFromElmId(o,"marker-section"),d=r.mouse(t),h=c.default.getTypeToHexColor(u.attr.innerColor);u.newSvg=e.append("ellipse").style("stroke",l.DrawingTool.hexToRgb(c.default.getTypeToHexColor(u.attr.color))).style("stroke-width",u.attr.thickness*s.default.instance.getPageOrCurrentSheetRatio(i,u.isCell)).style("opacity",u.attr.transparency).style("fill","none"===h?"none":l.DrawingTool.hexToRgb(h)).attr("cx",d[0]).attr("cy",d[1]).attr("rx",0).attr("ry",0).attr("class","tmp-marker-path").attr("id","tmp-marker-path"),u.markerDrawBind(e,u.markerEnd,(function(){u.markerDrawTmp(t,d[0],d[1])}))}},u.markerDrawTmp=function(e,t,n){var o=r.mouse(e),i=Math.max(0,Math.abs(o[0]-t)),a=Math.max(0,Math.abs(o[1]-n));o[0]-t>=0&&o[1]-n>=0?u.newSvg.attr("cx",t+i/2).attr("cy",n+a/2).attr("rx",i/2).attr("ry",a/2):o[0]-t>=0&&o[1]-n<0?u.newSvg.attr("cx",t+i/2).attr("cy",n-a/2).attr("rx",i/2).attr("ry",a/2):o[0]-t<0&&o[1]-n>=0?u.newSvg.attr("cx",t-i/2).attr("cy",n+a/2).attr("rx",i/2).attr("ry",a/2):o[0]-t<0&&o[1]-n<0&&u.newSvg.attr("cx",t-i/2).attr("cy",n-a/2).attr("rx",i/2).attr("ry",a/2)},u.createSvg=function(e,t,n){var o=t,i=l.getViewBox(o.l,o.t,o.w,o.h),a=i.left,s=i.top,c=i.width,d=i.height,h=r.select(e).append("svg").attr("id",n).attr("class","marker-svg").attr("viewBox",a+" "+s+" "+c+" "+d).style("left",a+"px").style("width",c+"px").style("top",s+"px").style("height",d+"px").attr("focusable","false"),f=l.getAnnotInfoStrokeWidth(o.border),m=u.getCircleAttribute(o.l,o.t,o.w,o.h,f),p=m.cx,g=m.cy,v=m.rx,b=m.ry;return h.append("ellipse").attr("class","marker-svg__path").attr("cx",p).attr("cy",g).attr("rx",v).attr("ry",b).style("stroke",l.DrawingTool.hexToRgb(l.getAnnotInfoColor(o.c))).style("stroke-width",f).style("opacity",l.getAnnotInfoAlpha(o.a)).style("fill",l.DrawingTool.hexToRgb(l.getAnnotInfoInnerColor(o.ic))),h},u.createAnnotInfo=function(e,t,n,o,i,r){var a=(parseFloat(i.style.strokeWidth)/r).toFixed(2),s=u.createAnnotBaseInfo(e,t,o,i,r),l=s.annot;return l.type="circle",l.border={w:a},l.ic=n,s},u.redrawAttr=function(e,t){var n=t.annot;u.redrawMoveAttr(e,t);var o=u.getFillshapeAttr(t),i=u.getCircleAttribute(n.l,n.t,n.w,n.h,l.getAnnotInfoStrokeWidth(n.border)),a=i.cx,s=i.cy,c=i.rx,d=i.ry;r.select(e).select("ellipse").attr("cx",a).attr("cy",s).attr("rx",c).attr("ry",d),u.setSvgStyle(r.select(e).select("ellipse").node(),o)},u.redrawAttrEl=function(e,t,n){var o={};o[""+t]=n;var i=r.select(e).select("ellipse");if("thickness"===t){var a=(Number(n)-parseFloat(i.style("stroke-width")))/2;i.attr("rx",""+(Number(i.attr("rx"))-a)).attr("ry",""+(Number(i.attr("ry"))-a))}u.setSvgStyle(i.node(),o)},u.getPosition=function(e){var t=e.getBBox();return{left:0===t.width&&0===t.x?parseInt(e.getAttribute("cx")):t.x,top:0===t.height&&0===t.y?parseInt(e.getAttribute("cy")):t.y}},u.getAnnotSizeWithStroke=function(e,t){return l.getAnnotSizeWithStroke(e.left,e.top,e.width,e.height,t)},u.getCircleAttribute=function(e,t,n,o,i){var r=Number(i),a=(Number(n)-r)/2,s=(Number(o)-r)/2;return{cx:Number(e)+r/2+a,cy:Number(t)+r/2+s,rx:a,ry:s}},u}return i(t,e),t}(n(151).DrawingFillShape);t.DrawingCircle=d},,,,,,,,function(e,t,n){!function(n){"use strict";function o(e,t){var n=[];if(!o.isDefined(e)&&!o.isDefined(e))return n;if(o.isNumber(t)&&(t=""+t),o.isNumber(e)&&(e=""+e),!o.isString(e)&&!o.isArray(e))return n;if(!o.isString(t)&&!o.isArray(t))return n;for(var i=0,r=0,a=o.table(t);i+r<e.length;)t[r]===e[i+r]?(r===t.length-1&&n.push(i),r+=1):a[r]>-1?(i=i+r-a[r],r=a[r]):(r=0,i+=1);return n}o.table=function(e){var t=[],n=2,o=0;for(t[0]=-1,t[1]=0;n<e.length;)e[n-1]===e[o]?(o+=1,t[n]=o,n+=1):o>0?o=t[o]:(t[n]=0,n+=1);return t},o.isArray=function(e){return Array.isArray(e)},o.isString=function(e){return"string"==typeof e||e instanceof String},o.isDefined=function(e){return!(void 0===e||null===typeof e)},o.isNumber=function(e){return!isNaN(e)},e.exports&&(t=e.exports=o),t.kmp=o}()},function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.DPISheet=void 0;var r=n(57),a=n(38),s=function(e){function t(t){var n=e.call(this,t)||this;return n.load=function(e){e.sheet.subscribe(n.initDPI)},n.getParam=function(e){var t={};return t.x=Math.round(e.colIdx*a.ImageSheet.defaultCellWidth*n.ratio+1),t.y=Math.round(e.rowIdx*a.ImageSheet.defaultCellHeight*n.ratio+1),t.w=Math.round(e.width*n.ratio),t.h=Math.round(e.height*n.ratio),t},n}return i(t,e),t}(r.DPI);t.DPISheet=s},function(e){e.exports=JSON.parse('{"name":"SynapDocumentViewer","version":"22.11.0","main":"index.js","scripts":{"build":"npm run clean && webpack --mode development --viewer_version v2022 && rimraf css/config.css","build:prod":"npm run clean && webpack --mode production --viewer_version v2022 && rimraf css/config.css","hbuild":"npm run clean && webpack --mode development --viewer_version v2022","hbuild:prod":"npm run clean && webpack --mode production --viewer_version v2022","docslive":"npm run clean && webpack --mode development --viewer_version v2022","docslive:prod":"npm run clean && webpack --mode production --viewer_version v2022","build2019":"npm run clean && webpack --mode development --viewer_version v2019 && rimraf css/config.css","build2019:prod":"npm run clean && webpack --mode production --viewer_version v2019 && rimraf css/config.css","hbuild2019":"npm run clean && webpack --mode development --viewer_version v2019","hbuild2019:prod":"npm run clean && webpack --mode production --viewer_version v2019","docslive2019":"npm run clean && webpack --mode development --viewer_version v2019","docslive2019:prod":"npm run clean && webpack --mode production --viewer_version v2019","dev":"webpack-dev-server --open google-chrome","watch":"webpack --watch --mode development","test":"karma start ./karma.conf.js","clean":"rimraf js/lib.* && rimraf js/newviewer.* && rimraf css/style.* && rimraf css/mobile.* && rimraf css/htmlmobile.* && rimraf images"},"author":"","license":"UNLICENSED","devDependencies":{"@types/d3":"^5.7.2","@types/jquery":"^3.3.5","@types/mocha":"^5.2.5","cache-loader":"^1.2.5","classlist-polyfill":"^1.2.0","css-loader":"^3.0.0","extract-loader":"^3.1.0","extract-text-webpack-plugin":"^4.0.0-beta.0","file-loader":"^3.0.1","fork-ts-checker-webpack-plugin":"^1.3.7","happypack":"^5.0.1","html-webpack-plugin":"^4.0.0-beta.5","karma":"^4.1.0","karma-chrome-launcher":"^2.2.0","karma-firefox-launcher":"^1.1.0","karma-ie-launcher":"^1.0.0","karma-mocha":"^1.3.0","karma-typescript":"^4.1.0","karma-webpack":"^4.0.2","mocha":"^5.2.0","node-sass":"^4.12.0","optimize-css-assets-webpack-plugin":"^5.0.3","resolve-url-loader":"^3.1.0","sass-loader":"^7.1.0","style-loader":"^0.23.1","svg-intersections":"^0.4.0","thread-loader":"^1.2.0","ts-loader":"^3.5.0","typescript":"^3.7.5","webpack":"^4.35.0","webpack-cli":"^3.3.5","webpack-dev-server":"^3.7.2","webpack-spritesmith":"^1.0.1"},"dependencies":{"core-js":"^3.3.2","d3":"^5.12.0","jquery":"^3.3.1"}}')},function(e,t,n){"use strict";(function(e){var o=this&&this.__awaiter||function(t,n,o,i){return new(o||(o=e))((function(e,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}l((i=i.apply(t,n||[])).next())}))},i=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.NotSupportFullscreen=void 0;var r=n(3),a=n(0),s=function(){var e=this;this.eventObserver=null,this.eventBind=function(t){e.eventObserver=t},this.fullscreenON=function(t,n){void 0===n&&(n=!1),r("#wrap").addClass("fullscreen-hidden"),setTimeout((function(){e.eventObserver.fullScreen.notify({skinType:t,isFullScreen:!0,isSupport:n}),r("#wrap").removeClass("fullscreen-hidden")}),100)},this.fullscreenOFF=function(t,n){return void 0===n&&(n=!1),o(e,void 0,void 0,(function(){var e=this;return i(this,(function(o){switch(o.label){case 0:return[4,a.Util.syncTimer((function(){e.eventObserver.fullScreen.notify({skinType:t,isFullScreen:!1,isSupport:n})}),100)];case 1:return o.sent(),[2]}}))}))}};t.NotSupportFullscreen=s}).call(this,n(5))},function(e,t,n){"use strict";(function(e){var o=this&&this.__awaiter||function(t,n,o,i){return new(o||(o=e))((function(e,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}l((i=i.apply(t,n||[])).next())}))},i=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SupportFullscreen=void 0;var r=n(1),a=n(0),s=n(3),l=function(){var e=this;this.eventObserver=null,this.isNotSupport=!1,this.eventBind=function(t){e.eventObserver=t},this.fullscreenON=function(t,n){void 0===n&&(n=!0);var o=function(){var o=s("#container")[0],i=o.requestFullscreen||o.mozRequestFullScreen||o.webkitRequestFullScreen||o.msRequestFullscreen;if(i){var a=function(){i.call(o),setTimeout((function(){e.eventObserver.fullScreen.notify({skinType:t,isFullScreen:!0,isSupport:n}),s("#wrap").removeClass("fullscreen-hidden")}),100)};if(r.Browser.instance.isIE||r.Browser.instance.isSafari)a();else try{i.call(o).then((function(){setTimeout((function(){e.eventObserver.fullScreen.notify({skinType:t,isFullScreen:!0,isSupport:n}),s("#wrap").removeClass("fullscreen-hidden")}),100)})).catch((function(){e.eventObserver.fullScreen.notify({skinType:t,isFullScreen:!0,isSupport:!1,error:!0}),s("#wrap").removeClass("fullscreen-hidden"),e.isNotSupport=!0}))}catch(e){a()}}};s("#wrap").addClass("fullscreen-hidden"),r.Browser.instance.isChrome?setTimeout((function(){o()}),5):o()},this.fullscreenOFF=function(t,n){return void 0===n&&(n=!0),o(e,void 0,void 0,(function(){var e,o,s,l=this;return i(this,(function(i){switch(i.label){case 0:return this.isNotSupport?(this.eventObserver.fullScreen.notify({skinType:t,isFullScreen:!1,isSupport:!1}),this.isNotSupport=!1,[2]):(e=top.document,o=e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen,s=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement,o&&s&&(o.call(e),r.Browser.instance.isSafari&&o.call(e)),[4,a.Util.syncTimer((function(){l.eventObserver.fullScreen.notify({skinType:t,isFullScreen:!1,isSupport:n})}),100)]);case 1:return i.sent(),[2]}}))}))}};t.SupportFullscreen=l}).call(this,n(5))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(17),r=n(3),a=n(8),s=n(59),l=n(19),c=function(){var e=this;this.docInfo=null,this.eventObserver=null,this.activeAnnotation={elem:null,info:null},this.funcgetAnnotationInfos=null,this.popupWidth=function(){return o.Util.isMobileMode()?122:107},this.popupHeight=function(){return o.Util.isMobileMode()?42:37},this.saveForStyleMenu={isTop:void 0,ratio:void 0},this.popupDistance=5,this.popupElem=document.getElementById("annotation-popup"),this.annotationPopupBtnClassSelector="annotation-popup__item",this.annotationColorPickerClassSelector="annotation-color-picker__item",this.memoDeleteDialogClassSelector="dialog",this.memoDeleteDialogModalClassSelector="modal",this.markeClassSelector="marker-svg",this.annotListClassSelector="annot-page-li-active",this.memoIconClassSelector="memo-icon",this.annotListBtnClassSelector="annot-list-btn",this.getPopupPosition=function(t,n,r){var l=a.default.parseMarkerId(t.id).pageOrSheetIdx,c=i.default.getAnnotRatio(l,o.Util.isCellSkin(e.docInfo)),d={left:parseFloat(t.style.left)*c,top:parseFloat(t.style.top)*c,width:parseFloat(t.style.width)*c,height:parseFloat(t.style.height)*c,obj:t},u=s.popUpPos(d,n,r,e.docInfo,l);return e.saveForStyleMenu={isTop:u.isTopPos,ratio:c},{left:u.left,top:u.top}},this.clickPropBtn=function(){e.hideAnnotationPopup(),e.eventObserver.showProp.notify({activeMarkerId:e.activeAnnotation.elem.id,ratio:e.saveForStyleMenu.ratio,isTop:e.saveForStyleMenu.isTop})},this.clickMemoBtn=function(){e.hideAnnotationPopup();var t=a.default.parseMarkerId(e.activeAnnotation.elem.id),n=t.pageOrSheetIdx,o=t.annotId;e.eventObserver.newMemo.notify({pageOrSheetIdx:n,annotId:o})},this.handleDeleteMarker=function(t){var n=0;if(t&&"string"==typeof t){var o=a.default.parseMarkerId(t);n=o.pageOrSheetIdx,e.activeAnnotation.info=i.default.getAnnotData(e.funcgetAnnotationInfos(),n,o.annotId)}else{if(!e.activeAnnotation.elem||!e.activeAnnotation.info)return;n=a.default.parseMarkerId(e.activeAnnotation.elem.id).pageOrSheetIdx}e.eventObserver.unSelectAnnotation.notify();var r={status:a.ANNOT_STATUS_TYPE.DELETE,page:n,annot:e.activeAnnotation.info,afterFunc:null,isUndoRedo:!1};e.eventObserver.saveAnnotationServer.notify(r),e.activeAnnotation.elem=null,e.activeAnnotation.info=null},this.showAnnotationPopup=function(t){var n=l.ScaleEvent.isSupportScale()?l.ScaleEvent.getBrowserScale():1,i=e.getPopupPosition(t,e.popupWidth()*n,e.popupHeight()*n),r=e.popupElem;r.style.cssText="left: "+i.left+"px; top: "+i.top+"px",l.ScaleEvent.scale(r,"left top"),o.Util.removeClass(r,"annotation-popup--hide")},this.annotationSelect=function(t){var n=t.page,o=t.annotId,r=t.showPopup;if(e.hideAnnotationPopup(),r){var s=i.default.getAnnotData(e.funcgetAnnotationInfos(),n,o),l=document.getElementById(a.default.createtMarkerId(n,o));"memo"!==i.getAnnotType(s.annot)&&l&&(e.activeAnnotation.elem=l,e.activeAnnotation.info=s,e.showAnnotationPopup(e.activeAnnotation.elem))}},this.handleSelect=function(t){var n=t.target;e.activeAnnotation.elem&&o.Util.hasClassForEventTargetEl(n,e.annotListBtnClassSelector,2)?(e.hideAnnotationPopup(),e.showAnnotationPopup(e.activeAnnotation.elem)):o.Util.hasClassForEventTargetEl(n,e.annotListClassSelector,6)||o.Util.hasClassForEventTargetEl(n,e.annotationPopupBtnClassSelector)||o.Util.hasClassForEventTargetEl(n,e.annotationColorPickerClassSelector)||o.Util.hasClassForEventTargetEl(n,e.memoDeleteDialogClassSelector)||o.Util.hasClassForEventTargetEl(n,e.memoDeleteDialogModalClassSelector)||o.Util.hasClassForEventTargetEl(n,e.markeClassSelector)||o.Util.hasClassForEventTargetEl(n,e.memoIconClassSelector)||(e.hideAnnotationPopup(),e.activeAnnotation.elem=null,e.activeAnnotation.info=null)},this.hideAnnotationPopup=function(){var t=e.popupElem;o.Util.addClass(t,"annotation-popup--hide")},this.rePosition=function(){i.default.isFullScreen||!o.Util.hasClass(e.popupElem,"annotation-popup--hide")&&e.activeAnnotation.elem&&e.showAnnotationPopup(e.activeAnnotation.elem)},this.eventBind=function(t){e.eventObserver=t,e.eventObserver.selectAnnotation.subscribe(e.annotationSelect),e.eventObserver.unSelectAnnotation.subscribe(e.hideAnnotationPopup),e.eventObserver.dragAnnotStart.subscribe(e.hideAnnotationPopup),e.eventObserver.dragAnnotEnd.subscribe(e.annotationSelect),e.eventObserver.deleteMarker.subscribe(e.handleDeleteMarker),e.eventObserver.resizePage.subscribe(e.rePosition),o.Util.bindClickOrTouchEvent(r("#annotation-popup__prop"),"annotation-popup__item--hover",e.clickPropBtn),o.Util.bindClickOrTouchEvent(r("#annotation-popup__memo"),"annotation-popup__item--hover",e.clickMemoBtn),o.Util.bindClickOrTouchEvent(r("#annotation-popup__delete"),"annotation-popup__item--hover",e.handleDeleteMarker),document.addEventListener("click",e.handleSelect,!1)},this.load=function(t,n,o){e.docInfo=t,e.eventBind(n),e.funcgetAnnotationInfos=o}};t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(17),r=n(8),a=n(61),s=n(75),l=n(3),c=function(){var e,t=this;this.docInfo=null,this.eventObserver=null,this.isCell=!1,this.curMemoStatus=(e=null,{set:function(t){e=t,o.Util.addClass(e,"memo-icon--on")},clear:function(){e&&o.Util.removeClass(e,"memo-icon--on"),e=null}}),this.funcgetAnnotationInfos=null,this.getMemoInfo=function(e){var n=r.default.parseMarkerId(e);return i.default.getAnnotData(t.funcgetAnnotationInfos(),n.pageOrSheetIdx,n.annotId).annot},this.getPageNumFromMemoId=function(e){var t=e.split("-");return parseInt(t[1])},this.selectAnnotation=function(e){if(t.unSelectAnnot(),void 0!==e){var n=document.getElementById(a.MemoIcon.getMemoId(e.page,e.annotId));t.curMemoStatus.set(n),n&&e.showMemo&&(t.memoContent.show(t.getMemoInfo(n.id),n,e.page,t.isCell,e.memoFocus),t.hideAnnotList(!0))}},this.hideAnnotList=function(e){r.default.isAnnotMode&&o.Util.isMobileMode()&&t.eventObserver.hideAnnotListInMobile.notify(e)},this.updatedMemoInfo=function(e,n,o){var i=t.getMemoInfo(e.id),r=e.id,a={left:(parseFloat(i.l)-n).toFixed(2),top:(parseFloat(i.t)-o).toFixed(2)};t.eventObserver.modifyMarkerAttr.notify({elemId:r,attr:a})},this.createMemoIcon=function(e,n,o){var i=new a.MemoIcon(t.eventObserver,e,t.memoContent,n,o,t.isCell).get();return document.getElementById("annotationlayer"+n).getElementsByClassName("marker-scale")[0].appendChild(i),i},this.renderMemo=function(e,n){var o=n.annot,i=a.MemoIcon.getMemoId(e,n.id);document.getElementById(i)||t.createMemoIcon(o,e,n.id)},this.rePosition=function(){if(!i.default.isFullScreen&&s.MemoContent.isShow()){var e=t.memoContent.getContentElem().getAttribute("data-memo-id"),n=document.getElementById(e),o=t.getPageNumFromMemoId(e);t.memoContent.setPosition(n,o,t.isCell)}},this.handleDeleteMemo=function(){var e=t.memoContent.getContentElem().getAttribute("data-memo-id"),n=r.default.parseMarkerId(e),a=i.default.getAnnotData(t.funcgetAnnotationInfos(),n.pageOrSheetIdx,n.annotId);if(a){var s=function(){var n=document.getElementById(e);o.Util.getParentElement(n).removeChild(n),t.memoContent.hide(!1),t.hideAnnotList(!1)},c=a.annot.contents?l.extend(!0,{},a.annot.contents):{t:"",d:"",text:""};if("memo"===i.getAnnotType(a.annot)||""!==c.text){if(t.eventObserver.editedAnnotation.notify(n.pageOrSheetIdx),"memo"!==i.getAnnotType(a.annot))t.eventObserver.modifyMarkerAttr.notify({elemId:e,attr:{text:""}});else{var d={status:r.ANNOT_STATUS_TYPE.DELETE,page:n.pageOrSheetIdx,annot:a,afterFunc:null,isUndoRedo:!1};t.eventObserver.saveAnnotationServer.notify(d)}s()}else s()}},this.saveMemo=function(){var e=document.getElementById("annotation-memo__author-input"),n=t.memoContent.getContentElem().getAttribute("data-memo-id");if(n){var a={author:e.value,text:t.memoContent.getContentElem().value},s=r.default.parseMarkerId(n),c=s.pageOrSheetIdx,d=s.annotId,u=i.default.getAnnotData(t.funcgetAnnotationInfos(),c,d);if(u){if("memo"!==i.getAnnotType(u.annot)&&0===t.memoContent.getContentElem().value.length){var h=document.getElementById(n);h&&o.Util.getParentElement(h).removeChild(h)}var f=u.annot.contents?l.extend(!0,{},u.annot.contents):{t:"",d:"",text:""};f.t===a.author&&f.text===a.text||(t.eventObserver.editedAnnotation.notify(c),t.eventObserver.modifyMarkerAttr.notify({elemId:n,attr:a}))}}},this.unSelectAnnot=function(){t.curMemoStatus.clear(),t.memoContent.hide(!0),t.hideAnnotList(!1)},this.hideMemoIcon=function(e){var t=e.elemId,n=r.default.parseMarkerId(t),o=n.pageOrSheetIdx,i=n.annotId,s=document.getElementById(a.MemoIcon.getMemoId(o,i));s&&(s.style.display="none")},this.showMemoIcon=function(e){var n=e.page,o=e.annotId,i=document.getElementById(a.MemoIcon.getMemoId(n,o));if(i){var r=a.MemoIcon.getPosition(t.getMemoInfo(a.MemoIcon.getMemoId(n,o)),n,t.isCell),s=r.top,l=r.left;i.style.left=l+"px",i.style.top=s+"px",i.style.display=""}},this.addMemo=function(e){var n=e.pageOrSheetIdx,o=e.annotId;t.unSelectAnnot();var i=a.MemoIcon.getMemoId(n,o),r=document.getElementById(i),s=!1;if(!r){var l=t.getMemoInfo(i);r=t.createMemoIcon(l,n,o),s=!0}t.eventObserver.selectAnnotation.notify({page:n,annotId:o,showMemo:!0,showPopup:!1,memoFocus:s})},this.eventBind=function(e){t.eventObserver=e,t.eventObserver.resizeContents.subscribe(t.rePosition),t.eventObserver.newMemo.subscribe(t.addMemo),t.eventObserver.unSelectAnnotation.subscribe(t.unSelectAnnot),t.eventObserver.selectAnnotation.subscribe(t.selectAnnotation),t.eventObserver.dragAnnotStart.subscribe(t.hideMemoIcon),t.eventObserver.dragAnnotEnd.subscribe(t.showMemoIcon),t.eventObserver.deleteMarker.subscribe((function(){t.memoContent.hide(!1),t.hideAnnotList(!1)})),document.getElementById("annotation-memo__delete-btn").addEventListener("click",t.handleDeleteMemo)},this.load=function(e,n,i){t.docInfo=e,t.isCell=o.Util.isCellSkin(t.docInfo),t.funcgetAnnotationInfos=i,t.eventBind(n)},this.memoContent=new s.MemoContent(this.saveMemo),a.MemoIcon.setMemoCommonFunc(this.getMemoInfo,this.updatedMemoInfo)};t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageFit=void 0;var o=n(3),i=n(0),r=n(25),a=n(35),s=n(1),l=function(){var e=this;this.rotateSize=[0,0],this.noneRotateSize=[0,0],this.scrollContentAreaEl=s.Browser.instance.isIOS?o(document):o("#contents"),this.PADDING=4,this.resizePage=function(t,n,l,c){var d,u,h;void 0===l&&(l=0),void 0===c&&(c=0);var f=i.Util.fixedPageFit()||s.Browser.instance.isMobile||100===a.DetectZoom.getRatio()?1:a.DetectZoom.getRatio()/100,m=o("#page-area0").height(),p=e.scrollContentAreaEl.scrollTop(),g=o(".contents-page").length,v=0===c||c>g?g:l+c,b=o("#contents").width(),E=0;E=s.Browser.instance.isIOS&&i.Util.isFullScreen()?window.innerHeight:document.getElementById("contents").offsetHeight,i.Util.isFullScreen()&&(r.Page.isOutFullscreen=!0),e.rotateSize=[E,b],e.noneRotateSize=[b,E];for(var y=l;y<v;++y){var I=n.get(y),w=void 0,_=void 0;if(void 0===I)w=(d=e.getResizeResult(!1,r.Page.ORIGIN_SIZE[y].width,r.Page.ORIGIN_SIZE[y].height))[0],_=d[1];else if(I%180!=0){w=(u=e.getResizeResult(!0,r.Page.ORIGIN_SIZE[y].width,r.Page.ORIGIN_SIZE[y].height))[0];var S=(E-(_=u[1]))*f/2;o("#page"+y).css({"margin-top":S,"margin-bottom":S})}else w=(h=e.getResizeResult(!1,r.Page.ORIGIN_SIZE[y].width,r.Page.ORIGIN_SIZE[y].height))[0],_=h[1];if(i.Util.isFullScreen())if(1===f){var T=(E-_*f)/2;void 0===I||I%180==0?o("#page"+y).css({"margin-top":T,"margin-bottom":T}):o("#page"+y).css("margin",T+"px auto")}else void 0!==I&&I%180!=0||o("#page"+y).css({"margin-top":"","margin-bottom":""});else r.Page.isOutFullscreen&&(void 0!==I&&I%180!=0||o("#page"+y).css({"margin-top":"","margin-bottom":""}));o("#page"+y).css({width:w*f,height:_*f}),r.Page.CURRENT_SIZE[y]={width:w*f,height:_*f}}r.Page.isOutFullscreen=i.Util.isFullScreen(),e.setPageMargin(f),!s.Browser.instance.isIOS&&e.scrollContentAreaEl.scrollTop(p*(o("#page-area0").height()/m)),i.Util.isFullScreen()&&(document.getElementById("contents-area").style.paddingBottom="")},this.getResizeResult=function(t,n,o,i){var r;void 0===i&&(i=null);var a=t?e.rotateSize:null===i?e.noneRotateSize:i,s=a[0],l=a[1],c=(s-e.PADDING)/n,d=(l-e.PADDING)/o;return[n*(r=l<s&&n*d<s||l>s&&o*c>l?d:c),o*r]},this.setPageMargin=function(e){var t=o("#page-area0").height()/r.Page.ORIGIN_SIZE[0].height*e;o(".contents-page").css("margin-top",r.Page.ORIGIN_MARGIN.marginTop*t),o(".contents-page").css("margin-bottom",r.Page.ORIGIN_MARGIN.marginBottom*t)}};t.PageFit=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageWidthFit=void 0;var o=n(3),i=n(0),r=n(25),a=n(35),s=n(1),l=function(){var e=this;this.contentAreaWidth=0,this.scrollContentAreaEl=s.Browser.instance.isIOS?o(document):o("#contents"),this.PADDING=4,this.resizePage=function(t,n,l,c){void 0===l&&(l=0),void 0===c&&(c=0);var d=i.Util.fixedPageFit()||s.Browser.instance.isMobile||100===a.DetectZoom.getRatio()?1:a.DetectZoom.getRatio()/100,u=o("#page-area0").height(),h=e.scrollContentAreaEl.scrollTop(),f=o(".contents-page").length,m=0===c||c>f?f:l+c;e.contentAreaWidth=o("#contents").width(),i.Util.isFullScreen()&&s.Browser.instance.isIOS&&!s.Browser.instance.isiPad&&s.Browser.instance.getIOSVersion()>=11&&(document.getElementById("fullscreen-close").style.position="",document.getElementById("fullscreen-close").style.top="");for(var p=l;p<m;++p){var g=n.get(p),v=e.getResizeResult(!1,r.Page.ORIGIN_SIZE[p].width,r.Page.ORIGIN_SIZE[p].height),b=v[0],E=v[1];if(g&&g%180!=0){var y=(b-E)*d/2;if(e.contentAreaWidth<E){var I=(E-e.contentAreaWidth)*d/2;o("#page"+p).css("margin",y+"px "+I+"px")}else o("#page"+p).css("margin",y+"px auto")}r.Page.isOutFullscreen&&(void 0!==g&&g%180!=0||o("#page"+p).css({"margin-top":"","margin-bottom":""})),o("#page"+p).css({width:b*d,height:E*d}),r.Page.CURRENT_SIZE[p]={width:b*d,height:E*d}}r.Page.isOutFullscreen=i.Util.isFullScreen(),e.setPageMargin(d),!s.Browser.instance.isIOS&&e.scrollContentAreaEl.scrollTop(h*(o("#page-area0").height()/u))},this.getResizeResult=function(t,n,o){var i=(e.contentAreaWidth-e.PADDING)/n;return[n*i,o*i]},this.setPageMargin=function(e){i.Util.isFullScreen()&&o(".contents-page__img").css({"margin-top":"","margin-bottom":""});var t=o("#page-area0").height()/r.Page.ORIGIN_SIZE[0].height*e;o(".contents-page").css("margin-top",r.Page.ORIGIN_MARGIN.marginTop*t),o(".contents-page").css("margin-bottom",r.Page.ORIGIN_MARGIN.marginBottom*t)}};t.PageWidthFit=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageZoom=void 0;var o=n(3),i=n(25),r=n(35),a=n(1),s=function(){var e=this;this.scrollContentAreaEl=a.Browser.instance.isIOS?o(document):o("#contents"),this.resizePage=function(t,n,s,l){void 0===s&&(s=0),void 0===l&&(l=0);for(var c=a.Browser.instance.isMobile||100===r.DetectZoom.getRatio()?1:r.DetectZoom.getRatio()/100,d=o("#page-area0").height(),u=e.scrollContentAreaEl.scrollTop(),h=e.scrollContentAreaEl.scrollLeft(),f=o(".contents-page").length,m=0===l||l>f?f:s+l,p=s;p<m;++p){var g=n.get(p),v=t/100,b=[i.Page.ORIGIN_SIZE[p].width*v,i.Page.ORIGIN_SIZE[p].height*v],E=b[0],y=b[1];if(g&&g%180!=0){var I=(E-y)*c/2;if(o("#contents").width()<y){var w=(y-E)*c/2;o("#page"+p).css("margin",I+"px "+w+"px")}else o("#page"+p).css("margin",I+"px auto")}o("#page"+p).css({width:E*c,height:y*c}),i.Page.CURRENT_SIZE[p]={width:E*c,height:y*c}}e.setPageMargin(c);var _=o("#page-area0").height()/d;e.scrollContentAreaEl.scrollTop(u*_),e.scrollContentAreaEl.scrollLeft(h*_)},this.getResizeResult=function(e,t,n){var o=i.Page.RESIZE_OBJ.percent/100;return(e?[n,t]:[t,n]).map((function(e){return e*o}))},this.setPageMargin=function(e){var t=o("#page-area0").height()/i.Page.ORIGIN_SIZE[0].height*e;o(".contents-page").css("margin-top",i.Page.ORIGIN_MARGIN.marginTop*t),o(".contents-page").css("margin-bottom",i.Page.ORIGIN_MARGIN.marginBottom*t)}};t.PageZoom=s},function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.DPIPage=void 0;var r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getParam=function(e){var n={};return n.w=Math.round(e.width*t.ratio),n.h=Math.round(e.height*t.ratio),n},t}return i(t,e),t}(n(57).DPI);t.DPIPage=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(18),i=n(107),r=n(108),a=n(0),s=n(1),l=function(){var e=this;this.createDialogEl=function(e){void 0===e&&(e=!0);var t=document.createElement("div");return t.id=r.default.dialogElSelector,t.title=o.LocaleMessage.getMessage("dialog"),t.className=e?r.default.dialogElSelector+" "+r.default.dialogElSelector+"--min-width":r.default.dialogElSelector,t},this.createMsgBox=function(e){var t=document.createElement("div");return t.className=r.default.dialogElSelector+"__msg",t.innerHTML=e,t},this.createLocaleMsgBox=function(t){return e.createMsgBox(o.LocaleMessage.getMessage(t))},this.createCheckBox=function(e){var t=document.createElement("div"),n=document.createElement("label"),i=document.createElement("span"),l=document.createElement("input");return l.type="checkbox",l.id=e.id,l.checked=e.checked,l.value=e.value,i.innerHTML=o.LocaleMessage.getMessage(e.message),n.appendChild(l),n.appendChild(i),t.appendChild(n),s.Browser.instance.isMobile&&n.addEventListener(a.Util.getClickOrTouchEventName(),(function(e){this.click(),e.preventDefault(),e.stopPropagation()})),t.className=r.default.dialogElSelector+"__checkbox",t},this.createBtnEl=function(e,t,n){void 0===n&&(n=null);var i=document.createElement("div");return i.className="btn btn--"+t,i.innerHTML=o.LocaleMessage.getMessage(e),i.title=o.LocaleMessage.getMessage(e),i.addEventListener(a.Util.getClickOrTouchEventName(),(function(){n&&n()})),i},this.createSingleBtnBoxEl=function(t,n,o){void 0===o&&(o=null);var i=e.createBtnEl(t,n,o),a=document.createElement("div");return a.className=r.default.dialogElSelector+"__btn "+r.default.dialogElSelector+"__btn--single",a.appendChild(i),{btnEl:i,boxEl:a}},this.create2AnswerBtnBoxEl=function(t,n,o,s){void 0===o&&(o=null),void 0===s&&(s=null);var l=e.createBtnEl(n,i.BUTTON_COLOR.WHITE,s);a.Util.addClass(l,"btn--answer-left");var c=e.createBtnEl(t,i.BUTTON_COLOR.BLACK,o),d=document.createElement("div");return d.className=r.default.dialogElSelector+"__btn "+r.default.dialogElSelector+"__btn--answer",d.appendChild(l),d.appendChild(c),{boxEl:d,yesBtnEl:c,noBtnEl:l}},this.create3AnswerBtnBoxEl=function(t,n,o,s,l,c){void 0===s&&(s=null),void 0===l&&(l=null),void 0===c&&(c=null);var d=e.createBtnEl(o,i.BUTTON_COLOR.WHITE,c);a.Util.addClass(d,"btn--answer-white"),a.Util.addClass(d,"btn--3answer-width");var u=e.createBtnEl(n,i.BUTTON_COLOR.WHITE,l);a.Util.addClass(u,"btn--answer-white"),a.Util.addClass(u,"btn--3answer-width");var h=e.createBtnEl(t,i.BUTTON_COLOR.BLACK,s);a.Util.addClass(h,"btn--3answer-width");var f=document.createElement("div");return f.className=r.default.dialogElSelector+"__btn "+r.default.dialogElSelector+"__btn--answer",f.appendChild(d),f.appendChild(u),f.appendChild(h),{boxEl:f,yesBtnEl:h,noBtnEl:u,cancelBtnEl:d}},this.createKeyValueBoxEl=function(e){var t=document.createElement("div");t.className="key-box";var n=document.createElement("div");n.className="value-box";for(var o=0,i=e;o<i.length;o++){var r=i[o],a=r.key,s=r.value,l=document.createElement("div");l.className="key-box__item",l.innerText=a,t.appendChild(l);var c=document.createElement("div");c.className="value-box__item",c.innerHTML=s,n.appendChild(c)}var d=document.createElement("div");d.className="key-value";var u=document.createElement("div");u.className="key-value__key-box",u.appendChild(t),d.appendChild(u);var h=document.createElement("div");return h.className="key-value__value-box",h.appendChild(n),d.appendChild(h),d}};t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(18),i=n(1),r=n(108),a=n(107),s=n(41),l=n(0),c=n(50),d=function(){function e(e){var t=this;this.create=function(){var e=t.elFactory.createLocaleMsgBox("sns_title"),n=t.createUrlBoxEl(),o=t.createSnsBtnBoxEl(),i=t.elFactory.createSingleBtnBoxEl("msg_cancel",a.BUTTON_COLOR.WHITE,(function(){s.default.instance.remove()})).boxEl,l=t.elFactory.createDialogEl(!1);l.appendChild(e);var d=document.createElement("div");d.className=r.default.dialogElSelector+"__url",d.appendChild(n);var u=document.createElement("div");u.className=r.default.dialogElSelector+"__sns",u.appendChild(o);var h=document.createElement("div");return h.className=r.default.dialogElSelector+"__order",h.appendChild(d),h.appendChild(u),l.appendChild(h),l.appendChild(i),l.addEventListener("keydown",(function(e){"Escape"!==e.key&&e.keyCode!==c.keyMap.ESC||s.default.instance.remove()})),l},this.createUrlBoxEl=function(){var e=document.createElement("a");e.className="url__text",e.innerText=t.url,i.Browser.instance.isIOS&&i.Browser.instance.getIOSVersion()<10&&(e.href=t.url);var n=document.createElement("div");n.className="url__btn";var r=""+o.LocaleMessage.getMessage("sns_url_copy");n.innerHTML=r,n.title=r,n.tabIndex=0,n.addEventListener(l.Util.getClickOrTouchEventName(),(function(){t.clipboardCopy(e)})),l.Util.bindEnterKey(n);var a=document.createElement("div");return a.className="url",a.appendChild(e),i.Browser.instance.isIOS9Lower()||a.appendChild(n),a},this.createSnsBtnEl=function(e,t){var n=document.createElement("div");return n.id="sns__btn--"+e,n.className="sns__btn sns__btn--"+e,n.title=e,n.tabIndex=0,n.addEventListener(l.Util.getClickOrTouchEventName(),(function(){t()})),l.Util.bindEnterKey(n),n},this.createSnsBtnBoxEl=function(){var e=document.createElement("div");e.className="sns";for(var n=function(n){if("kakaotalk"==n&&!window.localSynap.config.kakaoAPIKey)return"continue";var o=t.createSnsBtnEl(n,(function(){t.sendSns(n),s.default.instance.remove()}));e.appendChild(o)},o=0,i=["facebook","twitter","kakaotalk","band"];o<i.length;o++){n(i[o])}return e},this.elFactory=e,this.url=document.location.href}return e.prototype.allowAuth=function(e){return!(!window.clipboardData||window.clipboardData.getData("Text")!==e)},e.prototype.clipboardCopy=function(e){var t=[l.Util.getPageXOffset(),l.Util.getPageYOffset()],n=t[0],r=t[1],a=document.createElement("input");if(a.type="text",a.value=e.innerText,a.readOnly=!0,document.body.appendChild(a),i.Browser.instance.isIOS){var s=a.contentEditable,c=a.readOnly;a.contentEditable="true",a.readOnly=!1;var d=document.createRange();d.selectNodeContents(a);var u=window.getSelection();u.removeAllRanges(),u.addRange(d),a.setSelectionRange(0,999999),a.contentEditable=s,a.readOnly=c}else a.focus(),a.select();if(!i.Browser.instance.isIOS9Lower())try{var h=document.execCommand("copy",null,null);i.Browser.instance.isIE&&window.clipboardData&&(window.clipboardData.clearData(),window.clipboardData.setData("Text",a.value)),!h||i.Browser.instance.isIE&&!this.allowAuth(a.value)||alert(""+o.LocaleMessage.getMessage("sns_url_copy_completed")),window.scrollTo(n,r)}catch(e){alert(e)}document.body.removeChild(a)},e.prototype.sendSns=function(t,n){void 0===n&&(n="");var r=window.localSynap.config.kakaoAPIKey;if(!0!==e.kakaoInit&&void 0!==r)try{Kakao.init(r),e.kakaoInit=!0}catch(e){console.log("Kakao.init has already been run or there is an exception.")}var a=encodeURIComponent(this.url),s=encodeURIComponent(n),l=encodeURIComponent("\r\n"),c={};switch(t){case"facebook":c.method="popup",c.url="http://www.facebook.com/sharer/sharer.php?u="+a;break;case"twitter":c.method="popup",c.url="http://twitter.com/intent/tweet?text="+s+"&url="+a;break;case"kakaostory":c.method="popup",c.url="https://story.kakao.com/share?url="+a;break;case"band":i.Browser.instance.isMobile?(c.method="web2app",c.param="bandapp://create/post?text="+s+l+a,c.a_store="itms-apps://itunes.apple.com/app/id542613198",c.g_store="market://details?id=com.nhn.android.band"):(c.method="popup",c.url="http://www.band.us/plugin/share?body="+a);break;case"kakaotalk":try{Kakao.Share.sendDefault({objectType:"text",text:""+o.LocaleMessage.getMessage("view_title"),link:{mobileWebUrl:this.url,webUrl:this.url},installTalk:!0})}catch(e){}return!0;default:return!1}switch(c.method){case"popup":window.open(c.url);break;case"web2app":if(i.Browser.instance.isAndroid)if(-1!==i.Browser.instance.getChromeVersion())location.href="intent:"+c.param+"#Intent;package=com.nhn.android.band;end;";else{var d=document.createElement("iframe");d.style.display="none",d.src=c.param,document.body.appendChild(d),document.body.removeChild(d)}else i.Browser.instance.isIOS&&(location.href=c.param)}},e.kakaoInit=!1,e}();t.default=d},function(e,t,n){"use strict";(function(e){var o=this&&this.__awaiter||function(t,n,o,i){return new(o||(o=e))((function(e,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}l((i=i.apply(t,n||[])).next())}))},i=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.LinkLayer=void 0;var r=n(3),a=n(1),s=n(0),l=n(29),c=n(17),d=n(38),u=function(){function e(){var t=this;this.docInfo=null,this.eventObserver=null,this.parseLinkInfo=function(e){var t=e["@attributes"],n=t.l,o=t.t,i=t.w,r=t.h;return{target:e.target,page:e.page,left:parseFloat(n),top:parseFloat(o),width:parseFloat(i),height:parseFloat(r)}},this.getRatio=function(e){return s.Util.isCellSkin(t.docInfo)?d.ImageSheet.resizePercent/100:l.default.instance.getRatio(e)},this.movePage=function(e){var n=parseInt(e.currentTarget.getAttribute("data-index"))-1;if((s.Util.isCellSkin(t.docInfo)?t.docInfo.currentSheet:t.docInfo.currentPage)!==n){var o=t.docInfo.status.pageNum;isNaN(n)||n<0||n>o||(s.Util.isCellSkin(t.docInfo)?t.eventObserver.sheet.notify({sheetIdx:n}):t.eventObserver.page.notify({pageNum:n,isScroll:!1}))}},this.createLinkSvg=function(e,n,l,c){return o(t,void 0,void 0,(function(){var t,o,d,u,h,f,m,p,g,v,b,E,y,I,w=this;return i(this,(function(i){if(t=this.getRatio(n),!(o=document.getElementById("annotationlayer"+n)))return this.docInfo.currentSheet===n&&setTimeout((function(){w.createLinkSvg(e,n,l,c)}),100),[2];if(a.Browser.instance.isMobile&&(o.oncontextmenu=function(){return!1}),(d=document.getElementById("linksLayer"+n))||((d=document.createElement("div")).id="linksLayer"+n,o.appendChild(d)),u=s.Util.isCellSkin(this.docInfo)?"linkLayer"+n+"-"+l+"-"+c:"linkLayer"+n,h=document.getElementById(u))return[2];for((h=document.createElement("div")).id=u,f=0;f<e.link.length;f++)m=this.parseLinkInfo(e.link[f]),p=m.target,g=m.page,v=m.left,b=m.top,E=m.width,y=m.height,(I=p?document.createElement("a"):document.createElement("div")).className="link",I.style.cssText="left:"+v*t+"px;top:"+b*t+"px;width:"+E*t+"px;height:"+y*t+"px",I.tabIndex=0,void 0!==p?(I.setAttribute("href",p),I.setAttribute("title",p),I.setAttribute("target","_blank")):void 0!==g&&(I.setAttribute("data-index",g),s.Util.bindClickEvent(I,this.movePage)),h.appendChild(I);return d.appendChild(h),r("#page-area"+n).append(o),[2]}))}))},this.setTextObj=function(e){return o(t,void 0,void 0,(function(){var t,n;return i(this,(function(o){switch(o.label){case 0:return[4,c.default.getXml(this.docInfo,e,this.docInfo.dpi)];case 1:return t=o.sent(),null==(n=t.result)&&(n=""),this.textObj[e]={"@attributes":t.page,link:t.link,text:t.text,allText:n},[2]}}))}))},this._loadTextXml=function(n){return o(t,void 0,void 0,(function(){var t;return i(this,(function(o){switch(o.label){case 0:return null!=this.textObj&&null!=this.textObj[n]?[3,2]:[4,this.setTextObj(n)];case 1:o.sent(),o.label=2;case 2:return this.textObj[n].link.length&&(document.getElementById(""+e.getLinkId(n,0))?(t=document.getElementById("annotationlayer"+n),this.updateLinkPosition(t,n)):this.createLinkSvg(this.textObj[n],n,1,1)),[2]}}))}))},this.loadTextXml=function(e){return o(t,void 0,void 0,(function(){var t,n;return i(this,(function(o){switch(o.label){case 0:return t=c.default.getAnnotLoadingRange(this.docInfo,e),[4,this._loadTextXml(e)];case 1:for(o.sent(),n=t.startIdx;n<t.endIdx;n++)e!==n&&this._loadTextXml(n);return[2]}}))}))},this.sheetChangeTile=function(e){return o(t,void 0,void 0,(function(){var t,n,o,r,a,s,l;return i(this,(function(i){switch(i.label){case 0:return t=this.docInfo.currentSheet,n=document.getElementById("linksLayer"+t),[4,c.default.getSheetTileXml(this.docInfo,t,this.docInfo.dpi,e.x,e.y,e.w,e.h)];case 1:for(r in o=i.sent(),void 0!==this.textObj[t]&&void 0!==n||(this.textObj[t]={"@attributes":o.page,link:[],text:[],allText:""}),o.link)a=o.link[r]["@attributes"],s=a.l,l=a.t,o.link[r]["@attributes"].l=parseFloat(s)+e.x,o.link[r]["@attributes"].t=parseFloat(l)+e.y,this.textObj[t].link.push(o.link[r]);return this.createLinkSvg(o,t,e.x,e.y),[2]}}))}))},this.focusPage=function(e){return o(t,void 0,void 0,(function(){return i(this,(function(t){return this.loadTextXml(e.pageNum),[2]}))}))},this.fullScreen=function(e){e.isFullScreen?r(".link").addClass("link--hide"):r(".link").removeClass("link--hide")},this.updateLinkPosition=function(e,n){var o=Array.prototype.slice.call(e.getElementsByClassName("link"));if(0!==o.length){var i=t.getRatio(n);if(s.Util.toFixedNumber(o[0].style.width,2)!==s.Util.toFixedNumber(t.textObj[n].link[0]["@attributes"].w*i,2))for(var r in o){var a=t.textObj[n].link[r]["@attributes"],l=a.l,c=a.t,d=a.w,u=a.h;o[r].style.cssText="left:"+l*i+"px;top:"+c*i+"px;width:"+d*i+"px;height:"+u*i+"px"}}},this.loadFirstSheet=function(){return o(t,void 0,void 0,(function(){var e,t,n,o,r,a,s,l,c,u,h;return i(this,(function(i){switch(i.label){case 0:e=document.getElementById("cell-common").getElementsByTagName("div").length,t=document.getElementById("cell-common").getElementsByTagName("div")[e-1].id,n=/cellpage(\d+)_(\d+)/.exec(t).slice(1,3).map((function(e){return parseInt(e,10)})),o=n[0],r=n[1],a=0,i.label=1;case 1:if(!(a<=o))return[3,6];s=0,i.label=2;case 2:return s<=r?(l=d.ImageSheet.getSheetSize(a,s),c=l.sheetWidth,u=l.sheetHeight,h={x:1+d.ImageSheet.defaultCellWidth*s,y:1+d.ImageSheet.defaultCellHeight*a,w:c,h:u},[4,this.sheetChangeTile(h)]):[3,5];case 3:i.sent(),i.label=4;case 4:return s++,[3,2];case 5:return a++,[3,1];case 6:return[2]}}))}))},this.eventBind=function(e){t.eventObserver=e,t.eventObserver.sheetChangeTile.subscribe(t.sheetChangeTile),t.eventObserver.page.subscribe(t.focusPage),t.eventObserver.fullScreen.subscribe(t.fullScreen)},this.load=function(e,n,r){return o(t,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return this.docInfo=e,this.textObj=n,this.eventBind(r),s.Util.isCellSkin(this.docInfo)?[3,2]:[4,this.loadTextXml(this.docInfo.currentPage)];case 1:return t.sent(),[3,4];case 2:return[4,this.loadFirstSheet()];case 3:t.sent(),t.label=4;case 4:return[2]}}))}))}}return e.getLinkId=function(e,t){return"link-"+e+"-"+t},e}();t.LinkLayer=u}).call(this,n(5))},function(e,t,n){"use strict";(function(e){var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__awaiter||function(t,n,o,i){return new(o||(o=e))((function(e,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}l((i=i.apply(t,n||[])).next())}))},a=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),l=n(0),c=n(3),d=n(30),u=n(57),h=function(e){function t(){var t=e.call(this)||this;return t.getDimensionImg=function(e,n,o,i){return r(t,void 0,void 0,(function(){var t,r,s;return a(this,(function(a){switch(a.label){case 0:return n=void 0!==n?n:0,t=e.contextPath+"/dimension/"+e.status.id+"/"+n+"-"+o+"?dpi="+i,this.docInfo.status.imageConverting&&(t=e.contextPath+"/dimension/"+n+"-"+o+".js?dpi="+i),r=[],[4,l.Util.getJson(t)];case 1:return s=a.sent(),c.each(s,(function(e,t){var n={index:t.p,width:t.w,height:t.h};r[t.p]=n})),[2,r]}}))}))},t.retry=function(e){var n=parseInt(e.target.name),o=document.getElementById("thumb"+n);t.onLoadImg(o,n)},t.getDimensionHtml=function(e){return r(t,void 0,void 0,(function(){var t,n;return a(this,(function(o){switch(o.label){case 0:return t=e.resultPath+"/"+e.status.fileName+".xml",[4,l.Util.getXml(t)];case 1:return n=o.sent(),"image"===e.skinType?[2,l.Util.getDimensionHtmlForImage(n)]:[2,l.Util.getDimensionHtmlForPDF(n)]}}))}))},t.onLoadImg=function(e,n){e.className="thumb__img img-loading-small",e.removeEventListener("click",t.retry);var o=new Image;o.onerror=function(){e.src=t.transparentImg,e.className+=" img-retry",e.addEventListener("click",t.retry)},o.onload=function(){e.className="thumb__img"},l.Util.isConvHtml(t.docInfo)?o.src=""+l.Util.getResultPath(t.docInfo,t.THUMB_SIZE[n].path):o.src=""+l.Util.getThumbPath(t.docInfo,n,u.DPI.thumbDPI),e.src=o.src},t.createThumbDiv=function(e){return r(t,void 0,void 0,(function(){var t,n,o,i,r,d,h,f,m,p,g,v,b,E,y,I,w,_;return a(this,(function(a){switch(a.label){case 0:return t=114,n=72,o=null,l.Util.isConvHtml(this.docInfo)?[4,this.getDimensionHtml(e)]:[3,2];case 1:return o=a.sent(),[3,4];case 2:return[4,this.getDimensionImg(e,0,e.status.pageNum,u.DPI.thumbDPI)];case 3:o=a.sent(),a.label=4;case 4:for(i=Math.round(t/o[0].width*o[0].height),r=Math.round(n/o[0].width*o[0].height),d=this.jqThumbnail.height(),h=i,l.Util.isMobileMode()&&(h=r),this.initThumbNum=Math.ceil(d/h),f=document.createDocumentFragment(),m=0,p=o;m<p.length;m++)g=p[m],this.THUMB_SIZE[g.index]={width:g.width,height:g.height,desktopHeight:i,mobileHeight:r},(v=document.createElement("div")).id="thumb-content"+g.index,v.className="thumb",(b=document.createElement("span")).className="thumb__span",b.textContent=g.index+1,(E=document.createElement("div")).id="thumb-area"+g.index,E.className=s.Browser.instance.isMobile?"thumb-area thumb__div thumb--nohover":"thumb-area thumb__div",E.setAttribute("data-index",g.index),(y=document.createElement("img")).id="thumb"+g.index,y.name=""+g.index,y.title="page"+(g.index+1),y.src=this.transparentImg,y.className="thumb__img img-loading-small",y.alt="thumbnail "+g.index,E.addEventListener("click",this.thumbMovePage),this.isWindowCSS&&(y.style.setProperty("--page-width",g.width),y.style.setProperty("--page-height",g.height)),l.Util.isConvHtml(this.docInfo)&&(this.THUMB_SIZE[g.index].path=g.path),I=0,this.isWindowCSS||(this.THUMB_SIZE[0].width!==g.width||this.THUMB_SIZE[0].height!==g.height?(w=Math.round(t/g.width*g.height),_=Math.round(n/g.width*g.height),I=!0===l.Util.isMobileMode()?_:w,this.THUMB_SIZE[g.index].desktopHeight=w,this.THUMB_SIZE[g.index].mobileHeight=_):I=!0===l.Util.isMobileMode()?this.THUMB_SIZE[0].mobileHeight:this.THUMB_SIZE[0].desktopHeight),g.index<this.initThumbNum&&(this.thumbOnOffOption()&&this.onLoadImg(y,g.index),this.isWindowCSS||(y.style.cssText="height:"+I+"px;")),E.appendChild(y),v.appendChild(b),v.appendChild(E),f.appendChild(v);return c("#wrap__index").append(f),c("#thumb-area0").removeClass("thumb--nohover"),[2]}}))}))},t.thumbOnOffOption=function(){return l.Util.isMobileMode()?!(window.localSynap&&window.localSynap.config&&!1===window.localSynap.config.showThumbnailMobile):void 0!==window.localSynap&&window.localSynap.config.showThumbnail},t.eventBind=function(e){t.eventObserver=e,t.eventObserver.page.subscribe(t.focusPage),t.eventObserver.resizeWindow.subscribe(t.resizeWindow),t.eventObserver.fullScreen.subscribe(t.fullScreen),t.eventObserver.annotMode.subscribe(t.annotMode),t.scrollEventBind(),t.thumbnailDesktop.eventBind(t.eventObserver),t.thumbnailMobile.eventBind(t.eventObserver,t.docInfo),t.webThumbnailResize(),l.Util.bindClickEvent(document.getElementById("mobile-thumbnailbar"),t.toggleEvent),l.Util.bindClickEvent(document.getElementById("thumbnailview-btn"),t.toggleEvent)},t.loadThumbDelay=function(e){return r(t,void 0,void 0,(function(){return a(this,(function(e){return[2]}))}))},t.load=function(e,n){return r(t,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return this.docInfo=e,[4,this.createThumbDiv(this.docInfo)];case 1:return t.sent(),c("#thumb-area0").addClass("thumb__focus"),s.Browser.instance.isMobile&&(c("#web-thumbnailbar").addClass("thumbnailbar--touch-expand"),c("#mobile-thumbnailbar").addClass("thumbnailbar--touch-expand")),this.eventBind(n),l.Util.isMobileMode()?(this.thumbnailActions=this.thumbnailMobile,window.localSynap&&window.localSynap.config&&!1===window.localSynap.config.showThumbnailMobile?(d.Thumbnail.THUMB_STATUS=d.THUMB_FLAG.on,this.thumbnailActions.toggleAction()):(this.thumbnailActions.toggleAction(),this.setThumbnailAreaHeightForIOS())):(this.thumbnailActions=this.thumbnailDesktop,window.localSynap&&window.localSynap.config&&window.localSynap.config.showThumbnail&&this.thumbnailActions.toggleAction()),this.isWindowCSS||this.thumbSizeResize(this.initThumbNum,this.docInfo.status.pageNum,null),[2]}}))}))},t}return i(t,e),t}(d.Thumbnail);t.default=h}).call(this,n(5))},function(e,t,n){"use strict";(function(e){var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__awaiter||function(t,n,o,i){return new(o||(o=e))((function(e,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}l((i=i.apply(t,n||[])).next())}))},a=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),l=n(0),c=n(3),d=n(30),u=n(149),h=function(e){function t(){var n=e.call(this)||this;return n.getDimensionHtml=function(e){return r(n,void 0,void 0,(function(){var n,o,i;return a(this,(function(r){switch(r.label){case 0:return n=e.resultPath+"/"+e.status.fileName+".xml",o=[],[4,l.Util.getXml(n)];case 1:return i=r.sent(),t.SLIDE_INFO.start=parseInt(i.index.startPage),t.SLIDE_INFO.end=parseInt(i.index.endPage),t.SLIDE_INFO.total=parseInt(i.index.slide_cnt),1===t.SLIDE_INFO.total?(o[0]=[],o[0].index=parseInt(i.index.slide_list.slide.id)-1,o[0].path=i.index.slide_list.slide.path_xhtml,o[0].width=i.index.width,o[0].height=i.index.height,[2,o]):(c.each(i.index.slide_list.slide,(function(e,t){var n={index:parseInt(t.id)-1,path:t.path_xhtml,width:i.index.width,height:i.index.height};o[e]=n})),[2,o])}}))}))},n.onLoadImg=function(e,t){e.className="thumb__img img-loading-small",e.src=""+l.Util.getResultPath(n.docInfo,n.THUMB_SIZE[t].path)},n.slideRenderingSize=function(e,t,o,i){return r(n,void 0,void 0,(function(){var n,r,l,c;return a(this,(function(a){return n=Math.round(i/t*o),l=-2*t*(1-(r=i/(2*t)))/2,c=-2*o*(1-r)/2,s.Browser.instance.isIE9Lower()?e.style.cssText+="width:"+i+"px;height:"+n+"px;":e.style.cssText+="width:"+2*t+"px;height:"+2*o+"px;\n\t\t\ttransform:scale("+r+","+r+");left:"+l+"px;top:"+c+"px;",[2]}))}))},n.createThumbDiv=function(e){return r(n,void 0,void 0,(function(){var t,n,o,i,r,l,d,u,h,f,m,p,g,v;return a(this,(function(a){switch(a.label){case 0:return t=114,n=72,[4,this.getDimensionHtml(e)];case 1:for(o=a.sent(),i=Math.round(t/o[0].width*o[0].height),r=Math.round(n/o[0].width*o[0].height),this.THUMB_SIZE[0]={width:o[0].width,height:o[0].height,desktopHeight:i,mobileHeight:r},l=document.createDocumentFragment(),d=0,u=o;d<u.length;d++)h=u[d],(f=document.createElement("div")).id="thumb-content"+h.index,f.className="thumb",f.onclick=this.thumbMovePage,(m=document.createElement("span")).className="thumb__span",m.textContent=h.index+1,(p=document.createElement("div")).id="thumb-area"+h.index,p.className=s.Browser.instance.isMobile?"thumb-area thumb-slide thumb__div img-loading-small thumb--nohover":"thumb-area thumb-slide thumb__div img-loading-small thumb-area-slide",p.style.cssText="width:"+t+"px;height:"+i+"px;",(g=document.createElement("iframe")).id="thumb"+h.index,g.name=""+h.index,g.title="page"+(h.index+1),g.scrolling="no",g.frameBorder="no",(v=document.createElement("div")).className="thumb-slide-alpha",v.style.cssText="width:"+t+"px;height:"+i+"px;",v.onclick=this.thumbMovePage,v.setAttribute("data-index",h.index),this.THUMB_SIZE[h.index]={path:h.path},this.slideRenderingSize(g,h.width,h.height,t),h.index<this.initThumbNum&&this.onLoadImg(g,h.index),p.appendChild(g),p.appendChild(v),f.appendChild(m),f.appendChild(p),l.appendChild(f);return c("#wrap__index").append(l),c("#thumb-area0").removeClass("thumb--nohover"),[2]}}))}))},n.eventBind=function(e){n.eventObserver=e,n.eventObserver.page.subscribe(n.focusPage),n.eventObserver.resizeWindow.subscribe(n.resizeWindow),n.eventObserver.fullScreen.subscribe(n.fullScreen),n.scrollEventBind(),n.thumbnailDesktop.eventBind(n.eventObserver),n.thumbnailMobile.eventBind(n.eventObserver,n.docInfo),n.webThumbnailResize(),l.Util.bindClickEvent(document.getElementById("mobile-thumbnailbar"),n.toggleEvent),l.Util.bindClickEvent(document.getElementById("thumbnailview-btn"),n.toggleEvent)},n._loadThumbnail=function(){return r(n,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.createThumbDiv(this.docInfo)];case 1:return e.sent(),c("#thumb-area0").addClass("thumb__focus"),s.Browser.instance.isMobile&&(c("#web-thumbnailbar").addClass("thumbnailbar--touch-expand"),c("#mobile-thumbnailbar").addClass("thumbnailbar--touch-expand")),l.Util.isMobileMode()?(this.thumbnailActions=this.thumbnailMobile,window.localSynap&&window.localSynap.config&&!1===window.localSynap.config.showThumbnailMobile?(d.Thumbnail.THUMB_STATUS=d.THUMB_FLAG.on,this.thumbnailActions.toggleAction()):(this.thumbnailActions.toggleAction(),this.setThumbnailAreaHeightForIOS())):(this.thumbnailActions=this.thumbnailDesktop,window.localSynap&&window.localSynap.config&&window.localSynap.config.showThumbnail&&this.thumbnailActions.toggleAction()),this.isWindowCSS||this.thumbSizeResize(this.initThumbNum,this.docInfo.status.pageNum,null),[2]}}))}))},n.loadThumbDelay=function(e){return r(n,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return e%5!=0?[3,2]:[4,l.Util.sleep(100)];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},n.load=function(e,t){return r(n,void 0,void 0,(function(){var n=this;return a(this,(function(o){return this.docInfo=e,c(".wrap__thumbnail").addClass("wrap__thumbnail-slide"),this.eventBind(t),this.loadSpinner(),setTimeout((function(){n._loadThumbnail(),n.removeSpinner()}),500),[2]}))}))},n.loadSpinner=function(){if(!(l.Util.isMobileMode()||c(".loading_spinner").length>0)){var e=document.createElement("div");e.setAttribute("class","inner loading_spinner "),document.getElementById("contents-area").appendChild(e),new u({lines:11,length:0,width:12,radius:30,scale:1.25,corners:.5,color:"#435c85",opacity:.25,rotate:0,direction:1,speed:1,trail:65,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"}).spin(e)}},n.removeSpinner=function(){l.Util.isMobileMode()||setTimeout((function(){c(".loading_spinner").remove()}),50)},n.initThumbNum=10,n}return i(t,e),t.SLIDE_INFO={start:0,end:0,total:0},t}(d.Thumbnail);t.default=h}).call(this,n(5))},function(e,t,n){"use strict";(function(e){var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__awaiter||function(t,n,o,i){return new(o||(o=e))((function(e,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}l((i=i.apply(t,n||[])).next())}))},a=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.HtmlSheet=void 0;var s=n(1),l=n(0),c=n(36),d=n(3),u=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.sheetIdList=[],n.getSheet=function(e){return n.docInfo.status.sheetList[e]},n.getTitle=function(t,o,i){return r(n,void 0,e,(function(){return a(this,(function(e){return[2,this.getSheet(i).title]}))}))},n.loadSheet=function(t){return r(n,void 0,e,(function(){var e;return a(this,(function(n){return this.docInfo.currentSheet=t,e=l.Util.getResultPath(this.docInfo,this.getSheet(t).path),d(".wrap__innerWrap").get(0).setAttribute("src",e),this.checkMoveControlbar(),d("#innerWrap").trigger("focus"),[2]}))}))},n.bindControlbarEvent=function(){l.Util.bindClickOrTouchEvent(d("#cell-first"),"controlbar-first--hover",(function(){n.eventObserver.sheet.notify({sheetIdx:0})})),l.Util.bindClickOrTouchEvent(d("#cell-end"),"controlbar-end--hover",(function(){n.eventObserver.sheet.notify({sheetIdx:n.maxPage-1})})),l.Util.bindClickOrTouchEvent(d("#cell-prev"),"controlbar-prev--hover",(function(){n.eventObserver.sheet.notify({sheetIdx:n.docInfo.currentSheet-1})})),l.Util.bindClickOrTouchEvent(d("#cell-next"),"controlbar-next--hover",(function(){n.eventObserver.sheet.notify({sheetIdx:n.docInfo.currentSheet+1})}))},n.resizeWindow=function(){d("#contents").removeAttr("style"),l.Util.isMobileMode()&&(d("#tablist-popup").hide(),l.Util.isFullScreen()||n.eventObserver.mobileHeader.notify(c.ShowActionType.HIDE3SEC)),l.Util.isFullScreen()||l.Util.isFullScreen()||n.sheetTabResize()},n.iframeEventBind=function(){d("#contents-area").on("click",(function(){s.Browser.instance.isMobile||n.toggleMobileHeader()})),d("#innerWrap").on("load",(function(){var e=document.getElementById("contents-area"),t=document.getElementById("innerWrap");t.contentDocument.addEventListener("mousemove",l.Util.getMouseHandlerDispatch(e)),t.contentDocument.addEventListener("click",l.Util.getMouseHandlerDispatch(e)),t.contentDocument.addEventListener("touchstart",l.Util.getTouchHandlerDispatch(e)),t.contentDocument.addEventListener("touchmove",l.Util.getTouchHandlerDispatch(e)),t.contentDocument.addEventListener("touchend",l.Util.getTouchHandlerDispatch(e)),d(this).contents().on("keydown keyup",(function(e){d("#contents-area").trigger(e)}))}))},n.singleTap=function(){n.toggleMobileHeader()},n.iosSheetTabEventBind=function(){s.Browser.instance.isIOS&&d("#header-tablist__input, #cell-select-arrow").on("click",(function(){var e=document.createElement("div");e.id="dimmed",e.style.width="100%",e.style.height="100%",e.style.position="fixed",e.style.zIndex="30",e.addEventListener("click",(function(){document.getElementById("dimmed").remove()})),document.getElementById("header-tablist__select").addEventListener("change",(function(){document.getElementById("dimmed").remove()})),document.getElementsByTagName("body")[0].appendChild(e)}))},n.syncSheetTab=function(){var e=n.docInfo,t=n.sheetIdList,o=n.checkMoveControlbar,i=n.sheetTabActive;d("#innerWrap").on("load",(function(){var n=e.status.sheetList;"number"==typeof this.contentWindow.sheetIndex&&n[e.currentSheet].id!==this.contentWindow.sheetIndex&&(e.currentSheet=t[this.contentWindow.sheetIndex],o(),i(e.currentSheet))}))},n.eventObserverBind=function(e){n.eventObserver=e,n.eventObserver.sheet.subscribe(n.moveSheet),n.eventObserver.resizeWindow.subscribe(n.resizeWindow),n.eventObserver.fullScreen.subscribe(n.fullScreen),n.eventObserver.singleTap.subscribe(n.singleTap)},n.eventBind=function(){n.iframeEventBind(),n.iosSheetTabEventBind(),n.syncSheetTab()},n.getDimensionHtml=function(){return r(n,void 0,void 0,(function(){var e,t,n,o,i=this;return a(this,(function(r){switch(r.label){case 0:return e=this.docInfo.resultPath+"/"+this.docInfo.status.fileName+".xml",t=[],[4,l.Util.getXml(e)];case 1:return n=r.sent(),1===parseInt(n.index.sheet_cnt)?(t[0]={id:parseInt(n.index.sheet_list.sheet.id),title:n.index.sheet_list.sheet.title,path:n.index.sheet_list.sheet.path_xhtml},this.sheetIdList[t[0].id]=0):(o=0,d.each(n.index.sheet_list.sheet,(function(e,n){if(n.title){var r={id:parseInt(n.id),title:n.title,path:n.path_xhtml};t[o]=r,i.sheetIdList[r.id]=o,o++}}))),[2,t]}}))}))},n.setTabIndex=function(){var e=l.Util.setTabIndexList(),t=document.getElementById("tabmore").tabIndex,o=document.getElementById("header-tablist__input").tabIndex;l.Util.setTabIndex(document.getElementById("innerWrap"),e++);for(var i=0;i<n.maxPage;i++)l.Util.setTabIndex(document.getElementById("tablist"+i),t+1),l.Util.setTabIndex(document.getElementById("mobileTablist"+i),o),l.Util.setTabIndex(document.getElementById("sheet"+i),e)},n.load=function(t,o){return r(n,void 0,e,(function(){var e,n,i;return a(this,(function(r){switch(r.label){case 0:return this.docInfo=t,e=this.docInfo.status,n="sheetList",[4,this.getDimensionHtml()];case 1:return e[n]=r.sent(),this.maxPage=this.docInfo.status.pageNum=this.docInfo.status.sheetList.length,d("#wrap").addClass("wrap--cell"),s.Browser.instance.isIOS&&(d("#wrap").addClass("wrap--ios"),d("#container").addClass("wrap__container--ios"),d("#contents").addClass("wrap__contents--ios"),d("#footer").addClass("wrap__footer--ios")),d("#header-title-text").addClass("wrap__title--cell"),d("#contents-area").addClass("wrap__contents-area"),this.bindControlbarEvent(),this.eventObserverBind(o),i=this.createIframe(),document.getElementById("contents-area").appendChild(i),[4,this.loadSheetTab(this.docInfo.currentSheet)];case 2:return r.sent(),[4,this.loadSheet(this.docInfo.currentSheet)];case 3:return r.sent(),this.setTabIndex(),this.eventBind(),[2]}}))}))},n.createIframe=function(){var e=document.createElement("iframe");return e.id="innerWrap",e.className="wrap__innerWrap",e.title="content",e.style.backgroundColor="#ffffff",e},n}return i(n,t),n}(n(157).Sheet);t.HtmlSheet=u}).call(this,n(5))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WindowEvent=void 0;var o=n(0),i=n(3),r=n(1),a=function(){var e=this;this.eventObserver=null,this.docInfo=null,this.eventBind=function(t){if(e.eventObserver=t,r.Browser.instance.isIOS){var n;i(window).on("orientationchange",(function(){clearTimeout(n),n=setTimeout((function(){e.eventObserver.resizeWindow.notify()}),100)}))}else{var o;i(window).on("resize",(function(){clearTimeout(o),o=setTimeout(a,100)}));var a=function(){e.eventObserver.resizeWindow.notify()}}},this.preventCopy=function(){i(document.body).on("contextmenu",(function(){return!1}))},this.preventDragSelect=function(){i(document.body).on("dragstart",(function(){return!1})),i(document.body).on("selectstart",(function(t){return!("page__input"!==t.target.id&&"urlArea"!==t.target.id&&"search__input"!==t.target.id&&"annotation-memo__content"!==t.target.id&&"annotation-memo__author-input"!==t.target.id&&"download-input"!==t.target.id&&"annotation-list__search__input"!==t.target.id&&!o.Util.containClassName(t.target,"annot-page-li-info-authorInput")&&(!o.Util.isUseSearch(e.docInfo)&&!o.Util.isUseAnnotation(e.docInfo)||"text"!==t.target.className))}))},this.copyPlainText=function(){document.addEventListener("copy",(function(e){if(void 0!==window.getSelection&&-1!=e.target.parentElement.className.indexOf("textLayer")){var t=window.getSelection().getRangeAt(0).toString();e.clipboardData.setData("text/plain",t),e.preventDefault()}}))},this.load=function(e,t){this.docInfo=e,this.eventBind(t),o.Util.allowCopy()?(this.copyPlainText(),this.preventDragSelect()):(this.preventDragSelect(),this.preventCopy())}};t.WindowEvent=a},function(e,t,n){"use strict";(function(e){var o=this&&this.__awaiter||function(t,n,o,i){return new(o||(o=e))((function(e,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}l((i=i.apply(t,n||[])).next())}))},i=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Word=void 0;var r=n(1),a=n(0),s=n(36),l=n(3),c=function(){var e=this;this.docInfo=null,this.eventObserver=null,this.createIframe=function(){var t=document.createElement("iframe");t.id="innerWrap",t.className="wrap__innerWrap",t.title="content";var n=a.Util.useSingle(e.docInfo)&&"xmldart"!==e.docInfo.fileType?e.docInfo.status.fileName+".xhtml":e.docInfo.status.fileName+".view.xhtml";return t.src=a.Util.getResultPath(e.docInfo,n),t},this.load=function(t,n){e.docInfo=t,r.Browser.instance.isIOS&&(l("#wrap").addClass("wrap--ios"),l("#container").addClass("wrap__container--ios"),l("#contents").addClass("wrap__contents--ios"));var o=e.createIframe();document.getElementById("contents-area").appendChild(o),e.setTabIndex(),e.eventBind(n)},this.eventBind=function(t){e.eventObserver=t,e.eventObserver.fullScreen.subscribe(e.fullScreen),e.eventObserver.singleTap.subscribe(e.singleTap),e.iframeEventBind()},this.toggleMobileHeader=function(){a.Util.isMobileMode()&&!a.Util.isFullScreen()&&("none"===l(".wrap__header").css("display")?e.eventObserver.mobileHeader.notify(s.ShowActionType.HIDE3SEC):e.eventObserver.mobileHeader.notify(s.ShowActionType.HIDE))},this.iframeEventBind=function(){l("#contents-area").on("click",(function(){r.Browser.instance.isMobile||e.toggleMobileHeader()})),l("#innerWrap").on("load",(function(){var e=document.getElementById("contents-area"),t=document.getElementById("innerWrap");t.contentDocument.addEventListener("touchstart",a.Util.getTouchHandlerDispatch(e)),t.contentDocument.addEventListener("touchmove",a.Util.getTouchHandlerDispatch(e)),t.contentDocument.addEventListener("touchend",a.Util.getTouchHandlerDispatch(e)),t.contentDocument.addEventListener("click",a.Util.getMouseHandlerDispatch(e)),l(this).contents().on("keydown keyup",(function(e){l("#contents-area").trigger(e)}))})),l("#innerWrap").trigger("focus")},this.fullScreen=function(t){return o(e,void 0,void 0,(function(){return i(this,(function(e){return t.isFullScreen?(l("#contents").addClass("wrap__contents--page-fullscreen"),l(".wrap__innerWrap").addClass("wrap__contents--page-fullscreen"),l("#container").addClass("wrap__container--presentation"),t.isSupport||l(".wrap__header").addClass("wrap__header--presentation")):(l("#contents").removeClass("wrap__contents--page-fullscreen"),l(".wrap__innerWrap").removeClass("wrap__contents--page-fullscreen"),l("#container").removeClass("wrap__container--presentation"),t.isSupport||l(".wrap__header").removeClass("wrap__header--presentation")),[2]}))}))},this.singleTap=function(){e.toggleMobileHeader()},this.setTabIndex=function(){var e=a.Util.setTabIndexList();a.Util.setTabIndex(document.getElementById("innerWrap"),e)}};t.Word=c}).call(this,n(5))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SlidePageScrollFit=void 0;var o=n(3),i=n(0),r=n(109),a=n(1),s=function(){var e=this;this.noneRotateSize=[0,0],this.scrollContentAreaEl=a.Browser.instance.isIOS?o(document):o("#contents"),this.resizePage=function(t,n,s,l){void 0===s&&(s=0),void 0===l&&(l=0);var c=o("#page-area0").height(),d=e.scrollContentAreaEl.scrollTop(),u=o(".contents-page").length,h=0===l||l>u?u:s+l,f=0;f=a.Browser.instance.isIOS&&i.Util.isFullScreen()?window.innerHeight:document.getElementById("contents").offsetHeight;var m=o("#contents").width();e.noneRotateSize=[m,f];for(var p=s;p<h;++p){var g=e.getResizeResult(!1,r.Slide.ORIGIN_SIZE[p].width,r.Slide.ORIGIN_SIZE[p].height),v=g[0],b=g[1];if(i.Util.isFullScreen()){var E=0;E=(f-b)/2,o("#page"+p).css({"margin-top":E,"margin-bottom":E}),o("#page-alpha"+p).css({"margin-top":E,"margin-bottom":E})}else o("#page-alpha"+p).css({"margin-top":0,"margin-bottom":0});o("#page"+p).css({width:1*v,height:1*b}),o("#page-alpha"+p).css({width:1*v,height:1*b}),r.Slide.CURRENT_SIZE[p]={width:1*v,height:1*b}}e.setPageMargin(1),!a.Browser.instance.isIOS&&e.scrollContentAreaEl.scrollTop(d*(o("#page-area0").height()/c))},this._getRatio=function(t,n){var o=e.noneRotateSize,i=o[0],r=o[1],a=i/t,s=r/n;return r<i&&t*s<i||r>i&&n*a>r?s:a},this.getResizeResult=function(t,n,o,i){void 0===i&&(i=null);var r=e._getRatio(n,o);return[n*r,o*r]},this.setPageMargin=function(e){var t=o("#page-area0").height()/r.Slide.ORIGIN_SIZE[0].height*e;o(".contents-page").css("margin-top",r.Slide.ORIGIN_MARGIN.marginTop*t),o(".contents-page").css("margin-bottom",r.Slide.ORIGIN_MARGIN.marginBottom*t),o(".thumb-slide-alpha").css("left",o("#page0").offset().left)}};t.SlidePageScrollFit=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SlidePageFit=void 0;var o=n(3),i=n(0),r=n(109),a=n(1),s=function(){var e=this;this.noneRotateSize=[0,0],this.scrollContentAreaEl=a.Browser.instance.isIOS?o(document):o("#contents"),this.resizePage=function(t,n,s,l){void 0===s&&(s=0),void 0===l&&(l=0),o("#contents").css("overflow","hidden"),o("#contents-area").css("overflow","hidden");var c=0;c=a.Browser.instance.isIOS&&i.Util.isFullScreen()?window.innerHeight:document.getElementById("contents").offsetHeight;var d=o("#contents").width();e.noneRotateSize=[d,c];var u=s,h=r.Slide.ORIGIN_SIZE[u].width,f=r.Slide.ORIGIN_SIZE[u].height,m=e._getRatio(h,f);o("#contents-area").css({width:d,height:c}),o("#page"+u).css({width:2*h,height:2*f}),r.Slide.CURRENT_SIZE[u]={width:1*h,height:1*f},o("#page"+u).css("transform","scale("+m/2+")").css("margin-left",h*(m-2)/2+(d-h*m)/2+"px").css("margin-top",f*(m-2)/2+(c-f*m)/2+"px"),e.setPageMargin(1)},this._getRatio=function(t,n){var o=e.noneRotateSize,i=o[0],r=o[1],a=.95*i/t;return r/i<n/t&&(a=.95*r/n),a},this.getResizeResult=function(t,n,o,i){void 0===i&&(i=null);var r=e._getRatio(n,o);return[n*r,o*r]},this.setPageMargin=function(e){o(".contents-page").css("margin-top",0),o(".contents-page").css("margin-bottom",0)}};t.SlidePageFit=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZipTree=void 0;var o=n(160),i=function(e,t){var n=this;this.arrangeIntoTree=function(e){for(var t=[],i=function(e){for(var i=e.pathArr,r=[],a=t,s=function(t){var s=i[t],l=n.findWhere(a,"fileName",s);if(l)a=l.children,r=l;else{var c=void 0;c=t===i.length-1?{filePath:e.filePath,fileName:s,fileType:e.fileType,fileSize:e.fileSize,directory:e.directory,parent:r,children:[],childSort:{sortingField:o.SORTING_FIELD.NULL,sortingStatus:o.SORTING_STATUS.NULL}}:{filePath:function(){for(var e="",n=0;n<=t;n++)e+=i[n]+"/";return e}(),fileName:s,fileType:null,fileSize:0,directory:!0,parent:r,children:[],childSort:{sortingField:o.SORTING_FIELD.NULL,sortingStatus:o.SORTING_STATUS.NULL}},a.push(c),r=c,a=c.children}},l=0;l<i.length;l++)s(l)},r=0,a=e;r<a.length;r++)i(a[r]);return t},this.findWhere=function(e,t,n){for(var o=0;o<e.length&&e[o][t]!==n;)o++;return o<e.length&&e[o]},this.getZipTree=function(){return n.zipTree};for(var i=[],r=0;r<e.length;r++){var a=e[r].fileName.replace(/^\/|\/$/g,"").split("/");i[r]={pathArr:a,filePath:e[r].fileName,fileType:e[r].directory||null===e[r].fileType?null:e[r].fileType.toLowerCase(),fileSize:e[r].fileSize,directory:e[r].directory}}for(var s={filePath:"/",fileName:t,fileType:"",fileSize:0,directory:!0,parent:null,children:this.arrangeIntoTree(i),childSort:{sortingField:o.SORTING_FIELD.NULL,sortingStatus:o.SORTING_STATUS.NULL}},l=0,c=s.children;l<c.length;l++)c[l].parent=s;this.zipTree=s};t.ZipTree=i},,function(e,t,n){"use strict";(function(e){var o=this&&this.__awaiter||function(t,n,o,i){return new(o||(o=e))((function(e,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}l((i=i.apply(t,n||[])).next())}))},i=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.MobileControlbar=void 0;var r=n(301),a=n(0),s=n(1),l=n(19),c=function(){var t=this;this.eventObserver=null,this.controlbar=document.getElementById("mobile-controlbar"),this.controlbarShow=document.getElementById("mobile-controlbar-show"),this.controlbarMore=document.getElementById("mobile-controlbar-more"),this.hideClass="mobile-controlbar--hide",this.mobileControlbarShowSize={width:65,height:65},this.mobileControlbarMoreSize={width:65,height:65},this.fullScreen=function(e){e.isFullScreen?a.Util.addClass(t.controlbar,t.hideClass):a.Util.removeClass(t.controlbar,t.hideClass)},this.startViewportScroll=function(){a.Util.isFullScreen()||a.Util.addClass(t.controlbar,t.hideClass)},this.endViewportScroll=function(){t.scaleControlbarPostion(),a.Util.isFullScreen()||a.Util.removeClass(t.controlbar,t.hideClass)},this.scaleControlbarPostion=function(){l.ScaleEvent.scaleWithPosition(t.controlbarShow,l.TransformOriginType.RIGHT_BOTTOM,t.mobileControlbarShowSize.width*l.ScaleEvent.getBrowserScale(),t.mobileControlbarShowSize.height*l.ScaleEvent.getBrowserScale()),l.ScaleEvent.scaleWithPosition(t.controlbarMore,l.TransformOriginType.RIGHT_BOTTOM,t.mobileControlbarMoreSize.width*l.ScaleEvent.getBrowserScale(),t.mobileControlbarMoreSize.height*l.ScaleEvent.getBrowserScale())},this.eventObserverBind=function(e){t.eventObserver=e,t.eventObserver.fullScreen.subscribe(t.fullScreen),t.eventObserver.resizeWindow.subscribe(t.scaleControlbarPostion),s.Browser.instance.isSupportVisualViewport()&&(t.eventObserver.startViewportScroll.subscribe(t.startViewportScroll),t.eventObserver.endViewportScroll.subscribe(t.endViewportScroll))},this.load=function(n,l){return o(t,void 0,e,(function(){return i(this,(function(e){return new r.FloatingBtn(n,l,document.getElementById("mobile-controlbar-show__btn"),r.FloatingType.SHOW),new r.FloatingBtn(n,l,document.getElementById("mobile-controlbar-hide__btn"),r.FloatingType.HIDE),new r.FloatingBtn(n,l,document.getElementById("mobile-controlbar-next__btn"),r.FloatingType.NEXT),new r.FloatingBtn(n,l,document.getElementById("mobile-controlbar-prev__btn"),r.FloatingType.PREV),new r.FloatingBtn(n,l,document.getElementById("mobile-controlbar-zoomin__btn"),r.FloatingType.ZOOMIN),new r.FloatingBtn(n,l,document.getElementById("mobile-controlbar-zoomout__btn"),r.FloatingType.ZOOMOUT),s.Browser.instance.isMobile||(a.Util.removeClass(document.getElementById("mobile-controlbar-floating__scroll"),"hide"),new r.FloatingBtn(n,l,document.getElementById("mobile-controlbar-hand-scroll__btn"),r.FloatingType.SCROLL)),this.scaleControlbarPostion(),this.eventObserverBind(l),[2]}))}))},a.Util.removeClass(this.controlbar,this.hideClass);var n=window.getComputedStyle(this.controlbarShow),c=parseInt(n.getPropertyValue("margin-right")),d=c||20;this.mobileControlbarShowSize.width+=d,this.mobileControlbarMoreSize.width+=d;var u=parseInt(n.getPropertyValue("margin-bottom")),h=u||20;this.mobileControlbarShowSize.height+=h,this.mobileControlbarMoreSize.height+=h};t.MobileControlbar=c}).call(this,n(5))},function(e,t,n){"use strict";(function(e){var o=this&&this.__awaiter||function(t,n,o,i){return new(o||(o=e))((function(e,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}l((i=i.apply(t,n||[])).next())}))},i=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.FloatingBtn=t.FloatingType=void 0;var r,a=n(0),s=n(76),l=n(8),c=n(105);function d(){var e="mobile-controlbar-floating--hide";a.Util.removeClass(document.getElementById("mobile-controlbar-more"),e),a.Util.addClass(document.getElementById("mobile-controlbar-show"),e)}function u(){var e="mobile-controlbar-floating--hide";a.Util.removeClass(document.getElementById("mobile-controlbar-show"),e),a.Util.addClass(document.getElementById("mobile-controlbar-more"),e)}function h(e,t,n){!e.disabled&&t.page.notify({pageNum:n,isScroll:!1})}function f(e,t,n){!e.disabled&&t.sheet.notify({sheetIdx:n})}function m(t,n,r){return o(this,void 0,e,(function(){return i(this,(function(e){switch(e.label){case 0:return t.disabled?[3,3]:l.default.isDrawingMode?[4,n.saveAnnotation.notify()]:[3,2];case 1:e.sent(),e.label=2;case 2:n.zoom.notify(r),e.label=3;case 3:return[2]}}))}))}!function(e){e[e.SHOW=0]="SHOW",e[e.HIDE=1]="HIDE",e[e.NEXT=2]="NEXT",e[e.PREV=3]="PREV",e[e.ZOOMIN=4]="ZOOMIN",e[e.ZOOMOUT=5]="ZOOMOUT",e[e.SCROLL=6]="SCROLL"}(r=t.FloatingType||(t.FloatingType={}));var p=function(e,t,n,o){var i=this;this.docInfo=null,this.eventObserver=null,this.target=null,this.handleClick=null,this.docInfo=e,this.eventObserver=t,this.target=n,this.handleClick=function(){switch(o){case r.SHOW:return d;case r.HIDE:return u;case r.NEXT:return function(){a.Util.isCellSkin(i.docInfo)?f(i.target,i.eventObserver,i.docInfo.currentSheet+1):h(i.target,i.eventObserver,i.docInfo.currentPage+1)};case r.PREV:return function(){a.Util.isCellSkin(i.docInfo)?f(i.target,i.eventObserver,i.docInfo.currentSheet-1):h(i.target,i.eventObserver,i.docInfo.currentPage-1)};case r.ZOOMIN:return function(e){e.preventDefault(),m(i.target,i.eventObserver,s.ZOOM_TYPE.ZoomIn)};case r.ZOOMOUT:return function(e){e.preventDefault(),m(i.target,i.eventObserver,s.ZOOM_TYPE.ZoomOut)};case r.SCROLL:return c.MouseScroll.instance.bindMobileControlbar({elem:n,selector:"mobile-controlbar-floating__btn--hover"});default:return null}}(),this.handleClick&&this.target.addEventListener("click",this.handleClick)};t.FloatingBtn=p}).call(this,n(5))},function(e,t,n){"use strict";(function(e){var n=this&&this.__awaiter||function(t,n,o,i){return new(o||(o=e))((function(e,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}l((i=i.apply(t,n||[])).next())}))},o=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Observable=void 0;var i=function(){function e(){this.observers=[]}return e.prototype.subscribe=function(e){this.observers.push(e)},e.prototype.unsubscribe=function(e){this.observers=this.observers.filter((function(t){return t!==e}))},e.prototype.notify=function(e){return void 0===e&&(e=void 0),n(this,void 0,void 0,(function(){var t,n;return o(this,(function(o){switch(o.label){case 0:t=0,n=this.observers,o.label=1;case 1:return t<n.length?[4,(0,n[t])(e)]:[3,4];case 2:o.sent(),o.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))},e}();t.Observable=i}).call(this,n(5))},,function(e,t){},,,,,,,,,,,,,,,function(e,t){},,,,function(e,t){},,function(e,t){},,function(e,t){}]);